var Yg=h=>{throw TypeError(h)};var Xu=(h,t,i)=>t.has(h)||Yg("Cannot "+i);var Qt=(h,t,i)=>(Xu(h,t,"read from private field"),i?i.call(h):t.get(h)),Di=(h,t,i)=>t.has(h)?Yg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),He=(h,t,i,s)=>(Xu(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),Ni=(h,t,i)=>(Xu(h,t,"access private method"),i);var Xg=(h,t,i,s)=>({set _(r){He(h,t,r,i)},get _(){return Qt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var qu={exports:{}},sr={};var qg;function dv(){if(qg)return sr;qg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:h,type:s,key:l,ref:r!==void 0?r:null,props:o}}return sr.Fragment=t,sr.jsx=i,sr.jsxs=i,sr}var $g;function fv(){return $g||($g=1,qu.exports=dv()),qu.exports}var T=fv(),$u={exports:{}},bt={};var Kg;function mv(){if(Kg)return bt;Kg=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function S(R,H,K){this.props=R,this.context=H,this.refs=C,this.updater=K||x}S.prototype.isReactComponent={},S.prototype.setState=function(R,H){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,H,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function M(){}M.prototype=S.prototype;function _(R,H,K){this.props=R,this.context=H,this.refs=C,this.updater=K||x}var B=_.prototype=new M;B.constructor=_,w(B,S.prototype),B.isPureReactComponent=!0;var N=Array.isArray;function k(){}var z={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function Y(R,H,K){var tt=K.ref;return{$$typeof:h,type:R,key:H,ref:tt!==void 0?tt:null,props:K}}function Z(R,H){return Y(R.type,H,R.props)}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===h}function ot(R){var H={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(K){return H[K]})}var xt=/\/+/g;function ht(R,H){return typeof R=="object"&&R!==null&&R.key!=null?ot(""+R.key):H.toString(36)}function At(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(k,k):(R.status="pending",R.then(function(H){R.status==="pending"&&(R.status="fulfilled",R.value=H)},function(H){R.status==="pending"&&(R.status="rejected",R.reason=H)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function O(R,H,K,tt,at){var ft=typeof R;(ft==="undefined"||ft==="boolean")&&(R=null);var ut=!1;if(R===null)ut=!0;else switch(ft){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(R.$$typeof){case h:case t:ut=!0;break;case g:return ut=R._init,O(ut(R._payload),H,K,tt,at)}}if(ut)return at=at(R),ut=tt===""?"."+ht(R,0):tt,N(at)?(K="",ut!=null&&(K=ut.replace(xt,"$&/")+"/"),O(at,H,K,"",function(rt){return rt})):at!=null&&(W(at)&&(at=Z(at,K+(at.key==null||R&&R.key===at.key?"":(""+at.key).replace(xt,"$&/")+"/")+ut)),H.push(at)),1;ut=0;var qt=tt===""?".":tt+":";if(N(R))for(var J=0;J<R.length;J++)tt=R[J],ft=qt+ht(tt,J),ut+=O(tt,H,K,ft,at);else if(J=A(R),typeof J=="function")for(R=J.call(R),J=0;!(tt=R.next()).done;)tt=tt.value,ft=qt+ht(tt,J++),ut+=O(tt,H,K,ft,at);else if(ft==="object"){if(typeof R.then=="function")return O(At(R),H,K,tt,at);throw H=String(R),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ut}function I(R,H,K){if(R==null)return R;var tt=[],at=0;return O(R,tt,"","",function(ft){return H.call(K,ft,at++)}),tt}function Q(R){if(R._status===-1){var H=R._result;H=H(),H.then(function(K){(R._status===0||R._status===-1)&&(R._status=1,R._result=K)},function(K){(R._status===0||R._status===-1)&&(R._status=2,R._result=K)}),R._status===-1&&(R._status=0,R._result=H)}if(R._status===1)return R._result.default;throw R._result}var mt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},St={map:I,forEach:function(R,H,K){I(R,function(){H.apply(this,arguments)},K)},count:function(R){var H=0;return I(R,function(){H++}),H},toArray:function(R){return I(R,function(H){return H})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return bt.Activity=b,bt.Children=St,bt.Component=S,bt.Fragment=i,bt.Profiler=r,bt.PureComponent=_,bt.StrictMode=s,bt.Suspense=d,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,bt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return z.H.useMemoCache(R)}},bt.cache=function(R){return function(){return R.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(R,H,K){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var tt=w({},R.props),at=R.key;if(H!=null)for(ft in H.key!==void 0&&(at=""+H.key),H)!$.call(H,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&H.ref===void 0||(tt[ft]=H[ft]);var ft=arguments.length-2;if(ft===1)tt.children=K;else if(1<ft){for(var ut=Array(ft),qt=0;qt<ft;qt++)ut[qt]=arguments[qt+2];tt.children=ut}return Y(R.type,at,tt)},bt.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},bt.createElement=function(R,H,K){var tt,at={},ft=null;if(H!=null)for(tt in H.key!==void 0&&(ft=""+H.key),H)$.call(H,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(at[tt]=H[tt]);var ut=arguments.length-2;if(ut===1)at.children=K;else if(1<ut){for(var qt=Array(ut),J=0;J<ut;J++)qt[J]=arguments[J+2];at.children=qt}if(R&&R.defaultProps)for(tt in ut=R.defaultProps,ut)at[tt]===void 0&&(at[tt]=ut[tt]);return Y(R,ft,at)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(R){return{$$typeof:u,render:R}},bt.isValidElement=W,bt.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:Q}},bt.memo=function(R,H){return{$$typeof:f,type:R,compare:H===void 0?null:H}},bt.startTransition=function(R){var H=z.T,K={};z.T=K;try{var tt=R(),at=z.S;at!==null&&at(K,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(k,mt)}catch(ft){mt(ft)}finally{H!==null&&K.types!==null&&(H.types=K.types),z.T=H}},bt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},bt.use=function(R){return z.H.use(R)},bt.useActionState=function(R,H,K){return z.H.useActionState(R,H,K)},bt.useCallback=function(R,H){return z.H.useCallback(R,H)},bt.useContext=function(R){return z.H.useContext(R)},bt.useDebugValue=function(){},bt.useDeferredValue=function(R,H){return z.H.useDeferredValue(R,H)},bt.useEffect=function(R,H){return z.H.useEffect(R,H)},bt.useEffectEvent=function(R){return z.H.useEffectEvent(R)},bt.useId=function(){return z.H.useId()},bt.useImperativeHandle=function(R,H,K){return z.H.useImperativeHandle(R,H,K)},bt.useInsertionEffect=function(R,H){return z.H.useInsertionEffect(R,H)},bt.useLayoutEffect=function(R,H){return z.H.useLayoutEffect(R,H)},bt.useMemo=function(R,H){return z.H.useMemo(R,H)},bt.useOptimistic=function(R,H){return z.H.useOptimistic(R,H)},bt.useReducer=function(R,H,K){return z.H.useReducer(R,H,K)},bt.useRef=function(R){return z.H.useRef(R)},bt.useState=function(R){return z.H.useState(R)},bt.useSyncExternalStore=function(R,H,K){return z.H.useSyncExternalStore(R,H,K)},bt.useTransition=function(){return z.H.useTransition()},bt.version="19.2.4",bt}var Wg;function Ch(){return Wg||(Wg=1,$u.exports=mv()),$u.exports}var Et=Ch(),Ku={exports:{}},ar={},Wu={exports:{}},Qu={};var Qg;function gv(){return Qg||(Qg=1,(function(h){function t(O,I){var Q=O.length;O.push(I);t:for(;0<Q;){var mt=Q-1>>>1,St=O[mt];if(0<r(St,I))O[mt]=I,O[Q]=St,Q=mt;else break t}}function i(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var I=O[0],Q=O.pop();if(Q!==I){O[0]=Q;t:for(var mt=0,St=O.length,R=St>>>1;mt<R;){var H=2*(mt+1)-1,K=O[H],tt=H+1,at=O[tt];if(0>r(K,Q))tt<St&&0>r(at,K)?(O[mt]=at,O[tt]=Q,mt=tt):(O[mt]=K,O[H]=Q,mt=H);else if(tt<St&&0>r(at,Q))O[mt]=at,O[tt]=Q,mt=tt;else break t}}return I}function r(O,I){var Q=O.sortIndex-I.sortIndex;return Q!==0?Q:O.id-I.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,b=null,y=3,A=!1,x=!1,w=!1,C=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function B(O){for(var I=i(f);I!==null;){if(I.callback===null)s(f);else if(I.startTime<=O)s(f),I.sortIndex=I.expirationTime,t(d,I);else break;I=i(f)}}function N(O){if(w=!1,B(O),!x)if(i(d)!==null)x=!0,k||(k=!0,ot());else{var I=i(f);I!==null&&At(N,I.startTime-O)}}var k=!1,z=-1,$=5,Y=-1;function Z(){return C?!0:!(h.unstable_now()-Y<$)}function W(){if(C=!1,k){var O=h.unstable_now();Y=O;var I=!0;try{t:{x=!1,w&&(w=!1,M(z),z=-1),A=!0;var Q=y;try{e:{for(B(O),b=i(d);b!==null&&!(b.expirationTime>O&&Z());){var mt=b.callback;if(typeof mt=="function"){b.callback=null,y=b.priorityLevel;var St=mt(b.expirationTime<=O);if(O=h.unstable_now(),typeof St=="function"){b.callback=St,B(O),I=!0;break e}b===i(d)&&s(d),B(O)}else s(d);b=i(d)}if(b!==null)I=!0;else{var R=i(f);R!==null&&At(N,R.startTime-O),I=!1}}break t}finally{b=null,y=Q,A=!1}I=void 0}}finally{I?ot():k=!1}}}var ot;if(typeof _=="function")ot=function(){_(W)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,ht=xt.port2;xt.port1.onmessage=W,ot=function(){ht.postMessage(null)}}else ot=function(){S(W,0)};function At(O,I){z=S(function(){O(h.unstable_now())},I)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(O){O.callback=null},h.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},h.unstable_getCurrentPriorityLevel=function(){return y},h.unstable_next=function(O){switch(y){case 1:case 2:case 3:var I=3;break;default:I=y}var Q=y;y=I;try{return O()}finally{y=Q}},h.unstable_requestPaint=function(){C=!0},h.unstable_runWithPriority=function(O,I){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=y;y=O;try{return I()}finally{y=Q}},h.unstable_scheduleCallback=function(O,I,Q){var mt=h.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?mt+Q:mt):Q=mt,O){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=Q+St,O={id:g++,callback:I,priorityLevel:O,startTime:Q,expirationTime:St,sortIndex:-1},Q>mt?(O.sortIndex=Q,t(f,O),i(d)===null&&O===i(f)&&(w?(M(z),z=-1):w=!0,At(N,Q-mt))):(O.sortIndex=St,t(d,O),x||A||(x=!0,k||(k=!0,ot()))),O},h.unstable_shouldYield=Z,h.unstable_wrapCallback=function(O){var I=y;return function(){var Q=y;y=I;try{return O.apply(this,arguments)}finally{y=Q}}}})(Qu)),Qu}var Zg;function pv(){return Zg||(Zg=1,Wu.exports=gv()),Wu.exports}var Zu={exports:{}},Re={};var Jg;function bv(){if(Jg)return Re;Jg=1;var h=Ch();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:d,containerInfo:f,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Re.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Re.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Re.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},Re.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Re.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Re.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,b=u(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:b,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Re.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Re.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,b=u(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Re.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Re.requestFormReset=function(d){s.d.r(d)},Re.unstable_batchedUpdates=function(d,f){return d(f)},Re.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},Re.useFormStatus=function(){return l.H.useHostTransitionStatus()},Re.version="19.2.4",Re}var tp;function yv(){if(tp)return Zu.exports;tp=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Zu.exports=bv(),Zu.exports}var ep;function vv(){if(ep)return ar;ep=1;var h=pv(),t=Ch(),i=yv();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function l(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,c=n;;){var m=a.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){a=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===a)return d(m),e;if(p===c)return d(m),n;p=p.sibling}throw Error(s(188))}if(a.return!==c.return)a=m,c=p;else{for(var v=!1,E=m.child;E;){if(E===a){v=!0,a=m,c=p;break}if(E===c){v=!0,c=m,a=p;break}E=E.sibling}if(!v){for(E=p.child;E;){if(E===a){v=!0,a=p,c=m;break}if(E===c){v=!0,c=p,a=m;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),_=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ot(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Symbol.for("react.client.reference");function ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case S:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case k:return"SuspenseList";case Y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case _:return e.displayName||"Context";case M:return(e._context.displayName||"Context")+".Consumer";case B:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return n=e.displayName||null,n!==null?n:ht(e.type)||"Memo";case $:n=e._payload,e=e._init;try{return ht(e(n))}catch{}}return null}var At=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},mt=[],St=-1;function R(e){return{current:e}}function H(e){0>St||(e.current=mt[St],mt[St]=null,St--)}function K(e,n){St++,mt[St]=e.current,e.current=n}var tt=R(null),at=R(null),ft=R(null),ut=R(null);function qt(e,n){switch(K(ft,n),K(at,e),K(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?mg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=mg(n),e=gg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(tt),K(tt,e)}function J(){H(tt),H(at),H(ft)}function rt(e){e.memoizedState!==null&&K(ut,e);var n=tt.current,a=gg(n,e.type);n!==a&&(K(at,e),K(tt,a))}function It(e){at.current===e&&(H(tt),H(at)),ut.current===e&&(H(ut),tr._currentValue=Q)}var Jt,ri;function be(e){if(Jt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Jt=n&&n[1]||"",ri=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+e+ri}var ha=!1;function Nl(e,n){if(!e||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(G){var U=G}Reflect.construct(e,[],q)}else{try{q.call()}catch(G){U=G}e.call(q.prototype)}}else{try{throw Error()}catch(G){U=G}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(G){if(G&&U&&typeof G.stack=="string")return[G.stack,U.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),v=p[0],E=p[1];if(v&&E){var D=v.split(`
`),P=E.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<P.length&&!P[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===P.length)for(c=D.length-1,m=P.length-1;1<=c&&0<=m&&D[c]!==P[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==P[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==P[m]){var V=`
`+D[c].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=c&&0<=m);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?be(a):""}function G0(e,n){switch(e.tag){case 26:case 27:case 5:return be(e.type);case 16:return be("Lazy");case 13:return e.child!==n&&n!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Nl(e.type,!1);case 11:return Nl(e.type.render,!1);case 1:return Nl(e.type,!0);case 31:return be("Activity");default:return""}}function Vh(e){try{var n="",a=null;do n+=G0(e,a),a=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rl=Object.prototype.hasOwnProperty,Ol=h.unstable_scheduleCallback,kl=h.unstable_cancelCallback,V0=h.unstable_shouldYield,Y0=h.unstable_requestPaint,Xe=h.unstable_now,X0=h.unstable_getCurrentPriorityLevel,Yh=h.unstable_ImmediatePriority,Xh=h.unstable_UserBlockingPriority,_r=h.unstable_NormalPriority,q0=h.unstable_LowPriority,qh=h.unstable_IdlePriority,$0=h.log,K0=h.unstable_setDisableYieldValue,da=null,qe=null;function an(e){if(typeof $0=="function"&&K0(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(da,e)}catch{}}var $e=Math.clz32?Math.clz32:Z0,W0=Math.log,Q0=Math.LN2;function Z0(e){return e>>>=0,e===0?32:31-(W0(e)/Q0|0)|0}var Mr=256,Dr=262144,Nr=4194304;function Bn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rr(e,n,a){var c=e.pendingLanes;if(c===0)return 0;var m=0,p=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=c&134217727;return E!==0?(c=E&~p,c!==0?m=Bn(c):(v&=E,v!==0?m=Bn(v):a||(a=E&~e,a!==0&&(m=Bn(a))))):(E=c&~p,E!==0?m=Bn(E):v!==0?m=Bn(v):a||(a=c&~e,a!==0&&(m=Bn(a)))),m===0?0:n!==0&&n!==m&&(n&p)===0&&(p=m&-m,a=n&-n,p>=a||p===32&&(a&4194048)!==0)?n:m}function fa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function J0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $h(){var e=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),e}function Ll(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ma(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tb(e,n,a,c,m,p){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,D=e.expirationTimes,P=e.hiddenUpdates;for(a=v&~a;0<a;){var V=31-$e(a),q=1<<V;E[V]=0,D[V]=-1;var U=P[V];if(U!==null)for(P[V]=null,V=0;V<U.length;V++){var G=U[V];G!==null&&(G.lane&=-536870913)}a&=~q}c!==0&&Kh(e,c,0),p!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=p&~(v&~n))}function Kh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-$e(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Wh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var c=31-$e(a),m=1<<c;m&n|e[c]&n&&(e[c]|=n),a&=~m}}function Qh(e,n){var a=n&-n;return a=(a&42)!==0?1:Bl(a),(a&(e.suspendedLanes|n))!==0?0:a}function Bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zh(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:jg(e.type))}function Jh(e,n){var a=I.p;try{return I.p=e,n()}finally{I.p=a}}var rn=Math.random().toString(36).slice(2),xe="__reactFiber$"+rn,Be="__reactProps$"+rn,os="__reactContainer$"+rn,zl="__reactEvents$"+rn,eb="__reactListeners$"+rn,ib="__reactHandles$"+rn,td="__reactResources$"+rn,ga="__reactMarker$"+rn;function jl(e){delete e[xe],delete e[Be],delete e[zl],delete e[eb],delete e[ib]}function ls(e){var n=e[xe];if(n)return n;for(var a=e.parentNode;a;){if(n=a[os]||a[xe]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=xg(e);e!==null;){if(a=e[xe])return a;e=xg(e)}return n}e=a,a=e.parentNode}return null}function cs(e){if(e=e[xe]||e[os]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function us(e){var n=e[td];return n||(n=e[td]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ye(e){e[ga]=!0}var ed=new Set,id={};function Fn(e,n){hs(e,n),hs(e+"Capture",n)}function hs(e,n){for(id[e]=n,e=0;e<n.length;e++)ed.add(n[e])}var nb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nd={},sd={};function sb(e){return Rl.call(sd,e)?!0:Rl.call(nd,e)?!1:nb.test(e)?sd[e]=!0:(nd[e]=!0,!1)}function Or(e,n,a){if(sb(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function kr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function zi(e,n,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+c)}}function oi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ad(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ab(e,n,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return m.call(this)},set:function(v){a=""+v,p.call(this,v)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Pl(e){if(!e._valueTracker){var n=ad(e)?"checked":"value";e._valueTracker=ab(e,n,""+e[n])}}function rd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),c="";return e&&(c=ad(e)?e.checked?"true":"false":e.value),e=c,e!==a?(n.setValue(e),!0):!1}function Lr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rb=/[\n"\\]/g;function li(e){return e.replace(rb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ul(e,n,a,c,m,p,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+oi(n)):e.value!==""+oi(n)&&(e.value=""+oi(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Il(e,v,oi(n)):a!=null?Il(e,v,oi(a)):c!=null&&e.removeAttribute("value"),m==null&&p!=null&&(e.defaultChecked=!!p),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+oi(E):e.removeAttribute("name")}function od(e,n,a,c,m,p,v,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){Pl(e);return}a=a!=null?""+oi(a):"",n=n!=null?""+oi(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=E?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Pl(e)}function Il(e,n,a){n==="number"&&Lr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ds(e,n,a,c){if(e=e.options,n){n={};for(var m=0;m<a.length;m++)n["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=n.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&c&&(e[a].defaultSelected=!0)}else{for(a=""+oi(a),n=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}n!==null||e[m].disabled||(n=e[m])}n!==null&&(n.selected=!0)}}function ld(e,n,a){if(n!=null&&(n=""+oi(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+oi(a):""}function cd(e,n,a,c){if(n==null){if(c!=null){if(a!=null)throw Error(s(92));if(At(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),n=a}a=oi(n),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),Pl(e)}function fs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var ob=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(e,n,a){var c=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,a):typeof a!="number"||a===0||ob.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function hd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var m in n)c=n[m],n.hasOwnProperty(m)&&a[m]!==c&&ud(e,m,c)}else for(var p in n)n.hasOwnProperty(p)&&ud(e,p,n[p])}function Hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Br(e){return cb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ji(){}var Gl=null;function Vl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,gs=null;function dd(e){var n=cs(e);if(n&&(e=n.stateNode)){var a=e[Be]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ul(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+li(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var c=a[n];if(c!==e&&c.form===e.form){var m=c[Be]||null;if(!m)throw Error(s(90));Ul(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<a.length;n++)c=a[n],c.form===e.form&&rd(c)}break t;case"textarea":ld(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ds(e,!!a.multiple,n,!1)}}}var Yl=!1;function fd(e,n,a){if(Yl)return e(n,a);Yl=!0;try{var c=e(n);return c}finally{if(Yl=!1,(ms!==null||gs!==null)&&(So(),ms&&(n=ms,e=gs,gs=ms=null,dd(n),e)))for(n=0;n<e.length;n++)dd(e[n])}}function ba(e,n){var a=e.stateNode;if(a===null)return null;var c=a[Be]||null;if(c===null)return null;a=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xl=!1;if(Pi)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Xl=!1}var on=null,ql=null,Fr=null;function md(){if(Fr)return Fr;var e,n=ql,a=n.length,c,m="value"in on?on.value:on.textContent,p=m.length;for(e=0;e<a&&n[e]===m[e];e++);var v=a-e;for(c=1;c<=v&&n[a-c]===m[p-c];c++);return Fr=m.slice(e,1<c?1-c:void 0)}function zr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function jr(){return!0}function gd(){return!1}function Fe(e){function n(a,c,m,p,v){this._reactName=a,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jr:gd,this.isPropagationStopped=gd,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),n}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=Fe(zn),va=b({},zn,{view:0,detail:0}),ub=Fe(va),$l,Kl,Aa,Ur=b({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Aa&&(Aa&&e.type==="mousemove"?($l=e.screenX-Aa.screenX,Kl=e.screenY-Aa.screenY):Kl=$l=0,Aa=e),$l)},movementY:function(e){return"movementY"in e?e.movementY:Kl}}),pd=Fe(Ur),hb=b({},Ur,{dataTransfer:0}),db=Fe(hb),fb=b({},va,{relatedTarget:0}),Wl=Fe(fb),mb=b({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),gb=Fe(mb),pb=b({},zn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bb=Fe(pb),yb=b({},zn,{data:0}),bd=Fe(yb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ab={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=wb[e])?!!n[e]:!1}function Ql(){return xb}var Sb=b({},va,{key:function(e){if(e.key){var n=vb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=zr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ab[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?zr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eb=Fe(Sb),Tb=b({},Ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=Fe(Tb),Cb=b({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),_b=Fe(Cb),Mb=b({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Db=Fe(Mb),Nb=b({},Ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=Fe(Nb),Ob=b({},zn,{newState:0,oldState:0}),kb=Fe(Ob),Lb=[9,13,27,32],Zl=Pi&&"CompositionEvent"in window,wa=null;Pi&&"documentMode"in document&&(wa=document.documentMode);var Bb=Pi&&"TextEvent"in window&&!wa,vd=Pi&&(!Zl||wa&&8<wa&&11>=wa),Ad=" ",wd=!1;function xd(e,n){switch(e){case"keyup":return Lb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function Fb(e,n){switch(e){case"compositionend":return Sd(n);case"keypress":return n.which!==32?null:(wd=!0,Ad);case"textInput":return e=n.data,e===Ad&&wd?null:e;default:return null}}function zb(e,n){if(ps)return e==="compositionend"||!Zl&&xd(e,n)?(e=md(),Fr=ql=on=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vd&&n.locale!=="ko"?null:n.data;default:return null}}var jb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!jb[e.type]:n==="textarea"}function Td(e,n,a,c){ms?gs?gs.push(c):gs=[c]:ms=c,n=No(n,"onChange"),0<n.length&&(a=new Pr("onChange","change",null,a,c),e.push({event:a,listeners:n}))}var xa=null,Sa=null;function Pb(e){lg(e,0)}function Ir(e){var n=pa(e);if(rd(n))return e}function Cd(e,n){if(e==="change")return n}var _d=!1;if(Pi){var Jl;if(Pi){var tc="oninput"in document;if(!tc){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),tc=typeof Md.oninput=="function"}Jl=tc}else Jl=!1;_d=Jl&&(!document.documentMode||9<document.documentMode)}function Dd(){xa&&(xa.detachEvent("onpropertychange",Nd),Sa=xa=null)}function Nd(e){if(e.propertyName==="value"&&Ir(Sa)){var n=[];Td(n,Sa,e,Vl(e)),fd(Pb,n)}}function Ub(e,n,a){e==="focusin"?(Dd(),xa=n,Sa=a,xa.attachEvent("onpropertychange",Nd)):e==="focusout"&&Dd()}function Ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ir(Sa)}function Hb(e,n){if(e==="click")return Ir(n)}function Gb(e,n){if(e==="input"||e==="change")return Ir(n)}function Vb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ke=typeof Object.is=="function"?Object.is:Vb;function Ea(e,n){if(Ke(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var m=a[c];if(!Rl.call(n,m)||!Ke(e[m],n[m]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Od(e,n){var a=Rd(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=n&&c>=n)return{node:a,offset:n-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Rd(a)}}function kd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?kd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Ld(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Lr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Lr(e.document)}return n}function ec(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Yb=Pi&&"documentMode"in document&&11>=document.documentMode,bs=null,ic=null,Ta=null,nc=!1;function Bd(e,n,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nc||bs==null||bs!==Lr(c)||(c=bs,"selectionStart"in c&&ec(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ta&&Ea(Ta,c)||(Ta=c,c=No(ic,"onSelect"),0<c.length&&(n=new Pr("onSelect","select",null,n,a),e.push({event:n,listeners:c}),n.target=bs)))}function jn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var ys={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},sc={},Fd={};Pi&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Pn(e){if(sc[e])return sc[e];if(!ys[e])return e;var n=ys[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Fd)return sc[e]=n[a];return e}var zd=Pn("animationend"),jd=Pn("animationiteration"),Pd=Pn("animationstart"),Xb=Pn("transitionrun"),qb=Pn("transitionstart"),$b=Pn("transitioncancel"),Ud=Pn("transitionend"),Id=new Map,ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ac.push("scrollEnd");function wi(e,n){Id.set(e,n),Fn(n,[e])}var Hr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ci=[],vs=0,rc=0;function Gr(){for(var e=vs,n=rc=vs=0;n<e;){var a=ci[n];ci[n++]=null;var c=ci[n];ci[n++]=null;var m=ci[n];ci[n++]=null;var p=ci[n];if(ci[n++]=null,c!==null&&m!==null){var v=c.pending;v===null?m.next=m:(m.next=v.next,v.next=m),c.pending=m}p!==0&&Hd(a,m,p)}}function Vr(e,n,a,c){ci[vs++]=e,ci[vs++]=n,ci[vs++]=a,ci[vs++]=c,rc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function oc(e,n,a,c){return Vr(e,n,a,c),Yr(e)}function Un(e,n){return Vr(e,null,null,n),Yr(e)}function Hd(e,n,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var m=!1,p=e.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(m=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,m&&n!==null&&(m=31-$e(a),e=p.hiddenUpdates,c=e[m],c===null?e[m]=[n]:c.push(n),n.lane=a|536870912),p):null}function Yr(e){if(50<qa)throw qa=0,pu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var As={};function Kb(e,n,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(e,n,a,c){return new Kb(e,n,a,c)}function lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ui(e,n){var a=e.alternate;return a===null?(a=We(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Xr(e,n,a,c,m,p){var v=0;if(c=e,typeof e=="function")lc(e)&&(v=1);else if(typeof e=="string")v=tv(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Y:return e=We(31,a,n,m),e.elementType=Y,e.lanes=p,e;case w:return In(a.children,m,p,n);case C:v=8,m|=24;break;case S:return e=We(12,a,n,m|2),e.elementType=S,e.lanes=p,e;case N:return e=We(13,a,n,m),e.elementType=N,e.lanes=p,e;case k:return e=We(19,a,n,m),e.elementType=k,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _:v=10;break t;case M:v=9;break t;case B:v=11;break t;case z:v=14;break t;case $:v=16,c=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=We(v,a,n,m),n.elementType=e,n.type=c,n.lanes=p,n}function In(e,n,a,c){return e=We(7,e,c,n),e.lanes=a,e}function cc(e,n,a){return e=We(6,e,null,n),e.lanes=a,e}function Vd(e){var n=We(18,null,null,0);return n.stateNode=e,n}function uc(e,n,a){return n=We(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Yd=new WeakMap;function ui(e,n){if(typeof e=="object"&&e!==null){var a=Yd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Vh(n)},Yd.set(e,n),n)}return{value:e,source:n,stack:Vh(n)}}var ws=[],xs=0,qr=null,Ca=0,hi=[],di=0,ln=null,Ti=1,Ci="";function Ii(e,n){ws[xs++]=Ca,ws[xs++]=qr,qr=e,Ca=n}function Xd(e,n,a){hi[di++]=Ti,hi[di++]=Ci,hi[di++]=ln,ln=e;var c=Ti;e=Ci;var m=32-$e(c)-1;c&=~(1<<m),a+=1;var p=32-$e(n)+m;if(30<p){var v=m-m%5;p=(c&(1<<v)-1).toString(32),c>>=v,m-=v,Ti=1<<32-$e(n)+m|a<<m|c,Ci=p+e}else Ti=1<<p|a<<m|c,Ci=e}function hc(e){e.return!==null&&(Ii(e,1),Xd(e,1,0))}function dc(e){for(;e===qr;)qr=ws[--xs],ws[xs]=null,Ca=ws[--xs],ws[xs]=null;for(;e===ln;)ln=hi[--di],hi[di]=null,Ci=hi[--di],hi[di]=null,Ti=hi[--di],hi[di]=null}function qd(e,n){hi[di++]=Ti,hi[di++]=Ci,hi[di++]=ln,Ti=n.id,Ci=n.overflow,ln=e}var Se=null,$t=null,Dt=!1,cn=null,fi=!1,fc=Error(s(519));function un(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _a(ui(n,e)),fc}function $d(e){var n=e.stateNode,a=e.type,c=e.memoizedProps;switch(n[xe]=e,n[Be]=c,a){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(a=0;a<Ka.length;a++)Ct(Ka[a],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":Ct("invalid",n),od(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ct("invalid",n);break;case"textarea":Ct("invalid",n),cd(n,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||c.suppressHydrationWarning===!0||dg(n.textContent,a)?(c.popover!=null&&(Ct("beforetoggle",n),Ct("toggle",n)),c.onScroll!=null&&Ct("scroll",n),c.onScrollEnd!=null&&Ct("scrollend",n),c.onClick!=null&&(n.onclick=ji),n=!0):n=!1,n||un(e,!0)}function Kd(e){for(Se=e.return;Se;)switch(Se.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:Se=Se.return}}function Ss(e){if(e!==Se)return!1;if(!Dt)return Kd(e),Dt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ru(e.type,e.memoizedProps)),a=!a),a&&$t&&un(e),Kd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=wg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=wg(e)}else n===27?(n=$t,En(e.type)?(e=Fu,Fu=null,$t=e):$t=n):$t=Se?gi(e.stateNode.nextSibling):null;return!0}function Hn(){$t=Se=null,Dt=!1}function mc(){var e=cn;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),cn=null),e}function _a(e){cn===null?cn=[e]:cn.push(e)}var gc=R(null),Gn=null,Hi=null;function hn(e,n,a){K(gc,n._currentValue),n._currentValue=a}function Gi(e){e._currentValue=gc.current,H(gc)}function pc(e,n,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===a)break;e=e.return}}function bc(e,n,a,c){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;t:for(;p!==null;){var E=p;p=m;for(var D=0;D<n.length;D++)if(E.context===n[D]){p.lanes|=a,E=p.alternate,E!==null&&(E.lanes|=a),pc(p.return,a,e),c||(v=null);break t}p=E.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(s(341));v.lanes|=a,p=v.alternate,p!==null&&(p.lanes|=a),pc(v,a,e),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===e){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function Es(e,n,a,c){e=null;for(var m=n,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=m.type;Ke(m.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(m===ut.current){if(v=m.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(tr):e=[tr])}m=m.return}e!==null&&bc(n,e,a,c),n.flags|=262144}function $r(e){for(e=e.firstContext;e!==null;){if(!Ke(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){Gn=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ee(e){return Wd(Gn,e)}function Kr(e,n){return Gn===null&&Vn(e),Wd(e,n)}function Wd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Hi===null){if(e===null)throw Error(s(308));Hi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Hi=Hi.next=n;return a}var Wb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Qb=h.unstable_scheduleCallback,Zb=h.unstable_NormalPriority,le={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yc(){return{controller:new Wb,data:new Map,refCount:0}}function Ma(e){e.refCount--,e.refCount===0&&Qb(Zb,function(){e.controller.abort()})}var Da=null,vc=0,Ts=0,Cs=null;function Jb(e,n){if(Da===null){var a=Da=[];vc=0,Ts=xu(),Cs={status:"pending",value:void 0,then:function(c){a.push(c)}}}return vc++,n.then(Qd,Qd),n}function Qd(){if(--vc===0&&Da!==null){Cs!==null&&(Cs.status="fulfilled");var e=Da;Da=null,Ts=0,Cs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ty(e,n){var a=[],c={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var m=0;m<a.length;m++)(0,a[m])(n)},function(m){for(c.status="rejected",c.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),c}var Zd=O.S;O.S=function(e,n){Fm=Xe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Jb(e,n),Zd!==null&&Zd(e,n)};var Yn=R(null);function Ac(){var e=Yn.current;return e!==null?e:Xt.pooledCache}function Wr(e,n){n===null?K(Yn,Yn.current):K(Yn,n.pool)}function Jd(){var e=Ac();return e===null?null:{parent:le._currentValue,pool:e}}var _s=Error(s(460)),wc=Error(s(474)),Qr=Error(s(542)),Zr={then:function(){}};function tf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ef(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ji,ji),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sf(e),e;default:if(typeof n.status=="string")n.then(ji,ji);else{if(e=Xt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=c}},function(c){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,sf(e),e}throw qn=n,_s}}function Xn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qn=a,_s):a}}var qn=null;function nf(){if(qn===null)throw Error(s(459));var e=qn;return qn=null,e}function sf(e){if(e===_s||e===Qr)throw Error(s(483))}var Ms=null,Na=0;function Jr(e){var n=Na;return Na+=1,Ms===null&&(Ms=[]),ef(Ms,e,n)}function Ra(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function to(e,n){throw n.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function af(e){function n(F,L){if(e){var j=F.deletions;j===null?(F.deletions=[L],F.flags|=16):j.push(L)}}function a(F,L){if(!e)return null;for(;L!==null;)n(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function m(F,L){return F=Ui(F,L),F.index=0,F.sibling=null,F}function p(F,L,j){return F.index=j,e?(j=F.alternate,j!==null?(j=j.index,j<L?(F.flags|=67108866,L):j):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function v(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function E(F,L,j,X){return L===null||L.tag!==6?(L=cc(j,F.mode,X),L.return=F,L):(L=m(L,j),L.return=F,L)}function D(F,L,j,X){var lt=j.type;return lt===w?V(F,L,j.props.children,X,j.key):L!==null&&(L.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===$&&Xn(lt)===L.type)?(L=m(L,j.props),Ra(L,j),L.return=F,L):(L=Xr(j.type,j.key,j.props,null,F.mode,X),Ra(L,j),L.return=F,L)}function P(F,L,j,X){return L===null||L.tag!==4||L.stateNode.containerInfo!==j.containerInfo||L.stateNode.implementation!==j.implementation?(L=uc(j,F.mode,X),L.return=F,L):(L=m(L,j.children||[]),L.return=F,L)}function V(F,L,j,X,lt){return L===null||L.tag!==7?(L=In(j,F.mode,X,lt),L.return=F,L):(L=m(L,j),L.return=F,L)}function q(F,L,j){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=cc(""+L,F.mode,j),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return j=Xr(L.type,L.key,L.props,null,F.mode,j),Ra(j,L),j.return=F,j;case x:return L=uc(L,F.mode,j),L.return=F,L;case $:return L=Xn(L),q(F,L,j)}if(At(L)||ot(L))return L=In(L,F.mode,j,null),L.return=F,L;if(typeof L.then=="function")return q(F,Jr(L),j);if(L.$$typeof===_)return q(F,Kr(F,L),j);to(F,L)}return null}function U(F,L,j,X){var lt=L!==null?L.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return lt!==null?null:E(F,L,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return j.key===lt?D(F,L,j,X):null;case x:return j.key===lt?P(F,L,j,X):null;case $:return j=Xn(j),U(F,L,j,X)}if(At(j)||ot(j))return lt!==null?null:V(F,L,j,X,null);if(typeof j.then=="function")return U(F,L,Jr(j),X);if(j.$$typeof===_)return U(F,L,Kr(F,j),X);to(F,j)}return null}function G(F,L,j,X,lt){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return F=F.get(j)||null,E(L,F,""+X,lt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return F=F.get(X.key===null?j:X.key)||null,D(L,F,X,lt);case x:return F=F.get(X.key===null?j:X.key)||null,P(L,F,X,lt);case $:return X=Xn(X),G(F,L,j,X,lt)}if(At(X)||ot(X))return F=F.get(j)||null,V(L,F,X,lt,null);if(typeof X.then=="function")return G(F,L,j,Jr(X),lt);if(X.$$typeof===_)return G(F,L,j,Kr(L,X),lt);to(L,X)}return null}function nt(F,L,j,X){for(var lt=null,Rt=null,st=L,wt=L=0,Mt=null;st!==null&&wt<j.length;wt++){st.index>wt?(Mt=st,st=null):Mt=st.sibling;var Ot=U(F,st,j[wt],X);if(Ot===null){st===null&&(st=Mt);break}e&&st&&Ot.alternate===null&&n(F,st),L=p(Ot,L,wt),Rt===null?lt=Ot:Rt.sibling=Ot,Rt=Ot,st=Mt}if(wt===j.length)return a(F,st),Dt&&Ii(F,wt),lt;if(st===null){for(;wt<j.length;wt++)st=q(F,j[wt],X),st!==null&&(L=p(st,L,wt),Rt===null?lt=st:Rt.sibling=st,Rt=st);return Dt&&Ii(F,wt),lt}for(st=c(st);wt<j.length;wt++)Mt=G(st,F,wt,j[wt],X),Mt!==null&&(e&&Mt.alternate!==null&&st.delete(Mt.key===null?wt:Mt.key),L=p(Mt,L,wt),Rt===null?lt=Mt:Rt.sibling=Mt,Rt=Mt);return e&&st.forEach(function(Dn){return n(F,Dn)}),Dt&&Ii(F,wt),lt}function dt(F,L,j,X){if(j==null)throw Error(s(151));for(var lt=null,Rt=null,st=L,wt=L=0,Mt=null,Ot=j.next();st!==null&&!Ot.done;wt++,Ot=j.next()){st.index>wt?(Mt=st,st=null):Mt=st.sibling;var Dn=U(F,st,Ot.value,X);if(Dn===null){st===null&&(st=Mt);break}e&&st&&Dn.alternate===null&&n(F,st),L=p(Dn,L,wt),Rt===null?lt=Dn:Rt.sibling=Dn,Rt=Dn,st=Mt}if(Ot.done)return a(F,st),Dt&&Ii(F,wt),lt;if(st===null){for(;!Ot.done;wt++,Ot=j.next())Ot=q(F,Ot.value,X),Ot!==null&&(L=p(Ot,L,wt),Rt===null?lt=Ot:Rt.sibling=Ot,Rt=Ot);return Dt&&Ii(F,wt),lt}for(st=c(st);!Ot.done;wt++,Ot=j.next())Ot=G(st,F,wt,Ot.value,X),Ot!==null&&(e&&Ot.alternate!==null&&st.delete(Ot.key===null?wt:Ot.key),L=p(Ot,L,wt),Rt===null?lt=Ot:Rt.sibling=Ot,Rt=Ot);return e&&st.forEach(function(hv){return n(F,hv)}),Dt&&Ii(F,wt),lt}function Vt(F,L,j,X){if(typeof j=="object"&&j!==null&&j.type===w&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case A:t:{for(var lt=j.key;L!==null;){if(L.key===lt){if(lt=j.type,lt===w){if(L.tag===7){a(F,L.sibling),X=m(L,j.props.children),X.return=F,F=X;break t}}else if(L.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===$&&Xn(lt)===L.type){a(F,L.sibling),X=m(L,j.props),Ra(X,j),X.return=F,F=X;break t}a(F,L);break}else n(F,L);L=L.sibling}j.type===w?(X=In(j.props.children,F.mode,X,j.key),X.return=F,F=X):(X=Xr(j.type,j.key,j.props,null,F.mode,X),Ra(X,j),X.return=F,F=X)}return v(F);case x:t:{for(lt=j.key;L!==null;){if(L.key===lt)if(L.tag===4&&L.stateNode.containerInfo===j.containerInfo&&L.stateNode.implementation===j.implementation){a(F,L.sibling),X=m(L,j.children||[]),X.return=F,F=X;break t}else{a(F,L);break}else n(F,L);L=L.sibling}X=uc(j,F.mode,X),X.return=F,F=X}return v(F);case $:return j=Xn(j),Vt(F,L,j,X)}if(At(j))return nt(F,L,j,X);if(ot(j)){if(lt=ot(j),typeof lt!="function")throw Error(s(150));return j=lt.call(j),dt(F,L,j,X)}if(typeof j.then=="function")return Vt(F,L,Jr(j),X);if(j.$$typeof===_)return Vt(F,L,Kr(F,j),X);to(F,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,L!==null&&L.tag===6?(a(F,L.sibling),X=m(L,j),X.return=F,F=X):(a(F,L),X=cc(j,F.mode,X),X.return=F,F=X),v(F)):a(F,L)}return function(F,L,j,X){try{Na=0;var lt=Vt(F,L,j,X);return Ms=null,lt}catch(st){if(st===_s||st===Qr)throw st;var Rt=We(29,st,null,F.mode);return Rt.lanes=X,Rt.return=F,Rt}}}var $n=af(!0),rf=af(!1),dn=!1;function xc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function mn(e,n,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(kt&2)!==0){var m=c.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),c.pending=n,n=Yr(e),Hd(e,null,a),n}return Vr(e,c,n,a),Yr(e)}function Oa(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Wh(e,a)}}function Ec(e,n){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var m=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?m=p=n:p=p.next=n}else m=p=n;a={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Tc=!1;function ka(){if(Tc){var e=Cs;if(e!==null)throw e}}function La(e,n,a,c){Tc=!1;var m=e.updateQueue;dn=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var D=E,P=D.next;D.next=null,v===null?p=P:v.next=P,v=D;var V=e.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==v&&(E===null?V.firstBaseUpdate=P:E.next=P,V.lastBaseUpdate=D))}if(p!==null){var q=m.baseState;v=0,V=P=D=null,E=p;do{var U=E.lane&-536870913,G=U!==E.lane;if(G?(_t&U)===U:(c&U)===U){U!==0&&U===Ts&&(Tc=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var nt=e,dt=E;U=n;var Vt=a;switch(dt.tag){case 1:if(nt=dt.payload,typeof nt=="function"){q=nt.call(Vt,q,U);break t}q=nt;break t;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=dt.payload,U=typeof nt=="function"?nt.call(Vt,q,U):nt,U==null)break t;q=b({},q,U);break t;case 2:dn=!0}}U=E.callback,U!==null&&(e.flags|=64,G&&(e.flags|=8192),G=m.callbacks,G===null?m.callbacks=[U]:G.push(U))}else G={lane:U,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(P=V=G,D=q):V=V.next=G,v|=U;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;G=E,E=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);V===null&&(D=q),m.baseState=D,m.firstBaseUpdate=P,m.lastBaseUpdate=V,p===null&&(m.shared.lanes=0),vn|=v,e.lanes=v,e.memoizedState=q}}function of(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function lf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)of(a[e],n)}var Ds=R(null),eo=R(0);function cf(e,n){e=Zi,K(eo,e),K(Ds,n),Zi=e|n.baseLanes}function Cc(){K(eo,Zi),K(Ds,Ds.current)}function _c(){Zi=eo.current,H(Ds),H(eo)}var Qe=R(null),mi=null;function gn(e){var n=e.alternate;K(ae,ae.current&1),K(Qe,e),mi===null&&(n===null||Ds.current!==null||n.memoizedState!==null)&&(mi=e)}function Mc(e){K(ae,ae.current),K(Qe,e),mi===null&&(mi=e)}function uf(e){e.tag===22?(K(ae,ae.current),K(Qe,e),mi===null&&(mi=e)):pn()}function pn(){K(ae,ae.current),K(Qe,Qe.current)}function Ze(e){H(Qe),mi===e&&(mi=null),H(ae)}var ae=R(0);function io(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lu(a)||Bu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vi=0,vt=null,Ht=null,ce=null,no=!1,Ns=!1,Kn=!1,so=0,Ba=0,Rs=null,ey=0;function ie(){throw Error(s(321))}function Dc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Ke(e[a],n[a]))return!1;return!0}function Nc(e,n,a,c,m,p){return Vi=p,vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?qf:Yc,Kn=!1,p=a(c,m),Kn=!1,Ns&&(p=df(n,a,c,m)),hf(e),p}function hf(e){O.H=ja;var n=Ht!==null&&Ht.next!==null;if(Vi=0,ce=Ht=vt=null,no=!1,Ba=0,Rs=null,n)throw Error(s(300));e===null||ue||(e=e.dependencies,e!==null&&$r(e)&&(ue=!0))}function df(e,n,a,c){vt=e;var m=0;do{if(Ns&&(Rs=null),Ba=0,Ns=!1,25<=m)throw Error(s(301));if(m+=1,ce=Ht=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=$f,p=n(a,c)}while(Ns);return p}function iy(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?Fa(n):n,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(vt.flags|=1024),n}function Rc(){var e=so!==0;return so=0,e}function Oc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function kc(e){if(no){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}no=!1}Vi=0,ce=Ht=vt=null,Ns=!1,Ba=so=0,Rs=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?vt.memoizedState=ce=e:ce=ce.next=e,ce}function re(){if(Ht===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var n=ce===null?vt.memoizedState:ce.next;if(n!==null)ce=n,Ht=e;else{if(e===null)throw vt.alternate===null?Error(s(467)):Error(s(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ce===null?vt.memoizedState=ce=e:ce=ce.next=e}return ce}function ao(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fa(e){var n=Ba;return Ba+=1,Rs===null&&(Rs=[]),e=ef(Rs,e,n),n=vt,(ce===null?n.memoizedState:ce.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?qf:Yc),e}function ro(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fa(e);if(e.$$typeof===_)return Ee(e)}throw Error(s(438,String(e)))}function Lc(e){var n=null,a=vt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var c=vt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ao(),vt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),c=0;c<e;c++)a[c]=Z;return n.index++,a}function Yi(e,n){return typeof n=="function"?n(e):n}function oo(e){var n=re();return Bc(n,Ht,e)}function Bc(e,n,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var m=e.baseQueue,p=c.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}n.baseQueue=m=p,c.pending=null}if(p=e.baseState,m===null)e.memoizedState=p;else{n=m.next;var E=v=null,D=null,P=n,V=!1;do{var q=P.lane&-536870913;if(q!==P.lane?(_t&q)===q:(Vi&q)===q){var U=P.revertLane;if(U===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),q===Ts&&(V=!0);else if((Vi&U)===U){P=P.next,U===Ts&&(V=!0);continue}else q={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(E=D=q,v=p):D=D.next=q,vt.lanes|=U,vn|=U;q=P.action,Kn&&a(p,q),p=P.hasEagerState?P.eagerState:a(p,q)}else U={lane:q,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},D===null?(E=D=U,v=p):D=D.next=U,vt.lanes|=q,vn|=q;P=P.next}while(P!==null&&P!==n);if(D===null?v=p:D.next=E,!Ke(p,e.memoizedState)&&(ue=!0,V&&(a=Cs,a!==null)))throw a;e.memoizedState=p,e.baseState=v,e.baseQueue=D,c.lastRenderedState=p}return m===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Fc(e){var n=re(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,m=a.pending,p=n.memoizedState;if(m!==null){a.pending=null;var v=m=m.next;do p=e(p,v.action),v=v.next;while(v!==m);Ke(p,n.memoizedState)||(ue=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),a.lastRenderedState=p}return[p,c]}function ff(e,n,a){var c=vt,m=re(),p=Dt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!Ke((Ht||m).memoizedState,a);if(v&&(m.memoizedState=a,ue=!0),m=m.queue,Pc(pf.bind(null,c,m,e),[e]),m.getSnapshot!==n||v||ce!==null&&ce.memoizedState.tag&1){if(c.flags|=2048,Os(9,{destroy:void 0},gf.bind(null,c,m,a,n),null),Xt===null)throw Error(s(349));p||(Vi&127)!==0||mf(c,n,a)}return a}function mf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=vt.updateQueue,n===null?(n=ao(),vt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function gf(e,n,a,c){n.value=a,n.getSnapshot=c,bf(n)&&yf(e)}function pf(e,n,a){return a(function(){bf(n)&&yf(e)})}function bf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Ke(e,a)}catch{return!0}}function yf(e){var n=Un(e,2);n!==null&&Ie(n,e,2)}function zc(e){var n=Oe();if(typeof e=="function"){var a=e;if(e=a(),Kn){an(!0);try{a()}finally{an(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},n}function vf(e,n,a,c){return e.baseState=a,Bc(e,Ht,typeof c=="function"?c:Yi)}function ny(e,n,a,c,m){if(uo(e))throw Error(s(485));if(e=n.action,e!==null){var p={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};O.T!==null?a(!0):p.isTransition=!1,c(p),a=n.pending,a===null?(p.next=n.pending=p,Af(n,p)):(p.next=a.next,n.pending=a.next=p)}}function Af(e,n){var a=n.action,c=n.payload,m=e.state;if(n.isTransition){var p=O.T,v={};O.T=v;try{var E=a(m,c),D=O.S;D!==null&&D(v,E),wf(e,n,E)}catch(P){jc(e,n,P)}finally{p!==null&&v.types!==null&&(p.types=v.types),O.T=p}}else try{p=a(m,c),wf(e,n,p)}catch(P){jc(e,n,P)}}function wf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){xf(e,n,c)},function(c){return jc(e,n,c)}):xf(e,n,a)}function xf(e,n,a){n.status="fulfilled",n.value=a,Sf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Af(e,a)))}function jc(e,n,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=a,Sf(n),n=n.next;while(n!==c)}e.action=null}function Sf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ef(e,n){return n}function Tf(e,n){if(Dt){var a=Xt.formState;if(a!==null){t:{var c=vt;if(Dt){if($t){e:{for(var m=$t,p=fi;m.nodeType!==8;){if(!p){m=null;break e}if(m=gi(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){$t=gi(m.nextSibling),c=m.data==="F!";break t}}un(c)}c=!1}c&&(n=a[0])}}return a=Oe(),a.memoizedState=a.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ef,lastRenderedState:n},a.queue=c,a=Vf.bind(null,vt,c),c.dispatch=a,c=zc(!1),p=Vc.bind(null,vt,!1,c.queue),c=Oe(),m={state:n,dispatch:null,action:e,pending:null},c.queue=m,a=ny.bind(null,vt,m,p,a),m.dispatch=a,c.memoizedState=e,[n,a,!1]}function Cf(e){var n=re();return _f(n,Ht,e)}function _f(e,n,a){if(n=Bc(e,n,Ef)[0],e=oo(Yi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Fa(n)}catch(v){throw v===_s?Qr:v}else c=n;n=re();var m=n.queue,p=m.dispatch;return a!==n.memoizedState&&(vt.flags|=2048,Os(9,{destroy:void 0},sy.bind(null,m,a),null)),[c,p,e]}function sy(e,n){e.action=n}function Mf(e){var n=re(),a=Ht;if(a!==null)return _f(n,a,e);re(),n=n.memoizedState,a=re();var c=a.queue.dispatch;return a.memoizedState=e,[n,c,!1]}function Os(e,n,a,c){return e={tag:e,create:a,deps:c,inst:n,next:null},n=vt.updateQueue,n===null&&(n=ao(),vt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,n.lastEffect=e),e}function Df(){return re().memoizedState}function lo(e,n,a,c){var m=Oe();vt.flags|=e,m.memoizedState=Os(1|n,{destroy:void 0},a,c===void 0?null:c)}function co(e,n,a,c){var m=re();c=c===void 0?null:c;var p=m.memoizedState.inst;Ht!==null&&c!==null&&Dc(c,Ht.memoizedState.deps)?m.memoizedState=Os(n,p,a,c):(vt.flags|=e,m.memoizedState=Os(1|n,p,a,c))}function Nf(e,n){lo(8390656,8,e,n)}function Pc(e,n){co(2048,8,e,n)}function ay(e){vt.flags|=4;var n=vt.updateQueue;if(n===null)n=ao(),vt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Rf(e){var n=re().memoizedState;return ay({ref:n,nextImpl:e}),function(){if((kt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Of(e,n){return co(4,2,e,n)}function kf(e,n){return co(4,4,e,n)}function Lf(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Bf(e,n,a){a=a!=null?a.concat([e]):null,co(4,4,Lf.bind(null,n,e),a)}function Uc(){}function Ff(e,n){var a=re();n=n===void 0?null:n;var c=a.memoizedState;return n!==null&&Dc(n,c[1])?c[0]:(a.memoizedState=[e,n],e)}function zf(e,n){var a=re();n=n===void 0?null:n;var c=a.memoizedState;if(n!==null&&Dc(n,c[1]))return c[0];if(c=e(),Kn){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[c,n],c}function Ic(e,n,a){return a===void 0||(Vi&1073741824)!==0&&(_t&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=jm(),vt.lanes|=e,vn|=e,a)}function jf(e,n,a,c){return Ke(a,n)?a:Ds.current!==null?(e=Ic(e,a,c),Ke(e,n)||(ue=!0),e):(Vi&42)===0||(Vi&1073741824)!==0&&(_t&261930)===0?(ue=!0,e.memoizedState=a):(e=jm(),vt.lanes|=e,vn|=e,n)}function Pf(e,n,a,c,m){var p=I.p;I.p=p!==0&&8>p?p:8;var v=O.T,E={};O.T=E,Vc(e,!1,n,a);try{var D=m(),P=O.S;if(P!==null&&P(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var V=ty(D,c);za(e,n,V,ei(e))}else za(e,n,c,ei(e))}catch(q){za(e,n,{then:function(){},status:"rejected",reason:q},ei())}finally{I.p=p,v!==null&&E.types!==null&&(v.types=E.types),O.T=v}}function ry(){}function Hc(e,n,a,c){if(e.tag!==5)throw Error(s(476));var m=Uf(e).queue;Pf(e,m,n,Q,a===null?ry:function(){return If(e),a(c)})}function Uf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:Q},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function If(e){var n=Uf(e);n.next===null&&(n=e.alternate.memoizedState),za(e,n.next.queue,{},ei())}function Gc(){return Ee(tr)}function Hf(){return re().memoizedState}function Gf(){return re().memoizedState}function oy(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=ei();e=fn(a);var c=mn(n,e,a);c!==null&&(Ie(c,n,a),Oa(c,n,a)),n={cache:yc()},e.payload=n;return}n=n.return}}function ly(e,n,a){var c=ei();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},uo(e)?Yf(n,a):(a=oc(e,n,a,c),a!==null&&(Ie(a,e,c),Xf(a,n,c)))}function Vf(e,n,a){var c=ei();za(e,n,a,c)}function za(e,n,a,c){var m={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(uo(e))Yf(n,m);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var v=n.lastRenderedState,E=p(v,a);if(m.hasEagerState=!0,m.eagerState=E,Ke(E,v))return Vr(e,n,m,0),Xt===null&&Gr(),!1}catch{}if(a=oc(e,n,m,c),a!==null)return Ie(a,e,c),Xf(a,n,c),!0}return!1}function Vc(e,n,a,c){if(c={lane:2,revertLane:xu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},uo(e)){if(n)throw Error(s(479))}else n=oc(e,a,c,2),n!==null&&Ie(n,e,2)}function uo(e){var n=e.alternate;return e===vt||n!==null&&n===vt}function Yf(e,n){Ns=no=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Xf(e,n,a){if((a&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Wh(e,a)}}var ja={readContext:Ee,use:ro,useCallback:ie,useContext:ie,useEffect:ie,useImperativeHandle:ie,useLayoutEffect:ie,useInsertionEffect:ie,useMemo:ie,useReducer:ie,useRef:ie,useState:ie,useDebugValue:ie,useDeferredValue:ie,useTransition:ie,useSyncExternalStore:ie,useId:ie,useHostTransitionStatus:ie,useFormState:ie,useActionState:ie,useOptimistic:ie,useMemoCache:ie,useCacheRefresh:ie};ja.useEffectEvent=ie;var qf={readContext:Ee,use:ro,useCallback:function(e,n){return Oe().memoizedState=[e,n===void 0?null:n],e},useContext:Ee,useEffect:Nf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,lo(4194308,4,Lf.bind(null,n,e),a)},useLayoutEffect:function(e,n){return lo(4194308,4,e,n)},useInsertionEffect:function(e,n){lo(4,2,e,n)},useMemo:function(e,n){var a=Oe();n=n===void 0?null:n;var c=e();if(Kn){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[c,n],c},useReducer:function(e,n,a){var c=Oe();if(a!==void 0){var m=a(n);if(Kn){an(!0);try{a(n)}finally{an(!1)}}}else m=n;return c.memoizedState=c.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},c.queue=e,e=e.dispatch=ly.bind(null,vt,e),[c.memoizedState,e]},useRef:function(e){var n=Oe();return e={current:e},n.memoizedState=e},useState:function(e){e=zc(e);var n=e.queue,a=Vf.bind(null,vt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Uc,useDeferredValue:function(e,n){var a=Oe();return Ic(a,e,n)},useTransition:function(){var e=zc(!1);return e=Pf.bind(null,vt,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var c=vt,m=Oe();if(Dt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Xt===null)throw Error(s(349));(_t&127)!==0||mf(c,n,a)}m.memoizedState=a;var p={value:a,getSnapshot:n};return m.queue=p,Nf(pf.bind(null,c,p,e),[e]),c.flags|=2048,Os(9,{destroy:void 0},gf.bind(null,c,p,a,n),null),a},useId:function(){var e=Oe(),n=Xt.identifierPrefix;if(Dt){var a=Ci,c=Ti;a=(c&~(1<<32-$e(c)-1)).toString(32)+a,n="_"+n+"R_"+a,a=so++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=ey++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Gc,useFormState:Tf,useActionState:Tf,useOptimistic:function(e){var n=Oe();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Vc.bind(null,vt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Lc,useCacheRefresh:function(){return Oe().memoizedState=oy.bind(null,vt)},useEffectEvent:function(e){var n=Oe(),a={impl:e};return n.memoizedState=a,function(){if((kt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Yc={readContext:Ee,use:ro,useCallback:Ff,useContext:Ee,useEffect:Pc,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:kf,useMemo:zf,useReducer:oo,useRef:Df,useState:function(){return oo(Yi)},useDebugValue:Uc,useDeferredValue:function(e,n){var a=re();return jf(a,Ht.memoizedState,e,n)},useTransition:function(){var e=oo(Yi)[0],n=re().memoizedState;return[typeof e=="boolean"?e:Fa(e),n]},useSyncExternalStore:ff,useId:Hf,useHostTransitionStatus:Gc,useFormState:Cf,useActionState:Cf,useOptimistic:function(e,n){var a=re();return vf(a,Ht,e,n)},useMemoCache:Lc,useCacheRefresh:Gf};Yc.useEffectEvent=Rf;var $f={readContext:Ee,use:ro,useCallback:Ff,useContext:Ee,useEffect:Pc,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:kf,useMemo:zf,useReducer:Fc,useRef:Df,useState:function(){return Fc(Yi)},useDebugValue:Uc,useDeferredValue:function(e,n){var a=re();return Ht===null?Ic(a,e,n):jf(a,Ht.memoizedState,e,n)},useTransition:function(){var e=Fc(Yi)[0],n=re().memoizedState;return[typeof e=="boolean"?e:Fa(e),n]},useSyncExternalStore:ff,useId:Hf,useHostTransitionStatus:Gc,useFormState:Mf,useActionState:Mf,useOptimistic:function(e,n){var a=re();return Ht!==null?vf(a,Ht,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Lc,useCacheRefresh:Gf};$f.useEffectEvent=Rf;function Xc(e,n,a,c){n=e.memoizedState,a=a(c,n),a=a==null?n:b({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var qc={enqueueSetState:function(e,n,a){e=e._reactInternals;var c=ei(),m=fn(c);m.payload=n,a!=null&&(m.callback=a),n=mn(e,m,c),n!==null&&(Ie(n,e,c),Oa(n,e,c))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var c=ei(),m=fn(c);m.tag=1,m.payload=n,a!=null&&(m.callback=a),n=mn(e,m,c),n!==null&&(Ie(n,e,c),Oa(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=ei(),c=fn(a);c.tag=2,n!=null&&(c.callback=n),n=mn(e,c,a),n!==null&&(Ie(n,e,a),Oa(n,e,a))}};function Kf(e,n,a,c,m,p,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,p,v):n.prototype&&n.prototype.isPureReactComponent?!Ea(a,c)||!Ea(m,p):!0}function Wf(e,n,a,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,c),n.state!==e&&qc.enqueueReplaceState(n,n.state,null)}function Wn(e,n){var a=n;if("ref"in n){a={};for(var c in n)c!=="ref"&&(a[c]=n[c])}if(e=e.defaultProps){a===n&&(a=b({},a));for(var m in e)a[m]===void 0&&(a[m]=e[m])}return a}function Qf(e){Hr(e)}function Zf(e){console.error(e)}function Jf(e){Hr(e)}function ho(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function tm(e,n,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $c(e,n,a){return a=fn(a),a.tag=3,a.payload={element:null},a.callback=function(){ho(e,n)},a}function em(e){return e=fn(e),e.tag=3,e}function im(e,n,a,c){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;e.payload=function(){return m(p)},e.callback=function(){tm(n,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){tm(n,a,c),typeof m!="function"&&(An===null?An=new Set([this]):An.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function cy(e,n,a,c,m){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=a.alternate,n!==null&&Es(n,a,m,!0),a=Qe.current,a!==null){switch(a.tag){case 31:case 13:return mi===null?Eo():a.alternate===null&&ne===0&&(ne=3),a.flags&=-257,a.flags|=65536,a.lanes=m,c===Zr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([c]):n.add(c),vu(e,c,m)),!1;case 22:return a.flags|=65536,c===Zr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([c]):a.add(c)),vu(e,c,m)),!1}throw Error(s(435,a.tag))}return vu(e,c,m),Eo(),!1}if(Dt)return n=Qe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,c!==fc&&(e=Error(s(422),{cause:c}),_a(ui(e,a)))):(c!==fc&&(n=Error(s(423),{cause:c}),_a(ui(n,a))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,c=ui(c,a),m=$c(e.stateNode,c,m),Ec(e,m),ne!==4&&(ne=2)),!1;var p=Error(s(520),{cause:c});if(p=ui(p,a),Xa===null?Xa=[p]:Xa.push(p),ne!==4&&(ne=2),n===null)return!0;c=ui(c,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=m&-m,a.lanes|=e,e=$c(a.stateNode,c,e),Ec(a,e),!1;case 1:if(n=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(An===null||!An.has(p))))return a.flags|=65536,m&=-m,a.lanes|=m,m=em(m),im(m,e,a,c),Ec(a,m),!1}a=a.return}while(a!==null);return!1}var Kc=Error(s(461)),ue=!1;function Te(e,n,a,c){n.child=e===null?rf(n,null,a,c):$n(n,e.child,a,c)}function nm(e,n,a,c,m){a=a.render;var p=n.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return Vn(n),c=Nc(e,n,a,v,p,m),E=Rc(),e!==null&&!ue?(Oc(e,n,m),Xi(e,n,m)):(Dt&&E&&hc(n),n.flags|=1,Te(e,n,c,m),n.child)}function sm(e,n,a,c,m){if(e===null){var p=a.type;return typeof p=="function"&&!lc(p)&&p.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=p,am(e,n,p,c,m)):(e=Xr(a.type,null,c,n,n.mode,m),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!nu(e,m)){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(v,c)&&e.ref===n.ref)return Xi(e,n,m)}return n.flags|=1,e=Ui(p,c),e.ref=n.ref,e.return=n,n.child=e}function am(e,n,a,c,m){if(e!==null){var p=e.memoizedProps;if(Ea(p,c)&&e.ref===n.ref)if(ue=!1,n.pendingProps=c=p,nu(e,m))(e.flags&131072)!==0&&(ue=!0);else return n.lanes=e.lanes,Xi(e,n,m)}return Wc(e,n,a,c,m)}function rm(e,n,a,c){var m=c.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(c=n.child=e.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,n.child=null;return om(e,n,p,a,c)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wr(n,p!==null?p.cachePool:null),p!==null?cf(n,p):Cc(),uf(n);else return c=n.lanes=536870912,om(e,n,p!==null?p.baseLanes|a:a,a,c)}else p!==null?(Wr(n,p.cachePool),cf(n,p),pn(),n.memoizedState=null):(e!==null&&Wr(n,null),Cc(),pn());return Te(e,n,m,a),n.child}function Pa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function om(e,n,a,c,m){var p=Ac();return p=p===null?null:{parent:le._currentValue,pool:p},n.memoizedState={baseLanes:a,cachePool:p},e!==null&&Wr(n,null),Cc(),uf(n),e!==null&&Es(e,n,c,!0),n.childLanes=m,null}function fo(e,n){return n=go({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function lm(e,n,a){return $n(n,e.child,null,a),e=fo(n,n.pendingProps),e.flags|=2,Ze(n),n.memoizedState=null,e}function uy(e,n,a){var c=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Dt){if(c.mode==="hidden")return e=fo(n,c),n.lanes=536870912,Pa(null,e);if(Mc(n),(e=$t)?(e=Ag(e,fi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:Ti,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Vd(e),a.return=n,n.child=a,Se=n,$t=null)):e=null,e===null)throw un(n);return n.lanes=536870912,null}return fo(n,c)}var p=e.memoizedState;if(p!==null){var v=p.dehydrated;if(Mc(n),m)if(n.flags&256)n.flags&=-257,n=lm(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(ue||Es(e,n,a,!1),m=(a&e.childLanes)!==0,ue||m){if(c=Xt,c!==null&&(v=Qh(c,a),v!==0&&v!==p.retryLane))throw p.retryLane=v,Un(e,v),Ie(c,e,v),Kc;Eo(),n=lm(e,n,a)}else e=p.treeContext,$t=gi(v.nextSibling),Se=n,Dt=!0,cn=null,fi=!1,e!==null&&qd(n,e),n=fo(n,c),n.flags|=4096;return n}return e=Ui(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function mo(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Wc(e,n,a,c,m){return Vn(n),a=Nc(e,n,a,c,void 0,m),c=Rc(),e!==null&&!ue?(Oc(e,n,m),Xi(e,n,m)):(Dt&&c&&hc(n),n.flags|=1,Te(e,n,a,m),n.child)}function cm(e,n,a,c,m,p){return Vn(n),n.updateQueue=null,a=df(n,c,a,m),hf(e),c=Rc(),e!==null&&!ue?(Oc(e,n,p),Xi(e,n,p)):(Dt&&c&&hc(n),n.flags|=1,Te(e,n,a,p),n.child)}function um(e,n,a,c,m){if(Vn(n),n.stateNode===null){var p=As,v=a.contextType;typeof v=="object"&&v!==null&&(p=Ee(v)),p=new a(c,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=qc,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=c,p.state=n.memoizedState,p.refs={},xc(n),v=a.contextType,p.context=typeof v=="object"&&v!==null?Ee(v):As,p.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Xc(n,a,v,c),p.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&qc.enqueueReplaceState(p,p.state,null),La(n,c,p,m),ka(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){p=n.stateNode;var E=n.memoizedProps,D=Wn(a,E);p.props=D;var P=p.context,V=a.contextType;v=As,typeof V=="object"&&V!==null&&(v=Ee(V));var q=a.getDerivedStateFromProps;V=typeof q=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,V||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||P!==v)&&Wf(n,p,c,v),dn=!1;var U=n.memoizedState;p.state=U,La(n,c,p,m),ka(),P=n.memoizedState,E||U!==P||dn?(typeof q=="function"&&(Xc(n,a,q,c),P=n.memoizedState),(D=dn||Kf(n,a,D,c,U,P,v))?(V||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=P),p.props=c,p.state=P,p.context=v,c=D):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{p=n.stateNode,Sc(e,n),v=n.memoizedProps,V=Wn(a,v),p.props=V,q=n.pendingProps,U=p.context,P=a.contextType,D=As,typeof P=="object"&&P!==null&&(D=Ee(P)),E=a.getDerivedStateFromProps,(P=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==q||U!==D)&&Wf(n,p,c,D),dn=!1,U=n.memoizedState,p.state=U,La(n,c,p,m),ka();var G=n.memoizedState;v!==q||U!==G||dn||e!==null&&e.dependencies!==null&&$r(e.dependencies)?(typeof E=="function"&&(Xc(n,a,E,c),G=n.memoizedState),(V=dn||Kf(n,a,V,c,U,G,D)||e!==null&&e.dependencies!==null&&$r(e.dependencies))?(P||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,G,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,G,D)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=G),p.props=c,p.state=G,p.context=D,c=V):(typeof p.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),c=!1)}return p=c,mo(e,n),c=(n.flags&128)!==0,p||c?(p=n.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&c?(n.child=$n(n,e.child,null,m),n.child=$n(n,null,a,m)):Te(e,n,a,m),n.memoizedState=p.state,e=n.child):e=Xi(e,n,m),e}function hm(e,n,a,c){return Hn(),n.flags|=256,Te(e,n,a,c),n.child}var Qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zc(e){return{baseLanes:e,cachePool:Jd()}}function Jc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=ti),e}function dm(e,n,a){var c=n.pendingProps,m=!1,p=(n.flags&128)!==0,v;if((v=p)||(v=e!==null&&e.memoizedState===null?!1:(ae.current&2)!==0),v&&(m=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Dt){if(m?gn(n):pn(),(e=$t)?(e=Ag(e,fi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:Ti,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Vd(e),a.return=n,n.child=a,Se=n,$t=null)):e=null,e===null)throw un(n);return Bu(e)?n.lanes=32:n.lanes=536870912,null}var E=c.children;return c=c.fallback,m?(pn(),m=n.mode,E=go({mode:"hidden",children:E},m),c=In(c,m,a,null),E.return=n,c.return=n,E.sibling=c,n.child=E,c=n.child,c.memoizedState=Zc(a),c.childLanes=Jc(e,v,a),n.memoizedState=Qc,Pa(null,c)):(gn(n),tu(n,E))}var D=e.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(p)n.flags&256?(gn(n),n.flags&=-257,n=eu(e,n,a)):n.memoizedState!==null?(pn(),n.child=e.child,n.flags|=128,n=null):(pn(),E=c.fallback,m=n.mode,c=go({mode:"visible",children:c.children},m),E=In(E,m,a,null),E.flags|=2,c.return=n,E.return=n,c.sibling=E,n.child=c,$n(n,e.child,null,a),c=n.child,c.memoizedState=Zc(a),c.childLanes=Jc(e,v,a),n.memoizedState=Qc,n=Pa(null,c));else if(gn(n),Bu(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var P=v.dgst;v=P,c=Error(s(419)),c.stack="",c.digest=v,_a({value:c,source:null,stack:null}),n=eu(e,n,a)}else if(ue||Es(e,n,a,!1),v=(a&e.childLanes)!==0,ue||v){if(v=Xt,v!==null&&(c=Qh(v,a),c!==0&&c!==D.retryLane))throw D.retryLane=c,Un(e,c),Ie(v,e,c),Kc;Lu(E)||Eo(),n=eu(e,n,a)}else Lu(E)?(n.flags|=192,n.child=e.child,n=null):(e=D.treeContext,$t=gi(E.nextSibling),Se=n,Dt=!0,cn=null,fi=!1,e!==null&&qd(n,e),n=tu(n,c.children),n.flags|=4096);return n}return m?(pn(),E=c.fallback,m=n.mode,D=e.child,P=D.sibling,c=Ui(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,P!==null?E=Ui(P,E):(E=In(E,m,a,null),E.flags|=2),E.return=n,c.return=n,c.sibling=E,n.child=c,Pa(null,c),c=n.child,E=e.child.memoizedState,E===null?E=Zc(a):(m=E.cachePool,m!==null?(D=le._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=Jd(),E={baseLanes:E.baseLanes|a,cachePool:m}),c.memoizedState=E,c.childLanes=Jc(e,v,a),n.memoizedState=Qc,Pa(e.child,c)):(gn(n),a=e.child,e=a.sibling,a=Ui(a,{mode:"visible",children:c.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function tu(e,n){return n=go({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function go(e,n){return e=We(22,e,null,n),e.lanes=0,e}function eu(e,n,a){return $n(n,e.child,null,a),e=tu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function fm(e,n,a){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),pc(e.return,n,a)}function iu(e,n,a,c,m,p){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:m,treeForkCount:p}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=m,v.treeForkCount=p)}function mm(e,n,a){var c=n.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var v=ae.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,K(ae,v),Te(e,n,c,a),c=Dt?Ca:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fm(e,a,n);else if(e.tag===19)fm(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(a=n.child,m=null;a!==null;)e=a.alternate,e!==null&&io(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=n.child,n.child=null):(m=a.sibling,a.sibling=null),iu(n,!1,m,a,p,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=n.child,n.child=null;m!==null;){if(e=m.alternate,e!==null&&io(e)===null){n.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}iu(n,!0,a,null,p,c);break;case"together":iu(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Xi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),vn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Es(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ui(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ui(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function nu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&$r(e)))}function hy(e,n,a){switch(n.tag){case 3:qt(n,n.stateNode.containerInfo),hn(n,le,e.memoizedState.cache),Hn();break;case 27:case 5:rt(n);break;case 4:qt(n,n.stateNode.containerInfo);break;case 10:hn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Mc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(gn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?dm(e,n,a):(gn(n),e=Xi(e,n,a),e!==null?e.sibling:null);gn(n);break;case 19:var m=(e.flags&128)!==0;if(c=(a&n.childLanes)!==0,c||(Es(e,n,a,!1),c=(a&n.childLanes)!==0),m){if(c)return mm(e,n,a);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),K(ae,ae.current),c)break;return null;case 22:return n.lanes=0,rm(e,n,a,n.pendingProps);case 24:hn(n,le,e.memoizedState.cache)}return Xi(e,n,a)}function gm(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ue=!0;else{if(!nu(e,a)&&(n.flags&128)===0)return ue=!1,hy(e,n,a);ue=(e.flags&131072)!==0}else ue=!1,Dt&&(n.flags&1048576)!==0&&Xd(n,Ca,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(e=Xn(n.elementType),n.type=e,typeof e=="function")lc(e)?(c=Wn(e,c),n.tag=1,n=um(null,n,e,c,a)):(n.tag=0,n=Wc(null,n,e,c,a));else{if(e!=null){var m=e.$$typeof;if(m===B){n.tag=11,n=nm(null,n,e,c,a);break t}else if(m===z){n.tag=14,n=sm(null,n,e,c,a);break t}}throw n=ht(e)||e,Error(s(306,n,""))}}return n;case 0:return Wc(e,n,n.type,n.pendingProps,a);case 1:return c=n.type,m=Wn(c,n.pendingProps),um(e,n,c,m,a);case 3:t:{if(qt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var p=n.memoizedState;m=p.element,Sc(e,n),La(n,c,null,a);var v=n.memoizedState;if(c=v.cache,hn(n,le,c),c!==p.cache&&bc(n,[le],a,!0),ka(),c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=hm(e,n,c,a);break t}else if(c!==m){m=ui(Error(s(424)),n),_a(m),n=hm(e,n,c,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,$t=gi(e.firstChild),Se=n,Dt=!0,cn=null,fi=!0,a=rf(n,null,c,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Hn(),c===m){n=Xi(e,n,a);break t}Te(e,n,c,a)}n=n.child}return n;case 26:return mo(e,n),e===null?(a=Cg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Dt||(a=n.type,e=n.pendingProps,c=Ro(ft.current).createElement(a),c[xe]=n,c[Be]=e,Ce(c,a,e),ye(c),n.stateNode=c):n.memoizedState=Cg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return rt(n),e===null&&Dt&&(c=n.stateNode=Sg(n.type,n.pendingProps,ft.current),Se=n,fi=!0,m=$t,En(n.type)?(Fu=m,$t=gi(c.firstChild)):$t=m),Te(e,n,n.pendingProps.children,a),mo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Dt&&((m=c=$t)&&(c=Iy(c,n.type,n.pendingProps,fi),c!==null?(n.stateNode=c,Se=n,$t=gi(c.firstChild),fi=!1,m=!0):m=!1),m||un(n)),rt(n),m=n.type,p=n.pendingProps,v=e!==null?e.memoizedProps:null,c=p.children,Ru(m,p)?c=null:v!==null&&Ru(m,v)&&(n.flags|=32),n.memoizedState!==null&&(m=Nc(e,n,iy,null,null,a),tr._currentValue=m),mo(e,n),Te(e,n,c,a),n.child;case 6:return e===null&&Dt&&((e=a=$t)&&(a=Hy(a,n.pendingProps,fi),a!==null?(n.stateNode=a,Se=n,$t=null,e=!0):e=!1),e||un(n)),null;case 13:return dm(e,n,a);case 4:return qt(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=$n(n,null,c,a):Te(e,n,c,a),n.child;case 11:return nm(e,n,n.type,n.pendingProps,a);case 7:return Te(e,n,n.pendingProps,a),n.child;case 8:return Te(e,n,n.pendingProps.children,a),n.child;case 12:return Te(e,n,n.pendingProps.children,a),n.child;case 10:return c=n.pendingProps,hn(n,n.type,c.value),Te(e,n,c.children,a),n.child;case 9:return m=n.type._context,c=n.pendingProps.children,Vn(n),m=Ee(m),c=c(m),n.flags|=1,Te(e,n,c,a),n.child;case 14:return sm(e,n,n.type,n.pendingProps,a);case 15:return am(e,n,n.type,n.pendingProps,a);case 19:return mm(e,n,a);case 31:return uy(e,n,a);case 22:return rm(e,n,a,n.pendingProps);case 24:return Vn(n),c=Ee(le),e===null?(m=Ac(),m===null&&(m=Xt,p=yc(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=a),m=p),n.memoizedState={parent:c,cache:m},xc(n),hn(n,le,m)):((e.lanes&a)!==0&&(Sc(e,n),La(n,null,null,a),ka()),m=e.memoizedState,p=n.memoizedState,m.parent!==c?(m={parent:c,cache:c},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),hn(n,le,c)):(c=p.cache,hn(n,le,c),c!==m.cache&&bc(n,[le],a,!0))),Te(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function su(e,n,a,c,m){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(Hm())e.flags|=8192;else throw qn=Zr,wc}else e.flags&=-16777217}function pm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rg(n))if(Hm())e.flags|=8192;else throw qn=Zr,wc}function po(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?$h():536870912,e.lanes|=n,Fs|=n)}function Ua(e,n){if(!Dt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Kt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(n)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=c,e.childLanes=a,n}function dy(e,n,a){var c=n.pendingProps;switch(dc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(n),null;case 1:return Kt(n),null;case 3:return a=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Gi(le),J(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ss(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mc())),Kt(n),null;case 26:var m=n.type,p=n.memoizedState;return e===null?(qi(n),p!==null?(Kt(n),pm(n,p)):(Kt(n),su(n,m,null,c,a))):p?p!==e.memoizedState?(qi(n),Kt(n),pm(n,p)):(Kt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&qi(n),Kt(n),su(n,m,e,c,a)),null;case 27:if(It(n),a=ft.current,m=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&qi(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}e=tt.current,Ss(n)?$d(n):(e=Sg(m,c,a),n.stateNode=e,qi(n))}return Kt(n),null;case 5:if(It(n),m=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&qi(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}if(p=tt.current,Ss(n))$d(n);else{var v=Ro(ft.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?v.createElement(m,{is:c.is}):v.createElement(m)}}p[xe]=n,p[Be]=c;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=p;t:switch(Ce(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&qi(n)}}return Kt(n),su(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&qi(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=ft.current,Ss(n)){if(e=n.stateNode,a=n.memoizedProps,c=null,m=Se,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}e[xe]=n,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||dg(e.nodeValue,a)),e||un(n,!0)}else e=Ro(e).createTextNode(c),e[xe]=n,n.stateNode=e}return Kt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(c=Ss(n),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[xe]=n}else Hn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),e=!1}else a=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ze(n),n):(Ze(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Kt(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Ss(n),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(s(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[xe]=n}else Hn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),m=!1}else m=mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Ze(n),n):(Ze(n),null)}return Ze(n),(n.flags&128)!==0?(n.lanes=a,n):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=n.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),po(n,n.updateQueue),Kt(n),null);case 4:return J(),e===null&&Cu(n.stateNode.containerInfo),Kt(n),null;case 10:return Gi(n.type),Kt(n),null;case 19:if(H(ae),c=n.memoizedState,c===null)return Kt(n),null;if(m=(n.flags&128)!==0,p=c.rendering,p===null)if(m)Ua(c,!1);else{if(ne!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=io(e),p!==null){for(n.flags|=128,Ua(c,!1),e=p.updateQueue,n.updateQueue=e,po(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Gd(a,e),a=a.sibling;return K(ae,ae.current&1|2),Dt&&Ii(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&Xe()>wo&&(n.flags|=128,m=!0,Ua(c,!1),n.lanes=4194304)}else{if(!m)if(e=io(p),e!==null){if(n.flags|=128,m=!0,e=e.updateQueue,n.updateQueue=e,po(n,e),Ua(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Dt)return Kt(n),null}else 2*Xe()-c.renderingStartTime>wo&&a!==536870912&&(n.flags|=128,m=!0,Ua(c,!1),n.lanes=4194304);c.isBackwards?(p.sibling=n.child,n.child=p):(e=c.last,e!==null?e.sibling=p:n.child=p,c.last=p)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Xe(),e.sibling=null,a=ae.current,K(ae,m?a&1|2:a&1),Dt&&Ii(n,c.treeForkCount),e):(Kt(n),null);case 22:case 23:return Ze(n),_c(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(a&536870912)!==0&&(n.flags&128)===0&&(Kt(n),n.subtreeFlags&6&&(n.flags|=8192)):Kt(n),a=n.updateQueue,a!==null&&po(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==a&&(n.flags|=2048),e!==null&&H(Yn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Gi(le),Kt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function fy(e,n){switch(dc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gi(le),J(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return It(n),null;case 31:if(n.memoizedState!==null){if(Ze(n),n.alternate===null)throw Error(s(340));Hn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ze(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Hn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(ae),null;case 4:return J(),null;case 10:return Gi(n.type),null;case 22:case 23:return Ze(n),_c(),e!==null&&H(Yn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Gi(le),null;case 25:return null;default:return null}}function bm(e,n){switch(dc(n),n.tag){case 3:Gi(le),J();break;case 26:case 27:case 5:It(n);break;case 4:J();break;case 31:n.memoizedState!==null&&Ze(n);break;case 13:Ze(n);break;case 19:H(ae);break;case 10:Gi(n.type);break;case 22:case 23:Ze(n),_c(),e!==null&&H(Yn);break;case 24:Gi(le)}}function Ia(e,n){try{var a=n.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var m=c.next;a=m;do{if((a.tag&e)===e){c=void 0;var p=a.create,v=a.inst;c=p(),v.destroy=c}a=a.next}while(a!==m)}}catch(E){Ut(n,n.return,E)}}function bn(e,n,a){try{var c=n.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&e)===e){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,m=n;var D=a,P=E;try{P()}catch(V){Ut(m,D,V)}}}c=c.next}while(c!==p)}}catch(V){Ut(n,n.return,V)}}function ym(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{lf(n,a)}catch(c){Ut(e,e.return,c)}}}function vm(e,n,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Ut(e,n,c)}}function Ha(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(m){Ut(e,n,m)}}function _i(e,n){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(m){Ut(e,n,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){Ut(e,n,m)}else a.current=null}function Am(e){var n=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(m){Ut(e,e.return,m)}}function au(e,n,a){try{var c=e.stateNode;By(c,e.type,a,n),c[Be]=n}catch(m){Ut(e,e.return,m)}}function wm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&En(e.type)||e.tag===4}function ru(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&En(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ou(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ji));else if(c!==4&&(c===27&&En(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ou(e,n,a),e=e.sibling;e!==null;)ou(e,n,a),e=e.sibling}function bo(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(c!==4&&(c===27&&En(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(bo(e,n,a),e=e.sibling;e!==null;)bo(e,n,a),e=e.sibling}function xm(e){var n=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);Ce(n,c,a),n[xe]=e,n[Be]=a}catch(p){Ut(e,e.return,p)}}var $i=!1,he=!1,lu=!1,Sm=typeof WeakSet=="function"?WeakSet:Set,ve=null;function my(e,n){if(e=e.containerInfo,Du=jo,e=Ld(e),ec(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var v=0,E=-1,D=-1,P=0,V=0,q=e,U=null;e:for(;;){for(var G;q!==a||m!==0&&q.nodeType!==3||(E=v+m),q!==p||c!==0&&q.nodeType!==3||(D=v+c),q.nodeType===3&&(v+=q.nodeValue.length),(G=q.firstChild)!==null;)U=q,q=G;for(;;){if(q===e)break e;if(U===a&&++P===m&&(E=v),U===p&&++V===c&&(D=v),(G=q.nextSibling)!==null)break;q=U,U=q.parentNode}q=G}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nu={focusedElem:e,selectionRange:a},jo=!1,ve=n;ve!==null;)if(n=ve,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ve=e;else for(;ve!==null;){switch(n=ve,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)m=e[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=n,m=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var nt=Wn(a.type,m);e=c.getSnapshotBeforeUpdate(nt,p),c.__reactInternalSnapshotBeforeUpdate=e}catch(dt){Ut(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)ku(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ku(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ve=e;break}ve=n.return}}function Em(e,n,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(e,a),c&4&&Ia(5,a);break;case 1:if(Wi(e,a),c&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Ut(a,a.return,v)}else{var m=Wn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(m,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ut(a,a.return,v)}}c&64&&ym(a),c&512&&Ha(a,a.return);break;case 3:if(Wi(e,a),c&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{lf(e,n)}catch(v){Ut(a,a.return,v)}}break;case 27:n===null&&c&4&&xm(a);case 26:case 5:Wi(e,a),n===null&&c&4&&Am(a),c&512&&Ha(a,a.return);break;case 12:Wi(e,a);break;case 31:Wi(e,a),c&4&&_m(e,a);break;case 13:Wi(e,a),c&4&&Mm(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Sy.bind(null,a),Gy(e,a))));break;case 22:if(c=a.memoizedState!==null||$i,!c){n=n!==null&&n.memoizedState!==null||he,m=$i;var p=he;$i=c,(he=n)&&!p?Qi(e,a,(a.subtreeFlags&8772)!==0):Wi(e,a),$i=m,he=p}break;case 30:break;default:Wi(e,a)}}function Tm(e){var n=e.alternate;n!==null&&(e.alternate=null,Tm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&jl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,ze=!1;function Ki(e,n,a){for(a=a.child;a!==null;)Cm(e,n,a),a=a.sibling}function Cm(e,n,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(da,a)}catch{}switch(a.tag){case 26:he||_i(a,n),Ki(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:he||_i(a,n);var c=Wt,m=ze;En(a.type)&&(Wt=a.stateNode,ze=!1),Ki(e,n,a),Qa(a.stateNode),Wt=c,ze=m;break;case 5:he||_i(a,n);case 6:if(c=Wt,m=ze,Wt=null,Ki(e,n,a),Wt=c,ze=m,Wt!==null)if(ze)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(a.stateNode)}catch(p){Ut(a,n,p)}else try{Wt.removeChild(a.stateNode)}catch(p){Ut(a,n,p)}break;case 18:Wt!==null&&(ze?(e=Wt,yg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Vs(e)):yg(Wt,a.stateNode));break;case 4:c=Wt,m=ze,Wt=a.stateNode.containerInfo,ze=!0,Ki(e,n,a),Wt=c,ze=m;break;case 0:case 11:case 14:case 15:bn(2,a,n),he||bn(4,a,n),Ki(e,n,a);break;case 1:he||(_i(a,n),c=a.stateNode,typeof c.componentWillUnmount=="function"&&vm(a,n,c)),Ki(e,n,a);break;case 21:Ki(e,n,a);break;case 22:he=(c=he)||a.memoizedState!==null,Ki(e,n,a),he=c;break;default:Ki(e,n,a)}}function _m(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(a){Ut(n,n.return,a)}}}function Mm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(a){Ut(n,n.return,a)}}function gy(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Sm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Sm),n;default:throw Error(s(435,e.tag))}}function yo(e,n){var a=gy(e);n.forEach(function(c){if(!a.has(c)){a.add(c);var m=Ey.bind(null,e,c);c.then(m,m)}})}function je(e,n){var a=n.deletions;if(a!==null)for(var c=0;c<a.length;c++){var m=a[c],p=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(En(E.type)){Wt=E.stateNode,ze=!1;break t}break;case 5:Wt=E.stateNode,ze=!1;break t;case 3:case 4:Wt=E.stateNode.containerInfo,ze=!0;break t}E=E.return}if(Wt===null)throw Error(s(160));Cm(p,v,m),Wt=null,ze=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Dm(n,e),n=n.sibling}var xi=null;function Dm(e,n){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:je(n,e),Pe(e),c&4&&(bn(3,e,e.return),Ia(3,e),bn(5,e,e.return));break;case 1:je(n,e),Pe(e),c&512&&(he||a===null||_i(a,a.return)),c&64&&$i&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var m=xi;if(je(n,e),Pe(e),c&512&&(he||a===null||_i(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[ga]||p[xe]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),Ce(p,c,a),p[xe]=e,ye(p),c=p;break t;case"link":var v=Dg("link","href",m).get(c+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(p=v[E],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}p=m.createElement(c),Ce(p,c,a),m.head.appendChild(p);break;case"meta":if(v=Dg("meta","content",m).get(c+(a.content||""))){for(E=0;E<v.length;E++)if(p=v[E],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}p=m.createElement(c),Ce(p,c,a),m.head.appendChild(p);break;default:throw Error(s(468,c))}p[xe]=e,ye(p),c=p}e.stateNode=c}else Ng(m,e.type,e.stateNode);else e.stateNode=Mg(m,c,e.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?Ng(m,e.type,e.stateNode):Mg(m,c,e.memoizedProps)):c===null&&e.stateNode!==null&&au(e,e.memoizedProps,a.memoizedProps)}break;case 27:je(n,e),Pe(e),c&512&&(he||a===null||_i(a,a.return)),a!==null&&c&4&&au(e,e.memoizedProps,a.memoizedProps);break;case 5:if(je(n,e),Pe(e),c&512&&(he||a===null||_i(a,a.return)),e.flags&32){m=e.stateNode;try{fs(m,"")}catch(nt){Ut(e,e.return,nt)}}c&4&&e.stateNode!=null&&(m=e.memoizedProps,au(e,m,a!==null?a.memoizedProps:m)),c&1024&&(lu=!0);break;case 6:if(je(n,e),Pe(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(nt){Ut(e,e.return,nt)}}break;case 3:if(Lo=null,m=xi,xi=Oo(n.containerInfo),je(n,e),xi=m,Pe(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Vs(n.containerInfo)}catch(nt){Ut(e,e.return,nt)}lu&&(lu=!1,Nm(e));break;case 4:c=xi,xi=Oo(e.stateNode.containerInfo),je(n,e),Pe(e),xi=c;break;case 12:je(n,e),Pe(e);break;case 31:je(n,e),Pe(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,yo(e,c)));break;case 13:je(n,e),Pe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ao=Xe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,yo(e,c)));break;case 22:m=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,P=$i,V=he;if($i=P||m,he=V||D,je(n,e),he=V,$i=P,Pe(e),c&8192)t:for(n=e.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(a===null||D||$i||he||Qn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(p=D.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=D.stateNode;var q=D.memoizedProps.style,U=q!=null&&q.hasOwnProperty("display")?q.display:null;E.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(nt){Ut(D,D.return,nt)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(nt){Ut(D,D.return,nt)}}}else if(n.tag===18){if(a===null){D=n;try{var G=D.stateNode;m?vg(G,!0):vg(D.stateNode,!1)}catch(nt){Ut(D,D.return,nt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,yo(e,a))));break;case 19:je(n,e),Pe(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,yo(e,c)));break;case 30:break;case 21:break;default:je(n,e),Pe(e)}}function Pe(e){var n=e.flags;if(n&2){try{for(var a,c=e.return;c!==null;){if(wm(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var m=a.stateNode,p=ru(e);bo(e,p,m);break;case 5:var v=a.stateNode;a.flags&32&&(fs(v,""),a.flags&=-33);var E=ru(e);bo(e,E,v);break;case 3:case 4:var D=a.stateNode.containerInfo,P=ru(e);ou(e,P,D);break;default:throw Error(s(161))}}catch(V){Ut(e,e.return,V)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Nm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Nm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Em(e,n.alternate,n),n=n.sibling}function Qn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:bn(4,n,n.return),Qn(n);break;case 1:_i(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&vm(n,n.return,a),Qn(n);break;case 27:Qa(n.stateNode);case 26:case 5:_i(n,n.return),Qn(n);break;case 22:n.memoizedState===null&&Qn(n);break;case 30:Qn(n);break;default:Qn(n)}e=e.sibling}}function Qi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,m=e,p=n,v=p.flags;switch(p.tag){case 0:case 11:case 15:Qi(m,p,a),Ia(4,p);break;case 1:if(Qi(m,p,a),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(P){Ut(c,c.return,P)}if(c=p,m=c.updateQueue,m!==null){var E=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)of(D[m],E)}catch(P){Ut(c,c.return,P)}}a&&v&64&&ym(p),Ha(p,p.return);break;case 27:xm(p);case 26:case 5:Qi(m,p,a),a&&c===null&&v&4&&Am(p),Ha(p,p.return);break;case 12:Qi(m,p,a);break;case 31:Qi(m,p,a),a&&v&4&&_m(m,p);break;case 13:Qi(m,p,a),a&&v&4&&Mm(m,p);break;case 22:p.memoizedState===null&&Qi(m,p,a),Ha(p,p.return);break;case 30:break;default:Qi(m,p,a)}n=n.sibling}}function cu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ma(a))}function uu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ma(e))}function Si(e,n,a,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rm(e,n,a,c),n=n.sibling}function Rm(e,n,a,c){var m=n.flags;switch(n.tag){case 0:case 11:case 15:Si(e,n,a,c),m&2048&&Ia(9,n);break;case 1:Si(e,n,a,c);break;case 3:Si(e,n,a,c),m&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ma(e)));break;case 12:if(m&2048){Si(e,n,a,c),e=n.stateNode;try{var p=n.memoizedProps,v=p.id,E=p.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){Ut(n,n.return,D)}}else Si(e,n,a,c);break;case 31:Si(e,n,a,c);break;case 13:Si(e,n,a,c);break;case 23:break;case 22:p=n.stateNode,v=n.alternate,n.memoizedState!==null?p._visibility&2?Si(e,n,a,c):Ga(e,n):p._visibility&2?Si(e,n,a,c):(p._visibility|=2,ks(e,n,a,c,(n.subtreeFlags&10256)!==0||!1)),m&2048&&cu(v,n);break;case 24:Si(e,n,a,c),m&2048&&uu(n.alternate,n);break;default:Si(e,n,a,c)}}function ks(e,n,a,c,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,v=n,E=a,D=c,P=v.flags;switch(v.tag){case 0:case 11:case 15:ks(p,v,E,D,m),Ia(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?ks(p,v,E,D,m):Ga(p,v):(V._visibility|=2,ks(p,v,E,D,m)),m&&P&2048&&cu(v.alternate,v);break;case 24:ks(p,v,E,D,m),m&&P&2048&&uu(v.alternate,v);break;default:ks(p,v,E,D,m)}n=n.sibling}}function Ga(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,c=n,m=c.flags;switch(c.tag){case 22:Ga(a,c),m&2048&&cu(c.alternate,c);break;case 24:Ga(a,c),m&2048&&uu(c.alternate,c);break;default:Ga(a,c)}n=n.sibling}}var Va=8192;function Ls(e,n,a){if(e.subtreeFlags&Va)for(e=e.child;e!==null;)Om(e,n,a),e=e.sibling}function Om(e,n,a){switch(e.tag){case 26:Ls(e,n,a),e.flags&Va&&e.memoizedState!==null&&ev(a,xi,e.memoizedState,e.memoizedProps);break;case 5:Ls(e,n,a);break;case 3:case 4:var c=xi;xi=Oo(e.stateNode.containerInfo),Ls(e,n,a),xi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Va,Va=16777216,Ls(e,n,a),Va=c):Ls(e,n,a));break;default:Ls(e,n,a)}}function km(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ya(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];ve=c,Bm(c,e)}km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Lm(e),e=e.sibling}function Lm(e){switch(e.tag){case 0:case 11:case 15:Ya(e),e.flags&2048&&bn(9,e,e.return);break;case 3:Ya(e);break;case 12:Ya(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,vo(e)):Ya(e);break;default:Ya(e)}}function vo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];ve=c,Bm(c,e)}km(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:bn(8,n,n.return),vo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,vo(n));break;default:vo(n)}e=e.sibling}}function Bm(e,n){for(;ve!==null;){var a=ve;switch(a.tag){case 0:case 11:case 15:bn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ma(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ve=c;else t:for(a=e;ve!==null;){c=ve;var m=c.sibling,p=c.return;if(Tm(c),c===a){ve=null;break t}if(m!==null){m.return=p,ve=m;break t}ve=p}}}var py={getCacheForType:function(e){var n=Ee(le),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Ee(le).controller.signal}},by=typeof WeakMap=="function"?WeakMap:Map,kt=0,Xt=null,Tt=null,_t=0,Pt=0,Je=null,yn=!1,Bs=!1,hu=!1,Zi=0,ne=0,vn=0,Zn=0,du=0,ti=0,Fs=0,Xa=null,Ue=null,fu=!1,Ao=0,Fm=0,wo=1/0,xo=null,An=null,me=0,wn=null,zs=null,Ji=0,mu=0,gu=null,zm=null,qa=0,pu=null;function ei(){return(kt&2)!==0&&_t!==0?_t&-_t:O.T!==null?xu():Zh()}function jm(){if(ti===0)if((_t&536870912)===0||Dt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),ti=e}else ti=536870912;return e=Qe.current,e!==null&&(e.flags|=32),ti}function Ie(e,n,a){(e===Xt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(js(e,0),xn(e,_t,ti,!1)),ma(e,a),((kt&2)===0||e!==Xt)&&(e===Xt&&((kt&2)===0&&(Zn|=a),ne===4&&xn(e,_t,ti,!1)),Mi(e))}function Pm(e,n,a){if((kt&6)!==0)throw Error(s(327));var c=!a&&(n&127)===0&&(n&e.expiredLanes)===0||fa(e,n),m=c?Ay(e,n):yu(e,n,!0),p=c;do{if(m===0){Bs&&!c&&xn(e,n,0,!1);break}else{if(a=e.current.alternate,p&&!yy(a)){m=yu(e,n,!1),p=!1;continue}if(m===2){if(p=n,e.errorRecoveryDisabledLanes&p)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;m=Xa;var D=E.current.memoizedState.isDehydrated;if(D&&(js(E,v).flags|=256),v=yu(E,v,!1),v!==2){if(hu&&!D){E.errorRecoveryDisabledLanes|=p,Zn|=p,m=4;break t}p=Ue,Ue=m,p!==null&&(Ue===null?Ue=p:Ue.push.apply(Ue,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){js(e,0),xn(e,n,0,!0);break}t:{switch(c=e,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:xn(c,n,ti,!yn);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(m=Ao+300-Xe(),10<m)){if(xn(c,n,ti,!yn),Rr(c,0,!0)!==0)break t;Ji=n,c.timeoutHandle=pg(Um.bind(null,c,a,Ue,xo,fu,n,ti,Zn,Fs,yn,p,"Throttled",-0,0),m);break t}Um(c,a,Ue,xo,fu,n,ti,Zn,Fs,yn,p,null,-0,0)}}break}while(!0);Mi(e)}function Um(e,n,a,c,m,p,v,E,D,P,V,q,U,G){if(e.timeoutHandle=-1,q=n.subtreeFlags,q&8192||(q&16785408)===16785408){q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ji},Om(n,p,q);var nt=(p&62914560)===p?Ao-Xe():(p&4194048)===p?Fm-Xe():0;if(nt=iv(q,nt),nt!==null){Ji=p,e.cancelPendingCommit=nt($m.bind(null,e,n,p,a,c,m,v,E,D,V,q,null,U,G)),xn(e,p,v,!P);return}}$m(e,n,p,a,c,m,v,E,D)}function yy(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var m=a[c],p=m.getSnapshot;m=m.value;try{if(!Ke(p(),m))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xn(e,n,a,c){n&=~du,n&=~Zn,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var m=n;0<m;){var p=31-$e(m),v=1<<p;c[p]=-1,m&=~v}a!==0&&Kh(e,a,n)}function So(){return(kt&6)===0?($a(0),!1):!0}function bu(){if(Tt!==null){if(Pt===0)var e=Tt.return;else e=Tt,Hi=Gn=null,kc(e),Ms=null,Na=0,e=Tt;for(;e!==null;)bm(e.alternate,e),e=e.return;Tt=null}}function js(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,jy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ji=0,bu(),Xt=e,Tt=a=Ui(e.current,null),_t=n,Pt=0,Je=null,yn=!1,Bs=fa(e,n),hu=!1,Fs=ti=du=Zn=vn=ne=0,Ue=Xa=null,fu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var m=31-$e(c),p=1<<m;n|=e[m],c&=~p}return Zi=n,Gr(),a}function Im(e,n){vt=null,O.H=ja,n===_s||n===Qr?(n=nf(),Pt=3):n===wc?(n=nf(),Pt=4):Pt=n===Kc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Je=n,Tt===null&&(ne=1,ho(e,ui(n,e.current)))}function Hm(){var e=Qe.current;return e===null?!0:(_t&4194048)===_t?mi===null:(_t&62914560)===_t||(_t&536870912)!==0?e===mi:!1}function Gm(){var e=O.H;return O.H=ja,e===null?ja:e}function Vm(){var e=O.A;return O.A=py,e}function Eo(){ne=4,yn||(_t&4194048)!==_t&&Qe.current!==null||(Bs=!0),(vn&134217727)===0&&(Zn&134217727)===0||Xt===null||xn(Xt,_t,ti,!1)}function yu(e,n,a){var c=kt;kt|=2;var m=Gm(),p=Vm();(Xt!==e||_t!==n)&&(xo=null,js(e,n)),n=!1;var v=ne;t:do try{if(Pt!==0&&Tt!==null){var E=Tt,D=Je;switch(Pt){case 8:bu(),v=6;break t;case 3:case 2:case 9:case 6:Qe.current===null&&(n=!0);var P=Pt;if(Pt=0,Je=null,Ps(e,E,D,P),a&&Bs){v=0;break t}break;default:P=Pt,Pt=0,Je=null,Ps(e,E,D,P)}}vy(),v=ne;break}catch(V){Im(e,V)}while(!0);return n&&e.shellSuspendCounter++,Hi=Gn=null,kt=c,O.H=m,O.A=p,Tt===null&&(Xt=null,_t=0,Gr()),v}function vy(){for(;Tt!==null;)Ym(Tt)}function Ay(e,n){var a=kt;kt|=2;var c=Gm(),m=Vm();Xt!==e||_t!==n?(xo=null,wo=Xe()+500,js(e,n)):Bs=fa(e,n);t:do try{if(Pt!==0&&Tt!==null){n=Tt;var p=Je;e:switch(Pt){case 1:Pt=0,Je=null,Ps(e,n,p,1);break;case 2:case 9:if(tf(p)){Pt=0,Je=null,Xm(n);break}n=function(){Pt!==2&&Pt!==9||Xt!==e||(Pt=7),Mi(e)},p.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:tf(p)?(Pt=0,Je=null,Xm(n)):(Pt=0,Je=null,Ps(e,n,p,7));break;case 5:var v=null;switch(Tt.tag){case 26:v=Tt.memoizedState;case 5:case 27:var E=Tt;if(v?Rg(v):E.stateNode.complete){Pt=0,Je=null;var D=E.sibling;if(D!==null)Tt=D;else{var P=E.return;P!==null?(Tt=P,To(P)):Tt=null}break e}}Pt=0,Je=null,Ps(e,n,p,5);break;case 6:Pt=0,Je=null,Ps(e,n,p,6);break;case 8:bu(),ne=6;break t;default:throw Error(s(462))}}wy();break}catch(V){Im(e,V)}while(!0);return Hi=Gn=null,O.H=c,O.A=m,kt=a,Tt!==null?0:(Xt=null,_t=0,Gr(),ne)}function wy(){for(;Tt!==null&&!V0();)Ym(Tt)}function Ym(e){var n=gm(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,n===null?To(e):Tt=n}function Xm(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=cm(a,n,n.pendingProps,n.type,void 0,_t);break;case 11:n=cm(a,n,n.pendingProps,n.type.render,n.ref,_t);break;case 5:kc(n);default:bm(a,n),n=Tt=Gd(n,Zi),n=gm(a,n,Zi)}e.memoizedProps=e.pendingProps,n===null?To(e):Tt=n}function Ps(e,n,a,c){Hi=Gn=null,kc(n),Ms=null,Na=0;var m=n.return;try{if(cy(e,m,n,a,_t)){ne=1,ho(e,ui(a,e.current)),Tt=null;return}}catch(p){if(m!==null)throw Tt=m,p;ne=1,ho(e,ui(a,e.current)),Tt=null;return}n.flags&32768?(Dt||c===1?e=!0:Bs||(_t&536870912)!==0?e=!1:(yn=e=!0,(c===2||c===9||c===3||c===6)&&(c=Qe.current,c!==null&&c.tag===13&&(c.flags|=16384))),qm(n,e)):To(n)}function To(e){var n=e;do{if((n.flags&32768)!==0){qm(n,yn);return}e=n.return;var a=dy(n.alternate,n,Zi);if(a!==null){Tt=a;return}if(n=n.sibling,n!==null){Tt=n;return}Tt=n=e}while(n!==null);ne===0&&(ne=5)}function qm(e,n){do{var a=fy(e.alternate,e);if(a!==null){a.flags&=32767,Tt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Tt=e;return}Tt=e=a}while(e!==null);ne=6,Tt=null}function $m(e,n,a,c,m,p,v,E,D){e.cancelPendingCommit=null;do Co();while(me!==0);if((kt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(p=n.lanes|n.childLanes,p|=rc,tb(e,a,p,v,E,D),e===Xt&&(Tt=Xt=null,_t=0),zs=n,wn=e,Ji=a,mu=p,gu=m,zm=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ty(_r,function(){return Jm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,m=I.p,I.p=2,v=kt,kt|=4;try{my(e,n,a)}finally{kt=v,I.p=m,O.T=c}}me=1,Km(),Wm(),Qm()}}function Km(){if(me===1){me=0;var e=wn,n=zs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var c=I.p;I.p=2;var m=kt;kt|=4;try{Dm(n,e);var p=Nu,v=Ld(e.containerInfo),E=p.focusedElem,D=p.selectionRange;if(v!==E&&E&&E.ownerDocument&&kd(E.ownerDocument.documentElement,E)){if(D!==null&&ec(E)){var P=D.start,V=D.end;if(V===void 0&&(V=P),"selectionStart"in E)E.selectionStart=P,E.selectionEnd=Math.min(V,E.value.length);else{var q=E.ownerDocument||document,U=q&&q.defaultView||window;if(U.getSelection){var G=U.getSelection(),nt=E.textContent.length,dt=Math.min(D.start,nt),Vt=D.end===void 0?dt:Math.min(D.end,nt);!G.extend&&dt>Vt&&(v=Vt,Vt=dt,dt=v);var F=Od(E,dt),L=Od(E,Vt);if(F&&L&&(G.rangeCount!==1||G.anchorNode!==F.node||G.anchorOffset!==F.offset||G.focusNode!==L.node||G.focusOffset!==L.offset)){var j=q.createRange();j.setStart(F.node,F.offset),G.removeAllRanges(),dt>Vt?(G.addRange(j),G.extend(L.node,L.offset)):(j.setEnd(L.node,L.offset),G.addRange(j))}}}}for(q=[],G=E;G=G.parentNode;)G.nodeType===1&&q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<q.length;E++){var X=q[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}jo=!!Du,Nu=Du=null}finally{kt=m,I.p=c,O.T=a}}e.current=n,me=2}}function Wm(){if(me===2){me=0;var e=wn,n=zs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var c=I.p;I.p=2;var m=kt;kt|=4;try{Em(e,n.alternate,n)}finally{kt=m,I.p=c,O.T=a}}me=3}}function Qm(){if(me===4||me===3){me=0,Y0();var e=wn,n=zs,a=Ji,c=zm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?me=5:(me=0,zs=wn=null,Zm(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(An=null),Fl(a),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(da,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=O.T,m=I.p,I.p=2,O.T=null;try{for(var p=e.onRecoverableError,v=0;v<c.length;v++){var E=c[v];p(E.value,{componentStack:E.stack})}}finally{O.T=n,I.p=m}}(Ji&3)!==0&&Co(),Mi(e),m=e.pendingLanes,(a&261930)!==0&&(m&42)!==0?e===pu?qa++:(qa=0,pu=e):qa=0,$a(0)}}function Zm(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ma(n)))}function Co(){return Km(),Wm(),Qm(),Jm()}function Jm(){if(me!==5)return!1;var e=wn,n=mu;mu=0;var a=Fl(Ji),c=O.T,m=I.p;try{I.p=32>a?32:a,O.T=null,a=gu,gu=null;var p=wn,v=Ji;if(me=0,zs=wn=null,Ji=0,(kt&6)!==0)throw Error(s(331));var E=kt;if(kt|=4,Lm(p.current),Rm(p,p.current,v,a),kt=E,$a(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(da,p)}catch{}return!0}finally{I.p=m,O.T=c,Zm(e,n)}}function tg(e,n,a){n=ui(a,n),n=$c(e.stateNode,n,2),e=mn(e,n,2),e!==null&&(ma(e,2),Mi(e))}function Ut(e,n,a){if(e.tag===3)tg(e,e,a);else for(;n!==null;){if(n.tag===3){tg(n,e,a);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(An===null||!An.has(c))){e=ui(a,e),a=em(2),c=mn(n,a,2),c!==null&&(im(a,c,n,e),ma(c,2),Mi(c));break}}n=n.return}}function vu(e,n,a){var c=e.pingCache;if(c===null){c=e.pingCache=new by;var m=new Set;c.set(n,m)}else m=c.get(n),m===void 0&&(m=new Set,c.set(n,m));m.has(a)||(hu=!0,m.add(a),e=xy.bind(null,e,n,a),n.then(e,e))}function xy(e,n,a){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Xt===e&&(_t&a)===a&&(ne===4||ne===3&&(_t&62914560)===_t&&300>Xe()-Ao?(kt&2)===0&&js(e,0):du|=a,Fs===_t&&(Fs=0)),Mi(e)}function eg(e,n){n===0&&(n=$h()),e=Un(e,n),e!==null&&(ma(e,n),Mi(e))}function Sy(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),eg(e,a)}function Ey(e,n){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),eg(e,a)}function Ty(e,n){return Ol(e,n)}var _o=null,Us=null,Au=!1,Mo=!1,wu=!1,Sn=0;function Mi(e){e!==Us&&e.next===null&&(Us===null?_o=Us=e:Us=Us.next=e),Mo=!0,Au||(Au=!0,_y())}function $a(e,n){if(!wu&&Mo){wu=!0;do for(var a=!1,c=_o;c!==null;){if(e!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var v=c.suspendedLanes,E=c.pingedLanes;p=(1<<31-$e(42|e)+1)-1,p&=m&~(v&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,ag(c,p))}else p=_t,p=Rr(c,c===Xt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||fa(c,p)||(a=!0,ag(c,p));c=c.next}while(a);wu=!1}}function Cy(){ig()}function ig(){Mo=Au=!1;var e=0;Sn!==0&&zy()&&(e=Sn);for(var n=Xe(),a=null,c=_o;c!==null;){var m=c.next,p=ng(c,n);p===0?(c.next=null,a===null?_o=m:a.next=m,m===null&&(Us=a)):(a=c,(e!==0||(p&3)!==0)&&(Mo=!0)),c=m}me!==0&&me!==5||$a(e),Sn!==0&&(Sn=0)}function ng(e,n){for(var a=e.suspendedLanes,c=e.pingedLanes,m=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var v=31-$e(p),E=1<<v,D=m[v];D===-1?((E&a)===0||(E&c)!==0)&&(m[v]=J0(E,n)):D<=n&&(e.expiredLanes|=E),p&=~E}if(n=Xt,a=_t,a=Rr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&kl(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||fa(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(c!==null&&kl(c),Fl(a)){case 2:case 8:a=Xh;break;case 32:a=_r;break;case 268435456:a=qh;break;default:a=_r}return c=sg.bind(null,e),a=Ol(a,c),e.callbackPriority=n,e.callbackNode=a,n}return c!==null&&c!==null&&kl(c),e.callbackPriority=2,e.callbackNode=null,2}function sg(e,n){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Co()&&e.callbackNode!==a)return null;var c=_t;return c=Rr(e,e===Xt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Pm(e,c,n),ng(e,Xe()),e.callbackNode!=null&&e.callbackNode===a?sg.bind(null,e):null)}function ag(e,n){if(Co())return null;Pm(e,n,!0)}function _y(){Py(function(){(kt&6)!==0?Ol(Yh,Cy):ig()})}function xu(){if(Sn===0){var e=Ts;e===0&&(e=Mr,Mr<<=1,(Mr&261888)===0&&(Mr=256)),Sn=e}return Sn}function rg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Br(""+e)}function og(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function My(e,n,a,c,m){if(n==="submit"&&a&&a.stateNode===m){var p=rg((m[Be]||null).action),v=c.submitter;v&&(n=(n=v[Be]||null)?rg(n.formAction):v.getAttribute("formAction"),n!==null&&(p=n,v=null));var E=new Pr("action","action",null,c,m);e.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Sn!==0){var D=v?og(m,v):new FormData(m);Hc(a,{pending:!0,data:D,method:m.method,action:p},null,D)}}else typeof p=="function"&&(E.preventDefault(),D=v?og(m,v):new FormData(m),Hc(a,{pending:!0,data:D,method:m.method,action:p},p,D))},currentTarget:m}]})}}for(var Su=0;Su<ac.length;Su++){var Eu=ac[Su],Dy=Eu.toLowerCase(),Ny=Eu[0].toUpperCase()+Eu.slice(1);wi(Dy,"on"+Ny)}wi(zd,"onAnimationEnd"),wi(jd,"onAnimationIteration"),wi(Pd,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Xb,"onTransitionRun"),wi(qb,"onTransitionStart"),wi($b,"onTransitionCancel"),wi(Ud,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ry=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ka));function lg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],m=c.event;c=c.listeners;t:{var p=void 0;if(n)for(var v=c.length-1;0<=v;v--){var E=c[v],D=E.instance,P=E.currentTarget;if(E=E.listener,D!==p&&m.isPropagationStopped())break t;p=E,m.currentTarget=P;try{p(m)}catch(V){Hr(V)}m.currentTarget=null,p=D}else for(v=0;v<c.length;v++){if(E=c[v],D=E.instance,P=E.currentTarget,E=E.listener,D!==p&&m.isPropagationStopped())break t;p=E,m.currentTarget=P;try{p(m)}catch(V){Hr(V)}m.currentTarget=null,p=D}}}}function Ct(e,n){var a=n[zl];a===void 0&&(a=n[zl]=new Set);var c=e+"__bubble";a.has(c)||(cg(n,e,2,!1),a.add(c))}function Tu(e,n,a){var c=0;n&&(c|=4),cg(a,e,c,n)}var Do="_reactListening"+Math.random().toString(36).slice(2);function Cu(e){if(!e[Do]){e[Do]=!0,ed.forEach(function(a){a!=="selectionchange"&&(Ry.has(a)||Tu(a,!1,e),Tu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Do]||(n[Do]=!0,Tu("selectionchange",!1,n))}}function cg(e,n,a,c){switch(jg(n)){case 2:var m=av;break;case 8:m=rv;break;default:m=Iu}a=m.bind(null,n,a,e),m=void 0,!Xl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(n,a,{capture:!0,passive:m}):e.addEventListener(n,a,!0):m!==void 0?e.addEventListener(n,a,{passive:m}):e.addEventListener(n,a,!1)}function _u(e,n,a,c,m){var p=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===m)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;E!==null;){if(v=ls(E),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=p=v;continue t}E=E.parentNode}}c=c.return}fd(function(){var P=p,V=Vl(a),q=[];t:{var U=Id.get(e);if(U!==void 0){var G=Pr,nt=e;switch(e){case"keypress":if(zr(a)===0)break t;case"keydown":case"keyup":G=Eb;break;case"focusin":nt="focus",G=Wl;break;case"focusout":nt="blur",G=Wl;break;case"beforeblur":case"afterblur":G=Wl;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=_b;break;case zd:case jd:case Pd:G=gb;break;case Ud:G=Db;break;case"scroll":case"scrollend":G=ub;break;case"wheel":G=Rb;break;case"copy":case"cut":case"paste":G=bb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=yd;break;case"toggle":case"beforetoggle":G=kb}var dt=(n&4)!==0,Vt=!dt&&(e==="scroll"||e==="scrollend"),F=dt?U!==null?U+"Capture":null:U;dt=[];for(var L=P,j;L!==null;){var X=L;if(j=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||j===null||F===null||(X=ba(L,F),X!=null&&dt.push(Wa(L,X,j))),Vt)break;L=L.return}0<dt.length&&(U=new G(U,nt,null,a,V),q.push({event:U,listeners:dt}))}}if((n&7)===0){t:{if(U=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",U&&a!==Gl&&(nt=a.relatedTarget||a.fromElement)&&(ls(nt)||nt[os]))break t;if((G||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,G?(nt=a.relatedTarget||a.toElement,G=P,nt=nt?ls(nt):null,nt!==null&&(Vt=o(nt),dt=nt.tag,nt!==Vt||dt!==5&&dt!==27&&dt!==6)&&(nt=null)):(G=null,nt=P),G!==nt)){if(dt=pd,X="onMouseLeave",F="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(dt=yd,X="onPointerLeave",F="onPointerEnter",L="pointer"),Vt=G==null?U:pa(G),j=nt==null?U:pa(nt),U=new dt(X,L+"leave",G,a,V),U.target=Vt,U.relatedTarget=j,X=null,ls(V)===P&&(dt=new dt(F,L+"enter",nt,a,V),dt.target=j,dt.relatedTarget=Vt,X=dt),Vt=X,G&&nt)e:{for(dt=Oy,F=G,L=nt,j=0,X=F;X;X=dt(X))j++;X=0;for(var lt=L;lt;lt=dt(lt))X++;for(;0<j-X;)F=dt(F),j--;for(;0<X-j;)L=dt(L),X--;for(;j--;){if(F===L||L!==null&&F===L.alternate){dt=F;break e}F=dt(F),L=dt(L)}dt=null}else dt=null;G!==null&&ug(q,U,G,dt,!1),nt!==null&&Vt!==null&&ug(q,Vt,nt,dt,!0)}}t:{if(U=P?pa(P):window,G=U.nodeName&&U.nodeName.toLowerCase(),G==="select"||G==="input"&&U.type==="file")var Rt=Cd;else if(Ed(U))if(_d)Rt=Gb;else{Rt=Ib;var st=Ub}else G=U.nodeName,!G||G.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?P&&Hl(P.elementType)&&(Rt=Cd):Rt=Hb;if(Rt&&(Rt=Rt(e,P))){Td(q,Rt,a,V);break t}st&&st(e,U,P),e==="focusout"&&P&&U.type==="number"&&P.memoizedProps.value!=null&&Il(U,"number",U.value)}switch(st=P?pa(P):window,e){case"focusin":(Ed(st)||st.contentEditable==="true")&&(bs=st,ic=P,Ta=null);break;case"focusout":Ta=ic=bs=null;break;case"mousedown":nc=!0;break;case"contextmenu":case"mouseup":case"dragend":nc=!1,Bd(q,a,V);break;case"selectionchange":if(Yb)break;case"keydown":case"keyup":Bd(q,a,V)}var wt;if(Zl)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else ps?xd(e,a)&&(Mt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(vd&&a.locale!=="ko"&&(ps||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&ps&&(wt=md()):(on=V,ql="value"in on?on.value:on.textContent,ps=!0)),st=No(P,Mt),0<st.length&&(Mt=new bd(Mt,e,null,a,V),q.push({event:Mt,listeners:st}),wt?Mt.data=wt:(wt=Sd(a),wt!==null&&(Mt.data=wt)))),(wt=Bb?Fb(e,a):zb(e,a))&&(Mt=No(P,"onBeforeInput"),0<Mt.length&&(st=new bd("onBeforeInput","beforeinput",null,a,V),q.push({event:st,listeners:Mt}),st.data=wt)),My(q,e,P,a,V)}lg(q,n)})}function Wa(e,n,a){return{instance:e,listener:n,currentTarget:a}}function No(e,n){for(var a=n+"Capture",c=[];e!==null;){var m=e,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=ba(e,a),m!=null&&c.unshift(Wa(e,m,p)),m=ba(e,n),m!=null&&c.push(Wa(e,m,p))),e.tag===3)return c;e=e.return}return[]}function Oy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ug(e,n,a,c,m){for(var p=n._reactName,v=[];a!==null&&a!==c;){var E=a,D=E.alternate,P=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||P===null||(D=P,m?(P=ba(a,p),P!=null&&v.unshift(Wa(a,P,D))):m||(P=ba(a,p),P!=null&&v.push(Wa(a,P,D)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var ky=/\r\n?/g,Ly=/\u0000|\uFFFD/g;function hg(e){return(typeof e=="string"?e:""+e).replace(ky,`
`).replace(Ly,"")}function dg(e,n){return n=hg(n),hg(e)===n}function Gt(e,n,a,c,m,p){switch(a){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||fs(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&fs(e,""+c);break;case"className":kr(e,"class",c);break;case"tabIndex":kr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(e,a,c);break;case"style":hd(e,c,p);break;case"data":if(n!=="object"){kr(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Br(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(n!=="input"&&Gt(e,n,"name",m.name,m,null),Gt(e,n,"formEncType",m.formEncType,m,null),Gt(e,n,"formMethod",m.formMethod,m,null),Gt(e,n,"formTarget",m.formTarget,m,null)):(Gt(e,n,"encType",m.encType,m,null),Gt(e,n,"method",m.method,m,null),Gt(e,n,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Br(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=ji);break;case"onScroll":c!=null&&Ct("scroll",e);break;case"onScrollEnd":c!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=Br(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),Or(e,"popover",c);break;case"xlinkActuate":zi(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zi(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zi(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zi(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zi(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zi(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zi(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Or(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lb.get(a)||a,Or(e,a,c))}}function Mu(e,n,a,c,m,p){switch(a){case"style":hd(e,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?fs(e,c):(typeof c=="number"||typeof c=="bigint")&&fs(e,""+c);break;case"onScroll":c!=null&&Ct("scroll",e);break;case"onScrollEnd":c!=null&&Ct("scrollend",e);break;case"onClick":c!=null&&(e.onclick=ji);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!id.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),n=a.slice(2,m?a.length-7:void 0),p=e[Be]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(n,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,c,m);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Or(e,a,c)}}}function Ce(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var c=!1,m=!1,p;for(p in a)if(a.hasOwnProperty(p)){var v=a[p];if(v!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Gt(e,n,p,v,a,null)}}m&&Gt(e,n,"srcSet",a.srcSet,a,null),c&&Gt(e,n,"src",a.src,a,null);return;case"input":Ct("invalid",e);var E=p=v=m=null,D=null,P=null;for(c in a)if(a.hasOwnProperty(c)){var V=a[c];if(V!=null)switch(c){case"name":m=V;break;case"type":v=V;break;case"checked":D=V;break;case"defaultChecked":P=V;break;case"value":p=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:Gt(e,n,c,V,a,null)}}od(e,p,E,D,P,v,m,!1);return;case"select":Ct("invalid",e),c=v=p=null;for(m in a)if(a.hasOwnProperty(m)&&(E=a[m],E!=null))switch(m){case"value":p=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:Gt(e,n,m,E,a,null)}n=p,a=v,e.multiple=!!c,n!=null?ds(e,!!c,n,!1):a!=null&&ds(e,!!c,a,!0);return;case"textarea":Ct("invalid",e),p=m=c=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":m=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Gt(e,n,v,E,a,null)}cd(e,c,m,p);return;case"option":for(D in a)a.hasOwnProperty(D)&&(c=a[D],c!=null)&&(D==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Gt(e,n,D,c,a,null));return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(c=0;c<Ka.length;c++)Ct(Ka[c],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Gt(e,n,P,c,a,null)}return;default:if(Hl(n)){for(V in a)a.hasOwnProperty(V)&&(c=a[V],c!==void 0&&Mu(e,n,V,c,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(c=a[E],c!=null&&Gt(e,n,E,c,a,null))}function By(e,n,a,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,E=null,D=null,P=null,V=null;for(G in a){var q=a[G];if(a.hasOwnProperty(G)&&q!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=q;default:c.hasOwnProperty(G)||Gt(e,n,G,null,c,q)}}for(var U in c){var G=c[U];if(q=a[U],c.hasOwnProperty(U)&&(G!=null||q!=null))switch(U){case"type":p=G;break;case"name":m=G;break;case"checked":P=G;break;case"defaultChecked":V=G;break;case"value":v=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==q&&Gt(e,n,U,G,c,q)}}Ul(e,v,E,D,P,V,p,m);return;case"select":G=v=E=U=null;for(p in a)if(D=a[p],a.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":G=D;default:c.hasOwnProperty(p)||Gt(e,n,p,null,c,D)}for(m in c)if(p=c[m],D=a[m],c.hasOwnProperty(m)&&(p!=null||D!=null))switch(m){case"value":U=p;break;case"defaultValue":E=p;break;case"multiple":v=p;default:p!==D&&Gt(e,n,m,p,c,D)}n=E,a=v,c=G,U!=null?ds(e,!!a,U,!1):!!c!=!!a&&(n!=null?ds(e,!!a,n,!0):ds(e,!!a,a?[]:"",!1));return;case"textarea":G=U=null;for(E in a)if(m=a[E],a.hasOwnProperty(E)&&m!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Gt(e,n,E,null,c,m)}for(v in c)if(m=c[v],p=a[v],c.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":U=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&Gt(e,n,v,m,c,p)}ld(e,U,G);return;case"option":for(var nt in a)U=a[nt],a.hasOwnProperty(nt)&&U!=null&&!c.hasOwnProperty(nt)&&(nt==="selected"?e.selected=!1:Gt(e,n,nt,null,c,U));for(D in c)U=c[D],G=a[D],c.hasOwnProperty(D)&&U!==G&&(U!=null||G!=null)&&(D==="selected"?e.selected=U&&typeof U!="function"&&typeof U!="symbol":Gt(e,n,D,U,c,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)U=a[dt],a.hasOwnProperty(dt)&&U!=null&&!c.hasOwnProperty(dt)&&Gt(e,n,dt,null,c,U);for(P in c)if(U=c[P],G=a[P],c.hasOwnProperty(P)&&U!==G&&(U!=null||G!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,n));break;default:Gt(e,n,P,U,c,G)}return;default:if(Hl(n)){for(var Vt in a)U=a[Vt],a.hasOwnProperty(Vt)&&U!==void 0&&!c.hasOwnProperty(Vt)&&Mu(e,n,Vt,void 0,c,U);for(V in c)U=c[V],G=a[V],!c.hasOwnProperty(V)||U===G||U===void 0&&G===void 0||Mu(e,n,V,U,c,G);return}}for(var F in a)U=a[F],a.hasOwnProperty(F)&&U!=null&&!c.hasOwnProperty(F)&&Gt(e,n,F,null,c,U);for(q in c)U=c[q],G=a[q],!c.hasOwnProperty(q)||U===G||U==null&&G==null||Gt(e,n,q,U,c,G)}function fg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var m=a[c],p=m.transferSize,v=m.initiatorType,E=m.duration;if(p&&E&&fg(v)){for(v=0,E=m.responseEnd,c+=1;c<a.length;c++){var D=a[c],P=D.startTime;if(P>E)break;var V=D.transferSize,q=D.initiatorType;V&&fg(q)&&(D=D.responseEnd,v+=V*(D<E?1:(E-P)/(D-P)))}if(--c,n+=8*(p+v)/(m.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Du=null,Nu=null;function Ro(e){return e.nodeType===9?e:e.ownerDocument}function mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ru(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ou=null;function zy(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var pg=typeof setTimeout=="function"?setTimeout:void 0,jy=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,Py=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(e){return bg.resolve(null).then(e).catch(Uy)}:pg;function Uy(e){setTimeout(function(){throw e})}function En(e){return e==="head"}function yg(e,n){var a=n,c=0;do{var m=a.nextSibling;if(e.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(m),Vs(n);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Qa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Qa(a);for(var p=a.firstChild;p;){var v=p.nextSibling,E=p.nodeName;p[ga]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=v}}else a==="body"&&Qa(e.ownerDocument.body);a=m}while(a);Vs(n)}function vg(e,n){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function ku(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ku(a),jl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Iy(e,n,a,c){for(;e.nodeType===1;){var m=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=gi(e.nextSibling),e===null)break}return null}function Hy(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=gi(e.nextSibling),e===null))return null;return e}function Ag(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=gi(e.nextSibling),e===null))return null;return e}function Lu(e){return e.data==="$?"||e.data==="$~"}function Bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Gy(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var c=function(){n(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function gi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Fu=null;function wg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return gi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function xg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Sg(e,n,a){switch(n=Ro(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Qa(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);jl(e)}var pi=new Map,Eg=new Set;function Oo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var tn=I.d;I.d={f:Vy,r:Yy,D:Xy,C:qy,L:$y,m:Ky,X:Qy,S:Wy,M:Zy};function Vy(){var e=tn.f(),n=So();return e||n}function Yy(e){var n=cs(e);n!==null&&n.tag===5&&n.type==="form"?If(n):tn.r(e)}var Is=typeof document>"u"?null:document;function Tg(e,n,a){var c=Is;if(c&&typeof n=="string"&&n){var m=li(n);m='link[rel="'+e+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),Eg.has(m)||(Eg.add(m),e={rel:e,crossOrigin:a,href:n},c.querySelector(m)===null&&(n=c.createElement("link"),Ce(n,"link",e),ye(n),c.head.appendChild(n)))}}function Xy(e){tn.D(e),Tg("dns-prefetch",e,null)}function qy(e,n){tn.C(e,n),Tg("preconnect",e,n)}function $y(e,n,a){tn.L(e,n,a);var c=Is;if(c&&e&&n){var m='link[rel="preload"][as="'+li(n)+'"]';n==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+li(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+li(a.imageSizes)+'"]')):m+='[href="'+li(e)+'"]';var p=m;switch(n){case"style":p=Hs(e);break;case"script":p=Gs(e)}pi.has(p)||(e=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),pi.set(p,e),c.querySelector(m)!==null||n==="style"&&c.querySelector(Za(p))||n==="script"&&c.querySelector(Ja(p))||(n=c.createElement("link"),Ce(n,"link",e),ye(n),c.head.appendChild(n)))}}function Ky(e,n){tn.m(e,n);var a=Is;if(a&&e){var c=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+li(c)+'"][href="'+li(e)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Gs(e)}if(!pi.has(p)&&(e=b({rel:"modulepreload",href:e},n),pi.set(p,e),a.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ja(p)))return}c=a.createElement("link"),Ce(c,"link",e),ye(c),a.head.appendChild(c)}}}function Wy(e,n,a){tn.S(e,n,a);var c=Is;if(c&&e){var m=us(c).hoistableStyles,p=Hs(e);n=n||"default";var v=m.get(p);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(Za(p)))E.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},a),(a=pi.get(p))&&zu(e,a);var D=v=c.createElement("link");ye(D),Ce(D,"link",e),D._p=new Promise(function(P,V){D.onload=P,D.onerror=V}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ko(v,n,c)}v={type:"stylesheet",instance:v,count:1,state:E},m.set(p,v)}}}function Qy(e,n){tn.X(e,n);var a=Is;if(a&&e){var c=us(a).hoistableScripts,m=Gs(e),p=c.get(m);p||(p=a.querySelector(Ja(m)),p||(e=b({src:e,async:!0},n),(n=pi.get(m))&&ju(e,n),p=a.createElement("script"),ye(p),Ce(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Zy(e,n){tn.M(e,n);var a=Is;if(a&&e){var c=us(a).hoistableScripts,m=Gs(e),p=c.get(m);p||(p=a.querySelector(Ja(m)),p||(e=b({src:e,async:!0,type:"module"},n),(n=pi.get(m))&&ju(e,n),p=a.createElement("script"),ye(p),Ce(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Cg(e,n,a,c){var m=(m=ft.current)?Oo(m):null;if(!m)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Hs(a.href),a=us(m).hoistableStyles,c=a.get(n),c||(c={type:"style",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Hs(a.href);var p=us(m).hoistableStyles,v=p.get(e);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,v),(p=m.querySelector(Za(e)))&&!p._p&&(v.instance=p,v.state.loading=5),pi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},pi.set(e,a),p||Jy(m,e,a,v.state))),n&&c===null)throw Error(s(528,""));return v}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Gs(a),a=us(m).hoistableScripts,c=a.get(n),c||(c={type:"script",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Hs(e){return'href="'+li(e)+'"'}function Za(e){return'link[rel="stylesheet"]['+e+"]"}function _g(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Jy(e,n,a,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ce(n,"link",a),ye(n),e.head.appendChild(n))}function Gs(e){return'[src="'+li(e)+'"]'}function Ja(e){return"script[async]"+e}function Mg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+li(a.href)+'"]');if(c)return n.instance=c,ye(c),c;var m=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ye(c),Ce(c,"style",m),ko(c,a.precedence,e),n.instance=c;case"stylesheet":m=Hs(a.href);var p=e.querySelector(Za(m));if(p)return n.state.loading|=4,n.instance=p,ye(p),p;c=_g(a),(m=pi.get(m))&&zu(c,m),p=(e.ownerDocument||e).createElement("link"),ye(p);var v=p;return v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),Ce(p,"link",c),n.state.loading|=4,ko(p,a.precedence,e),n.instance=p;case"script":return p=Gs(a.src),(m=e.querySelector(Ja(p)))?(n.instance=m,ye(m),m):(c=a,(m=pi.get(p))&&(c=b({},a),ju(c,m)),e=e.ownerDocument||e,m=e.createElement("script"),ye(m),Ce(m,"link",c),e.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ko(c,a.precedence,e));return n.instance}function ko(e,n,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===n)p=E;else if(p!==m)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function zu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ju(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Lo=null;function Dg(e,n,a){if(Lo===null){var c=new Map,m=Lo=new Map;m.set(a,c)}else m=Lo,c=m.get(a),c||(c=new Map,m.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),m=0;m<a.length;m++){var p=a[m];if(!(p[ga]||p[xe]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(n)||"";v=e+v;var E=c.get(v);E?E.push(p):c.set(v,[p])}}return c}function Ng(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function tv(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Rg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ev(e,n,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Hs(c.href),p=n.querySelector(Za(m));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Bo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=p,ye(p);return}p=n.ownerDocument||n,c=_g(c),(m=pi.get(m))&&zu(c,m),p=p.createElement("link"),ye(p);var v=p;v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),Ce(p,"link",c),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Bo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Pu=0;function iv(e,n){return e.stylesheets&&e.count===0&&zo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&zo(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&Pu===0&&(Pu=62500*Fy());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zo(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>Pu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fo=null;function zo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fo=new Map,n.forEach(nv,e),Fo=null,Bo.call(e))}function nv(e,n){if(!(n.state.loading&4)){var a=Fo.get(e);if(a)var c=a.get(null);else{a=new Map,Fo.set(e,a);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}m=n.instance,v=m.getAttribute("data-precedence"),p=a.get(v)||c,p===c&&a.set(null,m),a.set(v,m),this.count++,c=Bo.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),n.state.loading|=4}}var tr={$$typeof:_,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function sv(e,n,a,c,m,p,v,E,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ll(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.hiddenUpdates=Ll(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Og(e,n,a,c,m,p,v,E,D,P,V,q){return e=new sv(e,n,a,v,D,P,V,q,E),n=1,p===!0&&(n|=24),p=We(3,null,null,n),e.current=p,p.stateNode=e,n=yc(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:n},xc(p),e}function kg(e){return e?(e=As,e):As}function Lg(e,n,a,c,m,p){m=kg(m),c.context===null?c.context=m:c.pendingContext=m,c=fn(n),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=mn(e,c,n),a!==null&&(Ie(a,e,n),Oa(a,e,n))}function Bg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Uu(e,n){Bg(e,n),(e=e.alternate)&&Bg(e,n)}function Fg(e){if(e.tag===13||e.tag===31){var n=Un(e,67108864);n!==null&&Ie(n,e,67108864),Uu(e,67108864)}}function zg(e){if(e.tag===13||e.tag===31){var n=ei();n=Bl(n);var a=Un(e,n);a!==null&&Ie(a,e,n),Uu(e,n)}}var jo=!0;function av(e,n,a,c){var m=O.T;O.T=null;var p=I.p;try{I.p=2,Iu(e,n,a,c)}finally{I.p=p,O.T=m}}function rv(e,n,a,c){var m=O.T;O.T=null;var p=I.p;try{I.p=8,Iu(e,n,a,c)}finally{I.p=p,O.T=m}}function Iu(e,n,a,c){if(jo){var m=Hu(c);if(m===null)_u(e,n,c,Po,a),Pg(e,c);else if(lv(m,e,n,a,c))c.stopPropagation();else if(Pg(e,c),n&4&&-1<ov.indexOf(e)){for(;m!==null;){var p=cs(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Bn(p.pendingLanes);if(v!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var D=1<<31-$e(v);E.entanglements[1]|=D,v&=~D}Mi(p),(kt&6)===0&&(wo=Xe()+500,$a(0))}}break;case 31:case 13:E=Un(p,2),E!==null&&Ie(E,p,2),So(),Uu(p,2)}if(p=Hu(c),p===null&&_u(e,n,c,Po,a),p===m)break;m=p}m!==null&&c.stopPropagation()}else _u(e,n,c,null,a)}}function Hu(e){return e=Vl(e),Gu(e)}var Po=null;function Gu(e){if(Po=null,e=ls(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=l(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Po=e,null}function jg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(X0()){case Yh:return 2;case Xh:return 8;case _r:case q0:return 32;case qh:return 268435456;default:return 32}default:return 32}}var Vu=!1,Tn=null,Cn=null,_n=null,er=new Map,ir=new Map,Mn=[],ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pg(e,n){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":er.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(n.pointerId)}}function nr(e,n,a,c,m,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},n!==null&&(n=cs(n),n!==null&&Fg(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),e)}function lv(e,n,a,c,m){switch(n){case"focusin":return Tn=nr(Tn,e,n,a,c,m),!0;case"dragenter":return Cn=nr(Cn,e,n,a,c,m),!0;case"mouseover":return _n=nr(_n,e,n,a,c,m),!0;case"pointerover":var p=m.pointerId;return er.set(p,nr(er.get(p)||null,e,n,a,c,m)),!0;case"gotpointercapture":return p=m.pointerId,ir.set(p,nr(ir.get(p)||null,e,n,a,c,m)),!0}return!1}function Ug(e){var n=ls(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=l(a),n!==null){e.blockedOn=n,Jh(e.priority,function(){zg(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Jh(e.priority,function(){zg(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Hu(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);Gl=c,a.target.dispatchEvent(c),Gl=null}else return n=cs(a),n!==null&&Fg(n),e.blockedOn=a,!1;n.shift()}return!0}function Ig(e,n,a){Uo(e)&&a.delete(n)}function cv(){Vu=!1,Tn!==null&&Uo(Tn)&&(Tn=null),Cn!==null&&Uo(Cn)&&(Cn=null),_n!==null&&Uo(_n)&&(_n=null),er.forEach(Ig),ir.forEach(Ig)}function Io(e,n){e.blockedOn===n&&(e.blockedOn=null,Vu||(Vu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,cv)))}var Ho=null;function Hg(e){Ho!==e&&(Ho=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Ho===e&&(Ho=null);for(var n=0;n<e.length;n+=3){var a=e[n],c=e[n+1],m=e[n+2];if(typeof c!="function"){if(Gu(c||a)===null)continue;break}var p=cs(a);p!==null&&(e.splice(n,3),n-=3,Hc(p,{pending:!0,data:m,method:a.method,action:c},c,m))}}))}function Vs(e){function n(D){return Io(D,e)}Tn!==null&&Io(Tn,e),Cn!==null&&Io(Cn,e),_n!==null&&Io(_n,e),er.forEach(n),ir.forEach(n);for(var a=0;a<Mn.length;a++){var c=Mn[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Mn.length&&(a=Mn[0],a.blockedOn===null);)Ug(a),a.blockedOn===null&&Mn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var m=a[c],p=a[c+1],v=m[Be]||null;if(typeof p=="function")v||Hg(a);else if(v){var E=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[Be]||null)E=v.formAction;else if(Gu(m)!==null)continue}else E=v.action;typeof E=="function"?a[c+1]=E:(a.splice(c,3),c-=3),Hg(a)}}}function Gg(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Yu(e){this._internalRoot=e}Go.prototype.render=Yu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,c=ei();Lg(a,c,e,n,null,null)},Go.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Lg(e.current,2,null,e,null,null),So(),n[os]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var n=Zh();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Mn.length&&n!==0&&n<Mn[a].priority;a++);Mn.splice(a,0,e),a===0&&Ug(e)}};var Vg=t.version;if(Vg!=="19.2.4")throw Error(s(527,Vg,"19.2.4"));I.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var uv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vo.isDisabled&&Vo.supportsFiber)try{da=Vo.inject(uv),qe=Vo}catch{}}return ar.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,c="",m=Qf,p=Zf,v=Jf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Og(e,1,!1,null,null,a,c,null,m,p,v,Gg),e[os]=n.current,Cu(e),new Yu(n)},ar.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var c=!1,m="",p=Qf,v=Zf,E=Jf,D=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Og(e,1,!0,n,a??null,c,m,D,p,v,E,Gg),n.context=kg(null),a=n.current,c=ei(),c=Bl(c),m=fn(c),m.callback=null,mn(a,m,c),a=c,n.current.lanes=a,ma(n,a),Mi(n),e[os]=n.current,Cu(e),new Go(n)},ar.version="19.2.4",ar}var ip;function Av(){if(ip)return Ku.exports;ip=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Ku.exports=vv(),Ku.exports}var wv=Av();function xv(h,t){if(h.match(/^[a-z]+:\/\//i))return h;if(h.match(/^\/\//))return window.location.protocol+h;if(h.match(/^[a-z]+:/i))return h;const i=document.implementation.createHTMLDocument(),s=i.createElement("base"),r=i.createElement("a");return i.head.appendChild(s),i.body.appendChild(r),t&&(s.href=t),r.href=h,r.href}const Sv=(()=>{let h=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(h+=1,`u${t()}${h}`)})();function On(h){const t=[];for(let i=0,s=h.length;i<s;i++)t.push(h[i]);return t}let Ys=null;function Gp(h={}){return Ys||(h.includeStyleProperties?(Ys=h.includeStyleProperties,Ys):(Ys=On(window.getComputedStyle(document.documentElement)),Ys))}function sl(h,t){const s=(h.ownerDocument.defaultView||window).getComputedStyle(h).getPropertyValue(t);return s?parseFloat(s.replace("px","")):0}function Ev(h){const t=sl(h,"border-left-width"),i=sl(h,"border-right-width");return h.clientWidth+t+i}function Tv(h){const t=sl(h,"border-top-width"),i=sl(h,"border-bottom-width");return h.clientHeight+t+i}function Vp(h,t={}){const i=t.width||Ev(h),s=t.height||Tv(h);return{width:i,height:s}}function Cv(){let h,t;try{t=process}catch{}const i=t&&t.env?t.env.devicePixelRatio:null;return i&&(h=parseInt(i,10),Number.isNaN(h)&&(h=1)),h||window.devicePixelRatio||1}const ii=16384;function _v(h){(h.width>ii||h.height>ii)&&(h.width>ii&&h.height>ii?h.width>h.height?(h.height*=ii/h.width,h.width=ii):(h.width*=ii/h.height,h.height=ii):h.width>ii?(h.height*=ii/h.width,h.width=ii):(h.width*=ii/h.height,h.height=ii))}function al(h){return new Promise((t,i)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>t(s))})},s.onerror=i,s.crossOrigin="anonymous",s.decoding="async",s.src=h})}async function Mv(h){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(h)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Dv(h,t,i){const s="http://www.w3.org/2000/svg",r=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${i}`),r.setAttribute("viewBox",`0 0 ${t} ${i}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),r.appendChild(o),o.appendChild(h),Mv(r)}const Ye=(h,t)=>{if(h instanceof t)return!0;const i=Object.getPrototypeOf(h);return i===null?!1:i.constructor.name===t.name||Ye(i,t)};function Nv(h){const t=h.getPropertyValue("content");return`${h.cssText} content: '${t.replace(/'|"/g,"")}';`}function Rv(h,t){return Gp(t).map(i=>{const s=h.getPropertyValue(i),r=h.getPropertyPriority(i);return`${i}: ${s}${r?" !important":""};`}).join(" ")}function Ov(h,t,i,s){const r=`.${h}:${t}`,o=i.cssText?Nv(i):Rv(i,s);return document.createTextNode(`${r}{${o}}`)}function np(h,t,i,s){const r=window.getComputedStyle(h,i),o=r.getPropertyValue("content");if(o===""||o==="none")return;const l=Sv();try{t.className=`${t.className} ${l}`}catch{return}const u=document.createElement("style");u.appendChild(Ov(l,i,r,s)),t.appendChild(u)}function kv(h,t,i){np(h,t,":before",i),np(h,t,":after",i)}const sp="application/font-woff",ap="image/jpeg",Lv={woff:sp,woff2:sp,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ap,jpeg:ap,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Bv(h){const t=/\.([^./]*?)$/g.exec(h);return t?t[1]:""}function _h(h){const t=Bv(h).toLowerCase();return Lv[t]||""}function Fv(h){return h.split(/,/)[1]}function uh(h){return h.search(/^(data:)/)!==-1}function zv(h,t){return`data:${t};base64,${h}`}async function Yp(h,t,i){const s=await fetch(h,t);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const r=await s.blob();return new Promise((o,l)=>{const u=new FileReader;u.onerror=l,u.onloadend=()=>{try{o(i({res:s,result:u.result}))}catch(d){l(d)}},u.readAsDataURL(r)})}const Ju={};function jv(h,t,i){let s=h.replace(/\?.*/,"");return i&&(s=h),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),t?`[${t}]${s}`:s}async function Mh(h,t,i){const s=jv(h,t,i.includeQueryParams);if(Ju[s]!=null)return Ju[s];i.cacheBust&&(h+=(/\?/.test(h)?"&":"?")+new Date().getTime());let r;try{const o=await Yp(h,i.fetchRequestInit,({res:l,result:u})=>(t||(t=l.headers.get("Content-Type")||""),Fv(u)));r=zv(o,t)}catch(o){r=i.imagePlaceholder||"";let l=`Failed to fetch resource: ${h}`;o&&(l=typeof o=="string"?o:o.message),l&&console.warn(l)}return Ju[s]=r,r}async function Pv(h){const t=h.toDataURL();return t==="data:,"?h.cloneNode(!1):al(t)}async function Uv(h,t){if(h.currentSrc){const o=document.createElement("canvas"),l=o.getContext("2d");o.width=h.clientWidth,o.height=h.clientHeight,l?.drawImage(h,0,0,o.width,o.height);const u=o.toDataURL();return al(u)}const i=h.poster,s=_h(i),r=await Mh(i,s,t);return al(r)}async function Iv(h,t){var i;try{if(!((i=h?.contentDocument)===null||i===void 0)&&i.body)return await hl(h.contentDocument.body,t,!0)}catch{}return h.cloneNode(!1)}async function Hv(h,t){return Ye(h,HTMLCanvasElement)?Pv(h):Ye(h,HTMLVideoElement)?Uv(h,t):Ye(h,HTMLIFrameElement)?Iv(h,t):h.cloneNode(Xp(h))}const Gv=h=>h.tagName!=null&&h.tagName.toUpperCase()==="SLOT",Xp=h=>h.tagName!=null&&h.tagName.toUpperCase()==="SVG";async function Vv(h,t,i){var s,r;if(Xp(t))return t;let o=[];return Gv(h)&&h.assignedNodes?o=On(h.assignedNodes()):Ye(h,HTMLIFrameElement)&&(!((s=h.contentDocument)===null||s===void 0)&&s.body)?o=On(h.contentDocument.body.childNodes):o=On(((r=h.shadowRoot)!==null&&r!==void 0?r:h).childNodes),o.length===0||Ye(h,HTMLVideoElement)||await o.reduce((l,u)=>l.then(()=>hl(u,i)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function Yv(h,t,i){const s=t.style;if(!s)return;const r=window.getComputedStyle(h);r.cssText?(s.cssText=r.cssText,s.transformOrigin=r.transformOrigin):Gp(i).forEach(o=>{let l=r.getPropertyValue(o);o==="font-size"&&l.endsWith("px")&&(l=`${Math.floor(parseFloat(l.substring(0,l.length-2)))-.1}px`),Ye(h,HTMLIFrameElement)&&o==="display"&&l==="inline"&&(l="block"),o==="d"&&t.getAttribute("d")&&(l=`path(${t.getAttribute("d")})`),s.setProperty(o,l,r.getPropertyPriority(o))})}function Xv(h,t){Ye(h,HTMLTextAreaElement)&&(t.innerHTML=h.value),Ye(h,HTMLInputElement)&&t.setAttribute("value",h.value)}function qv(h,t){if(Ye(h,HTMLSelectElement)){const s=Array.from(t.children).find(r=>h.value===r.getAttribute("value"));s&&s.setAttribute("selected","")}}function $v(h,t,i){return Ye(t,Element)&&(Yv(h,t,i),kv(h,t,i),Xv(h,t),qv(h,t)),t}async function Kv(h,t){const i=h.querySelectorAll?h.querySelectorAll("use"):[];if(i.length===0)return h;const s={};for(let o=0;o<i.length;o++){const u=i[o].getAttribute("xlink:href");if(u){const d=h.querySelector(u),f=document.querySelector(u);!d&&f&&!s[u]&&(s[u]=await hl(f,t,!0))}}const r=Object.values(s);if(r.length){const o="http://www.w3.org/1999/xhtml",l=document.createElementNS(o,"svg");l.setAttribute("xmlns",o),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const u=document.createElementNS(o,"defs");l.appendChild(u);for(let d=0;d<r.length;d++)u.appendChild(r[d]);h.appendChild(l)}return h}async function hl(h,t,i){return!i&&t.filter&&!t.filter(h)?null:Promise.resolve(h).then(s=>Hv(s,t)).then(s=>Vv(h,s,t)).then(s=>$v(h,s,t)).then(s=>Kv(s,t))}const qp=/url\((['"]?)([^'"]+?)\1\)/g,Wv=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Qv=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Zv(h){const t=h.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Jv(h){const t=[];return h.replace(qp,(i,s,r)=>(t.push(r),i)),t.filter(i=>!uh(i))}async function tA(h,t,i,s,r){try{const o=i?xv(t,i):t,l=_h(t);let u;return r||(u=await Mh(o,l,s)),h.replace(Zv(t),`$1${u}$3`)}catch{}return h}function eA(h,{preferredFontFormat:t}){return t?h.replace(Qv,i=>{for(;;){const[s,,r]=Wv.exec(i)||[];if(!r)return"";if(r===t)return`src: ${s};`}}):h}function $p(h){return h.search(qp)!==-1}async function Kp(h,t,i){if(!$p(h))return h;const s=eA(h,i);return Jv(s).reduce((o,l)=>o.then(u=>tA(u,l,t,i)),Promise.resolve(s))}async function Xs(h,t,i){var s;const r=(s=t.style)===null||s===void 0?void 0:s.getPropertyValue(h);if(r){const o=await Kp(r,null,i);return t.style.setProperty(h,o,t.style.getPropertyPriority(h)),!0}return!1}async function iA(h,t){await Xs("background",h,t)||await Xs("background-image",h,t),await Xs("mask",h,t)||await Xs("-webkit-mask",h,t)||await Xs("mask-image",h,t)||await Xs("-webkit-mask-image",h,t)}async function nA(h,t){const i=Ye(h,HTMLImageElement);if(!(i&&!uh(h.src))&&!(Ye(h,SVGImageElement)&&!uh(h.href.baseVal)))return;const s=i?h.src:h.href.baseVal,r=await Mh(s,_h(s),t);await new Promise((o,l)=>{h.onload=o,h.onerror=t.onImageErrorHandler?(...d)=>{try{o(t.onImageErrorHandler(...d))}catch(f){l(f)}}:l;const u=h;u.decode&&(u.decode=o),u.loading==="lazy"&&(u.loading="eager"),i?(h.srcset="",h.src=r):h.href.baseVal=r})}async function sA(h,t){const s=On(h.childNodes).map(r=>Wp(r,t));await Promise.all(s).then(()=>h)}async function Wp(h,t){Ye(h,Element)&&(await iA(h,t),await nA(h,t),await sA(h,t))}function aA(h,t){const{style:i}=h;t.backgroundColor&&(i.backgroundColor=t.backgroundColor),t.width&&(i.width=`${t.width}px`),t.height&&(i.height=`${t.height}px`);const s=t.style;return s!=null&&Object.keys(s).forEach(r=>{i[r]=s[r]}),h}const rp={};async function op(h){let t=rp[h];if(t!=null)return t;const s=await(await fetch(h)).text();return t={url:h,cssText:s},rp[h]=t,t}async function lp(h,t){let i=h.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,o=(i.match(/url\([^)]+\)/g)||[]).map(async l=>{let u=l.replace(s,"$1");return u.startsWith("https://")||(u=new URL(u,h.url).href),Yp(u,t.fetchRequestInit,({result:d})=>(i=i.replace(l,`url(${d})`),[l,d]))});return Promise.all(o).then(()=>i)}function cp(h){if(h==null)return[];const t=[],i=/(\/\*[\s\S]*?\*\/)/gi;let s=h.replace(i,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=r.exec(s);if(d===null)break;t.push(d[0])}s=s.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(l,"gi");for(;;){let d=o.exec(s);if(d===null){if(d=u.exec(s),d===null)break;o.lastIndex=u.lastIndex}else u.lastIndex=o.lastIndex;t.push(d[0])}return t}async function rA(h,t){const i=[],s=[];return h.forEach(r=>{if("cssRules"in r)try{On(r.cssRules||[]).forEach((o,l)=>{if(o.type===CSSRule.IMPORT_RULE){let u=l+1;const d=o.href,f=op(d).then(g=>lp(g,t)).then(g=>cp(g).forEach(b=>{try{r.insertRule(b,b.startsWith("@import")?u+=1:r.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:b,error:y})}})).catch(g=>{console.error("Error loading remote css",g.toString())});s.push(f)}})}catch(o){const l=h.find(u=>u.href==null)||document.styleSheets[0];r.href!=null&&s.push(op(r.href).then(u=>lp(u,t)).then(u=>cp(u).forEach(d=>{l.insertRule(d,l.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",o)}}),Promise.all(s).then(()=>(h.forEach(r=>{if("cssRules"in r)try{On(r.cssRules||[]).forEach(o=>{i.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${r.href}`,o)}}),i))}function oA(h){return h.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>$p(t.style.getPropertyValue("src")))}async function lA(h,t){if(h.ownerDocument==null)throw new Error("Provided element is not within a Document");const i=On(h.ownerDocument.styleSheets),s=await rA(i,t);return oA(s)}function Qp(h){return h.trim().replace(/["']/g,"")}function cA(h){const t=new Set;function i(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(o=>{t.add(Qp(o))}),Array.from(s.children).forEach(o=>{o instanceof HTMLElement&&i(o)})}return i(h),t}async function uA(h,t){const i=await lA(h,t),s=cA(h);return(await Promise.all(i.filter(o=>s.has(Qp(o.style.fontFamily))).map(o=>{const l=o.parentStyleSheet?o.parentStyleSheet.href:null;return Kp(o.cssText,l,t)}))).join(`
`)}async function hA(h,t){const i=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await uA(h,t);if(i){const s=document.createElement("style"),r=document.createTextNode(i);s.appendChild(r),h.firstChild?h.insertBefore(s,h.firstChild):h.appendChild(s)}}async function dA(h,t={}){const{width:i,height:s}=Vp(h,t),r=await hl(h,t,!0);return await hA(r,t),await Wp(r,t),aA(r,t),await Dv(r,i,s)}async function fA(h,t={}){const{width:i,height:s}=Vp(h,t),r=await dA(h,t),o=await al(r),l=document.createElement("canvas"),u=l.getContext("2d"),d=t.pixelRatio||Cv(),f=t.canvasWidth||i,g=t.canvasHeight||s;return l.width=f*d,l.height=g*d,t.skipAutoScale||_v(l),l.style.width=`${f}`,l.style.height=`${g}`,t.backgroundColor&&(u.fillStyle=t.backgroundColor,u.fillRect(0,0,l.width,l.height)),u.drawImage(o,0,0,l.width,l.height),l}async function qs(h,t={}){return(await fA(h,t)).toDataURL()}const rr=({icon:h,label:t,onClick:i,isImage:s=!1})=>T.jsxs("button",{onClick:i,className:"flex flex-col items-center justify-center p-3 md:p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 aspect-square group border border-transparent hover:border-gray-200",children:[T.jsx("div",{className:"mb-2 md:mb-4 h-10 w-10 md:h-16 md:w-16 flex items-center justify-center",children:s?T.jsx("img",{src:h,alt:t,className:"max-h-full max-w-full object-contain"}):T.jsx("img",{src:h,alt:t,className:"max-h-full max-w-full object-contain"})}),T.jsx("span",{className:"text-[8px] md:text-xs font-bold tracking-wider text-gray-900 uppercase text-center group-hover:text-black leading-tight",children:t})]}),mA=({setView:h})=>T.jsxs("div",{className:"w-full max-w-2xl mt-4 md:mt-12",children:[T.jsx("h3",{className:"text-center text-xs md:text-sm font-bold text-gray-700 tracking-wider mb-6 md:mb-12 uppercase",children:"CUSTOMIZE IT YOUR WAY"}),T.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-6",children:[T.jsx(rr,{icon:"UI/icons/upload.svg",label:"UPLOAD YOUR OWN IMAGE",onClick:()=>h("upload")}),T.jsx(rr,{icon:"UI/icons/text.png",label:"TEXT",isImage:!0,onClick:()=>h("text")}),T.jsx(rr,{icon:"UI/icons/monogram.svg",label:"MONOGRAM",onClick:()=>h("monogram")}),T.jsx(rr,{icon:"UI/icons/snow.svg",label:"HOLIDAY DESIGNS",onClick:()=>{}}),T.jsx(rr,{icon:"UI/icons/gallery.svg",label:"GALLERY",onClick:()=>h("gallery")})]})]}),gA=({setView:h,textInput:t,setTextInput:i,fonts:s,selectedFont:r,setSelectedFont:o,activeTab:l,isVertical:u,setIsVertical:d})=>T.jsxs("div",{className:"flex flex-col h-full w-full max-w-2xl",children:[T.jsxs("div",{className:"hidden md:flex items-center justify-center space-x-4 mb-8",children:[T.jsx("button",{onClick:()=>h("upload"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/upload.svg",className:"w-10 h-10",alt:"Upload"})}),T.jsx("button",{className:"p-4 bg-white rounded-xl shadow-sm border-2 border-brand-blue",children:T.jsx("img",{src:"UI/icons/text.png",className:"w-10 h-10 object-contain",alt:"Text"})}),T.jsx("button",{onClick:()=>h("monogram"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/monogram.svg",className:"w-10 h-10",alt:"Monogram"})}),T.jsx("button",{onClick:()=>h("main"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/gallery.svg",className:"w-10 h-10",alt:"Gallery"})})]}),T.jsx("div",{className:"hidden md:block text-center mb-8",children:T.jsx("span",{className:"text-xs font-bold tracking-wider text-gray-900 uppercase block mb-1",children:"TEXT"})}),T.jsxs("button",{onClick:()=>h("main"),className:"flex items-center text-black font-bold text-xs md:text-sm tracking-widest uppercase mb-4 md:mb-6 hover:text-gray-600 transition-colors",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"BACK"]}),T.jsxs("div",{className:"bg-white rounded-lg shadow-sm  mb-6 border border-gray-200 flex items-center flex-shrink-0",children:[T.jsx("textarea",{value:t,onChange:f=>{const g=f.target.value;l==="FRONT"&&g.split(`
`).length>4||i(g)},placeholder:"TYPE TEXT HERE",maxLength:l==="FRONT"?150:800,rows:1,className:"flex-1 w-full px-2 md:px-4 py-2 text-center text-sm md:text-base text-gray-700 placeholder-gray-300 focus:outline-none resize-none min-h-[44px] md:min-h-[48px]",onFocus:()=>{setTimeout(()=>{const f=document.getElementById("mobile-color-trigger");f&&window.innerWidth<768&&f.scrollIntoView({behavior:"smooth",block:"start"})},350)},style:s.find(f=>f.name===r)?.style}),T.jsx("div",{className:"text-green-500 px-2 pt-2",children:t&&T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),l==="BACK"&&T.jsxs("div",{className:"mb-6 flex flex-col items-start w-full px-1",children:[T.jsxs("span",{className:"text-sm font-bold text-gray-800 mb-2",children:["Orientation: ",T.jsx("span",{className:"font-normal",children:u?"Vertical":"Horizontal"})]}),T.jsxs("div",{className:"flex space-x-3",children:[T.jsx("button",{onClick:()=>d(!0),className:`w-12 h-12 rounded flex items-center justify-center transition-all bg-white
                                ${u?"border-2 border-black shadow-sm":"border border-gray-300 hover:border-gray-400"}
                            `,"aria-label":"Vertical Text",children:T.jsx("span",{className:"text-xs font-medium text-gray-800 transform rotate-90 leading-none",children:"Aaa"})}),T.jsx("button",{onClick:()=>d(!1),className:`w-12 h-12 rounded flex items-center justify-center transition-all bg-white
                                ${u?"border border-gray-300 hover:border-gray-400":"border-2 border-black shadow-sm"}
                            `,"aria-label":"Horizontal Text",children:T.jsx("span",{className:"text-xs font-medium text-gray-800 leading-none",children:"Aaa"})})]})]}),T.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar max-h-[50vh] md:max-h-full",children:T.jsx("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:s.map(f=>T.jsx("button",{onClick:()=>o(f.name),className:`p-3 md:p-6 bg-white rounded-lg border transition-all duration-200 flex items-center justify-center h-14 md:h-20
                                ${r===f.name?"border-brand-blue ring-1 ring-brand-blue shadow-md":"border-transparent shadow-sm hover:shadow hover:border-brand-blue text-gray-400 hover:text-brand-blue"}
                            `,children:T.jsx("span",{className:`text-xs md:text-base lg:text-lg ${r===f.name?"text-brand-blue":""}`,style:f.style,children:f.name})},f.name))})}),T.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #cbd5e1;
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #94a3b8;
                }
            `})]}),pA=({setView:h,monogramInput:t,setMonogramInput:i,monogramStyles:s,selectedMonogram:r,setSelectedMonogram:o})=>T.jsxs("div",{className:"flex flex-col h-full w-full max-w-2xl",children:[T.jsxs("div",{className:"hidden md:flex items-center justify-center space-x-4 mb-8",children:[T.jsx("button",{onClick:()=>h("upload"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/upload.svg",className:"w-10 h-10",alt:"Upload"})}),T.jsx("button",{onClick:()=>h("text"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/text.png",className:"w-10 h-10 object-contain",alt:"Text"})}),T.jsx("button",{className:"p-4 bg-white rounded-xl shadow-sm border-2 border-brand-blue",children:T.jsx("img",{src:"UI/icons/monogram.svg",className:"w-10 h-10",alt:"Monogram"})}),T.jsx("button",{onClick:()=>h("main"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/gallery.svg",className:"w-10 h-10",alt:"Gallery"})})]}),T.jsx("div",{className:"hidden md:block text-center mb-8",children:T.jsx("span",{className:"text-xs font-bold tracking-wider text-gray-900 uppercase block mb-1",children:"MONOGRAM"})}),T.jsxs("button",{onClick:()=>h("main"),className:"flex items-center text-black font-bold text-xs md:text-sm tracking-widest uppercase mb-4 md:mb-6 hover:text-gray-600 transition-colors",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"BACK"]}),T.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-2 mb-6 border border-gray-200 flex items-center flex-shrink-0",children:[T.jsx("input",{type:"text",value:t,onChange:l=>i(l.target.value.toUpperCase()),placeholder:s.find(l=>l.name===r)?.maxLength===1?"ONE LETTER ONLY":s.find(l=>l.name===r)?.useCircleGlyphs||s.find(l=>l.name===r)?.useNGramGlyphs?"AT LEAST 2 LETTERS":"ENTER YOUR INITIALS",maxLength:s.find(l=>l.name===r)?.maxLength||3,onFocus:()=>{setTimeout(()=>{const l=document.getElementById("mobile-color-trigger");l&&window.innerWidth<768&&l.scrollIntoView({behavior:"smooth",block:"start"})},350)},className:"flex-1 w-full px-2 md:px-4 py-2 text-center text-sm md:text-base text-gray-700 font-bold placeholder-gray-300 focus:outline-none uppercase"}),T.jsx("div",{className:"text-green-500 px-2",children:t&&T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),s.find(l=>l.name===r)?.maxLength===1&&t.length>1&&T.jsx("div",{className:"text-red-500 text-xs font-bold text-center -mt-4 mb-4 flex-shrink-0",children:"ONLY FIRST LETTER WILL BE SHOWN"}),(s.find(l=>l.name===r)?.useCircleGlyphs||s.find(l=>l.name===r)?.useNGramGlyphs)&&t.length===1&&T.jsx("div",{className:"text-red-500 text-xs font-bold text-center -mt-4 mb-4 flex-shrink-0",children:"PLEASE ENTER AT LEAST 2 LETTERS"}),T.jsxs("div",{className:"bg-gray-100 rounded p-2 md:p-3 mb-4 md:mb-6 text-[10px] md:text-xs text-gray-600 flex-shrink-0",children:[T.jsx("span",{className:"font-bold",children:"Note:"})," Monograms with three initials display the last name initial in the center."]}),T.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar max-h-[50vh] md:max-h-full",children:T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:s.map(l=>{const u=l.useCircleGlyphs,d=l.useNGramGlyphs,f=l.maxLength===1;let g="RJM",b=l.style?.fontFamily;return u?(g="rJ#",b="Three Character Circle"):d?(g="?rJ#",b="Three Character N-Gram"):f&&(g="J"),T.jsx("button",{onClick:()=>o(l.name),className:`p-4 md:p-8 bg-white rounded-lg border transition-all duration-200 flex items-center justify-center h-24 md:h-36
                                    ${r===l.name?"border-brand-blue ring-1 ring-brand-blue shadow-md":"border-transparent shadow-sm hover:shadow hover:border-brand-blue text-gray-400 hover:text-brand-blue"}
                                `,children:T.jsx("span",{className:`text-4xl md:text-5xl lg:text-7xl ${r===l.name?"text-brand-blue":""}`,style:{...(({fontSize:y,...A})=>A)(l.style),fontFamily:b},children:g})},l.name)})})}),T.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #cbd5e1;
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #94a3b8;
                }
            `})]}),up=[{id:"nature",name:"NATURE",icon:"Tree"},{id:"animals",name:"ANIMALS",icon:"Bear"},{id:"symbols",name:"SYMBOLS",icon:"Star"},{id:"celebration",name:"CELEBRATION",icon:"Celebration"},{id:"family",name:"FAMILY",icon:"Family"},{id:"holiday",name:"HOLIDAY",icon:"Holiday"},{id:"zodiac",name:"ZODIAC",icon:"Zodiac"}],hp={nature:[{id:"cat_nature",name:"Cat",src:"gallery/nature/Cat.svg"},{id:"forest",name:"Forest",src:"gallery/nature/forest-svgrepo-com.svg"},{id:"grass",name:"Grass Patch",src:"gallery/nature/grass-patch-svgrepo-com.svg"},{id:"moon",name:"Misty Moon",src:"gallery/nature/misty-moon-svgrepo-com.svg"},{id:"mountains",name:"Mountains",src:"gallery/nature/mountains-svgrepo-com.svg"},{id:"woods-badge",name:"Woods Badge",src:"gallery/nature/nature-badge-woods-svgrepo-com.svg"},{id:"rainbow",name:"Rainbow",src:"gallery/nature/nature-rainbow-svgrepo-com.svg"},{id:"nature",name:"Nature",src:"gallery/nature/nature-svgrepo-com.svg"},{id:"bird",name:"Bird",src:"gallery/nature/Bird.svg"},{id:"butterfly",name:"Butterfly",src:"gallery/nature/Butterfly.svg"},{id:"charity_water",name:"Charity Water",src:"gallery/nature/CharityWater.svg"},{id:"comet",name:"Comet",src:"gallery/nature/Comet.svg"},{id:"mountains_2",name:"Mountains II",src:"gallery/nature/Mountains.svg"},{id:"paw",name:"Paw",src:"gallery/nature/paw.svg"}],animals:[{id:"pawprint",name:"Pawprint",src:"gallery/animals/canine-pawprint-svgrepo-com.svg"},{id:"chicken",name:"Chicken",src:"gallery/animals/chicken-svgrepo-com.svg"},{id:"grasshopper",name:"Grasshopper",src:"gallery/animals/grasshopper-sitting-svgrepo-com.svg"},{id:"pig",name:"Pig",src:"gallery/animals/pig-with-round-tail-svgrepo-com.svg"},{id:"cobra",name:"Cobra",src:"gallery/animals/poisonous-cobra-svgrepo-com.svg"},{id:"spider",name:"Spider",src:"gallery/animals/poisonous-spider-svgrepo-com.svg"},{id:"anteater",name:"Anteater",src:"gallery/animals/sitting-anteater-svgrepo-com.svg"},{id:"cat",name:"Cat",src:"gallery/animals/sitting-cat-svgrepo-com.svg"},{id:"rabbit",name:"Rabbit",src:"gallery/animals/sitting-rabbit-svgrepo-com.svg"}],symbols:[{id:"heart",name:"Heart",src:"gallery/symbols/heart-love-romance-svgrepo-com.svg"},{id:"money",name:"Money Bag",src:"gallery/symbols/money-bag-change-money-capital-svgrepo-com.svg"},{id:"network",name:"Network",src:"gallery/symbols/network-internet-web-svgrepo-com.svg"},{id:"ai",name:"AI",src:"gallery/symbols/smart-work-artificial-intelligence-ai-svgrepo-com.svg"},{id:"thumbsup",name:"Thumbs Up",src:"gallery/symbols/thumbs-up-up-yes-approve-svgrepo-com.svg"},{id:"yinyang",name:"Yin Yang",src:"gallery/symbols/yin-yang-balance-religion-wisdom-svgrepo-com.svg"}],celebration:[{id:"stethoscope",name:"Stethoscope",src:"gallery/celebration/HealthcareStethescope.svg"},{id:"bride",name:"Bride",src:"gallery/celebration/StanleyCreate_Graphics_Refresh_Bride.svg"},{id:"i_love_you",name:"I Love You",src:"gallery/celebration/ValentinesDay_ILoveYou.svg"}],family:[{id:"girl_dad",name:"Girl Dad",src:"gallery/family/GirlDad.svg"},{id:"mom_tattoo",name:"Mom Tattoo",src:"gallery/family/MomTattoo.svg"},{id:"tattoo",name:"Tattoo",src:"gallery/family/Tattoo.svg"}],holiday:[{id:"penguin",name:"Penguin",src:"gallery/holiday/StanleyCreate_Graphics_Refresh_Penguin.svg"},{id:"snowglobe",name:"Snowglobe",src:"gallery/holiday/StanleyCreate_Graphics_Refresh_Snowglobe.svg"},{id:"snowman",name:"Snowman",src:"gallery/holiday/StanleyCreate_Graphics_Refresh_Snowman.svg"},{id:"valentine_animals",name:"Valentine Animals",src:"gallery/holiday/ValentinesDay_Animals.svg"},{id:"sweethearts",name:"Sweethearts",src:"gallery/holiday/ValentinesDay_Sweethearts.svg"},{id:"valentine_tree",name:"Valentine Tree",src:"gallery/holiday/ValentinesDay_Tree.svg"}],zodiac:[{id:"aquarius",name:"Aquarius",src:"gallery/zodiac/Zodiac_Aquarius.svg"},{id:"aries",name:"Aries",src:"gallery/zodiac/Zodiac_Aries.svg"},{id:"cancer",name:"Cancer",src:"gallery/zodiac/Zodiac_Cancer.svg"},{id:"capricorn",name:"Capricorn",src:"gallery/zodiac/Zodiac_Capricorn.svg"},{id:"gemini",name:"Gemini",src:"gallery/zodiac/Zodiac_Gemini.svg"},{id:"leo",name:"Leo",src:"gallery/zodiac/Zodiac_Leo.svg"},{id:"libra",name:"Libra",src:"gallery/zodiac/Zodiac_Libra.svg"},{id:"pisces",name:"Pisces",src:"gallery/zodiac/Zodiac_Pisces.svg"},{id:"sagittarius",name:"Sagittarius",src:"gallery/zodiac/Zodiac_Sagittarius.svg"},{id:"scorpio",name:"Scorpio",src:"gallery/zodiac/Zodiac_Scorpio.svg"},{id:"taurus",name:"Taurus",src:"gallery/zodiac/Zodiac_Taurus.svg"},{id:"virgo",name:"Virgo",src:"gallery/zodiac/Zodiac_Virgo.svg"}]},bA=({setView:h,setGraphic:t,selectedGraphic:i})=>{const[s,r]=Et.useState("categories"),[o,l]=Et.useState(null),u=g=>{l(g),r("icons");const b=document.getElementById("mobile-color-trigger");b&&window.innerWidth<768&&b.scrollIntoView({behavior:"smooth",block:"start"})},d=g=>{t({...g,scale:1});const b=document.getElementById("mobile-color-trigger");b&&window.innerWidth<768&&b.scrollIntoView({behavior:"smooth",block:"start"})},f=()=>{s==="icons"?(r("categories"),l(null)):h("main")};return T.jsxs("div",{className:"flex flex-col h-full w-full",children:[T.jsxs("div",{className:"hidden md:flex items-center justify-center space-x-4 mb-4",children:[T.jsx("button",{onClick:()=>h("upload"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/upload.svg",className:"w-10 h-10",alt:"Upload"})}),T.jsx("button",{onClick:()=>h("text"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/text.png",className:"w-10 h-10 object-contain",alt:"Text"})}),T.jsx("button",{onClick:()=>h("monogram"),className:"p-4 bg-white rounded-xl shadow-sm hover:bg-gray-50 transition-colors",children:T.jsx("img",{src:"UI/icons/monogram.svg",className:"w-10 h-10",alt:"Monogram"})}),T.jsx("button",{className:"p-4 bg-white rounded-xl shadow-sm border-2 border-brand-blue",children:T.jsx("img",{src:"UI/icons/gallery.svg",className:"w-10 h-10",alt:"Gallery"})})]}),T.jsx("div",{className:"hidden md:block text-center mb-8",children:T.jsx("span",{className:"text-xs font-bold tracking-wider text-gray-900 uppercase block mb-1",children:"GALLERY"})}),T.jsxs("button",{onClick:f,className:"flex items-center text-black font-bold text-sm mb-4 hover:text-gray-600 hover:underline self-start",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),s==="categories"?"BACK":"BACK TO CATEGORIES"]}),i&&!i.isUpload&&T.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsxs("span",{className:"text-xs font-bold text-gray-900 uppercase tracking-wider",children:["SELECTED: ",i.name]}),T.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[Math.round((i.scale||1)*100),"%"]})]}),T.jsx("input",{type:"range",min:"0.2",max:"1.0",step:"0.05",value:i.scale||1,onChange:g=>t({...i,scale:parseFloat(g.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#002C5F]"})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar max-h-[50vh] md:max-h-full",children:[s==="categories"&&T.jsx("div",{className:"grid grid-cols-2 gap-4",children:up.map(g=>T.jsxs("button",{onClick:()=>u(g.id),className:"aspect-square bg-white border border-gray-200 rounded-lg flex flex-col items-center justify-center p-4 hover:border-brand-blue hover:shadow-md transition-all group",children:[T.jsx("div",{className:"text-gray-400 group-hover:text-brand-blue mb-3 transition-colors",children:T.jsx("img",{src:hp[g.id]?.[0]?.src,alt:g.name,className:"w-12 h-12 object-contain"})}),T.jsx("span",{className:"text-sm font-bold text-gray-600 group-hover:text-brand-blue uppercase tracking-wider",children:g.name})]},g.id))}),s==="icons"&&o&&T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:up.find(g=>g.id===o)?.name}),T.jsx("div",{className:"grid grid-cols-3 gap-3",children:hp[o]?.map(g=>T.jsx("button",{onClick:()=>d(g),className:`aspect-square bg-white border rounded-md flex items-center justify-center p-2 transition-all
                                        ${i?.id===g.id?"border-brand-blue ring-1 ring-brand-blue":"border-gray-200 hover:border-brand-blue"}
                                    `,children:T.jsx("img",{src:g.src,alt:g.name,className:"w-full h-full object-contain"})},g.id))})]})]}),T.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: #f1f1f1;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #cbd5e1;
                    border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: #94a3b8;
                }
            `})]})},yA=({colors:h,selectedColor:t,setSelectedColor:i,isMobile:s})=>{const[r,o]=Et.useState(!1),l=h.find(u=>u.id===t);return T.jsxs(T.Fragment,{children:[s&&T.jsxs("button",{id:"mobile-color-trigger",onClick:()=>o(!0),className:"absolute top-2 right-2 md:hidden flex items-center bg-white rounded-full shadow-lg p-1 pr-2 border border-gray-200 z-30 transition-transform active:scale-95",children:[T.jsx("div",{className:`w-8 h-8 rounded-full ${l?.bg} ${l?.border||""} shadow-inner`}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),s&&r&&T.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[T.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>o(!1)}),T.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all",children:[T.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors z-10",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),T.jsxs("div",{className:"p-8 pt-10",children:[T.jsx("h3",{className:"text-xl font-bold text-[#002C5F] leading-tight mb-2 tracking-wide uppercase",children:"RAMBLER 16 OZ TRAVEL BOTTLE"}),T.jsx("hr",{className:"mb-6 opacity-20"}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsxs("p",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:["COLOR: ",T.jsx("span",{className:"text-black ml-1",children:l?.name})]}),T.jsx("div",{className:"flex flex-wrap gap-4",children:h.map(u=>T.jsx("button",{onClick:()=>i(u.id),className:`relative w-12 h-12 rounded-full ${u.bg} ${u.border||""} 
                                                    ring-2 ring-offset-4 transition-all duration-200
                                                    ${t===u.id?"ring-[#002C5F]":"ring-transparent"}
                                                `,"aria-label":`Select ${u.name} color`,children:t===u.id&&T.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white pointer-events-none"})},u.id))})]}),T.jsx("button",{onClick:()=>o(!1),className:"w-full bg-black text-white font-bold py-4 rounded-lg tracking-widest uppercase transition-all active:scale-[0.98] shadow-lg",children:"UPDATE"})]})]})]})]})]})},vA=({onRemove:h,onReview:t,isDisabled:i,isPreparing:s})=>{const r=i||s;return T.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 md:p-6 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-50",children:T.jsxs("div",{className:"max-w-md md:max-w-none mx-auto md:mx-0 md:ml-auto flex space-x-3 w-full md:w-auto px-4 md:pr-8",children:[T.jsx("button",{onClick:h,disabled:i||s,className:`flex-1 px-6 py-4 md:py-4 rounded-lg text-sm font-bold tracking-widest uppercase transition-colors
                    ${i||s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border-2 border-gray-200 text-gray-500 hover:border-red-500 hover:text-red-500"}`,children:"REMOVE"}),T.jsx("button",{onClick:t,disabled:r,className:`flex-1 px-6 py-4 md:py-4 rounded-lg text-sm font-bold tracking-widest uppercase transition-colors
                    ${r?"bg-gray-300 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:s?"PREPARING...":"REVIEW"})]})})},AA=({isOpen:h,onClose:t,onConfirm:i})=>{const[s,r]=Et.useState(!1);return h?T.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/50 p-4 animate-in fade-in duration-200",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]",children:[T.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors z-10",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),T.jsxs("div",{className:"p-6 md:p-8 flex flex-col h-full overflow-hidden",children:[T.jsx("h2",{className:"text-xl font-bold text-[#007db5] text-center uppercase tracking-wider mb-6",children:"Confirm This"}),T.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 mb-6 text-sm text-gray-600 leading-relaxed space-y-4 custom-scrollbar",children:[T.jsx("p",{children:"The submitted image and/or text is not unlawful, harmful, threatening, tortious, defamatory, vulgar, obscene, libelous, invasive of another's privacy, hateful, or racially, ethnically, or otherwise objectionable, does not infringe upon any patent, trademark, copyright, trade secret, or other proprietary rights of any third party (this includes but is not limited to sports teams and licensed university logos or slogans), and does not otherwise violate any of the rights or other categories listed in our FAQs. All personalized orders are subject to review. If any of the above conditions are violated, the entire order will be canceled."}),T.jsx("p",{children:"Once you submit your order, you cannot edit or modify it. Any changes to the imprint of your order must be made before the order ships."}),T.jsx("p",{children:"Personalized items are non-refundable and cannot be canceled after you place your order. All sales of personalized products are final."}),T.jsx("p",{children:"We do not offer personalization of our stainless steel drinkware or Yonder bottles."}),T.jsx("p",{children:"If you need assistance ordering custom drinkware, for example, if you want to place an order for products with a trademarked or copyrighted image for which you have permission, or if you have any questions, please contact our Outfitter team before placing your order."}),T.jsx("p",{children:"For company logos, please visit our Corporate Sales page for information and quotes."})]}),T.jsxs("label",{className:"flex items-start space-x-3 mb-8 cursor-pointer group",children:[T.jsx("div",{className:"flex items-center h-5 mt-0.5",children:T.jsx("input",{type:"checkbox",checked:s,onChange:o=>r(o.target.checked),className:"w-5 h-5 rounded border-gray-300 text-[#007db5] focus:ring-[#007db5] cursor-pointer transition-colors"})}),T.jsx("span",{className:"text-sm font-semibold text-gray-800 group-hover:text-black transition-colors",children:"I agree to these terms and conditions"})]}),T.jsxs("div",{className:"flex space-x-4",children:[T.jsx("button",{onClick:t,className:"flex-1 py-3 bg-[#007db5] text-white font-bold uppercase tracking-widest text-xs hover:bg-[#006da0] transition-colors rounded shadow-md",children:"Cancel"}),T.jsx("button",{onClick:i,disabled:!s,className:`flex-1 py-3 font-bold uppercase tracking-widest text-xs rounded transition-all shadow-md ${s?"bg-[#007db5] text-white hover:bg-[#006da0]":"bg-[#9CA3AF] text-white cursor-not-allowed"}`,children:"Accept"})]})]})]})}):null},wA=({onClose:h,onRequestClose:t,customization:i,selectedColor:s,selectedFont:r,selectedMonogramBySide:o,frontImage:l,backImage:u,frontDesignImage:d,backDesignImage:f,setActiveTab:g,setView:b})=>{const[y,A]=Et.useState(!1),[x,w]=Et.useState(""),[C,S]=Et.useState(!1);Et.useEffect(()=>{const B=N=>{const k=N.data;!k||k.type!=="BOTTLE_CUSTOMIZER_ADD_TO_CART_STATUS"||(k.status==="loading"?(A(!0),w("")):k.status==="success"?A(!1):k.status==="error"&&(A(!1),w(k.message||"Failed to add to cart. Please try again.")))};return window.addEventListener("message",B),()=>window.removeEventListener("message",B)},[]);const M=Et.useCallback(async()=>{const B=i.FRONT.graphic&&typeof i.FRONT.graphic.src=="string"&&i.FRONT.graphic.src.startsWith("gallery/")?i.FRONT.graphic.src:"",N=i.BACK.graphic&&typeof i.BACK.graphic.src=="string"&&i.BACK.graphic.src.startsWith("gallery/")?i.BACK.graphic.src:"",k={color:s,font:r,frontMonogramStyle:o?.FRONT||"",backMonogramStyle:o?.BACK||"",monogramStyle:o?.BACK||"",frontText:i.FRONT.text||"",backText:i.BACK.text||"",frontMonogram:i.FRONT.monogram||"",backMonogram:i.BACK.monogram||"",frontGraphic:i.FRONT.graphic?i.FRONT.graphic.name:"",backGraphic:i.BACK.graphic?i.BACK.graphic.name:"",frontGraphicSrc:B,backGraphicSrc:N,frontImage:l||"",backImage:u||"",frontDesignImage:d||"",backDesignImage:f||""};console.log("Adding to Cart - Customization Data:",k),w(""),typeof window<"u"&&window.parent&&window.parent!==window?(A(!0),window.parent.postMessage({type:"BOTTLE_CUSTOMIZER_ADD_TO_CART",data:k},"*")):(console.log("Standalone mode - Add to Cart Data:",k),alert("Added to cart! (Check console for payload)"),t())},[i,s,r,o,l,u,d,f,t]),_=B=>{g(B);const N=i[B];N.graphic?b("gallery"):N.monogram?b("monogram"):b("text"),h()};return T.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col font-sans text-slate-900 animate-in fade-in active:fade-out duration-300",children:[y&&T.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/90 flex flex-col items-center justify-center",children:[T.jsx("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-[#002C5F] rounded-full animate-spin mb-4"}),T.jsx("p",{className:"text-lg font-semibold text-[#002C5F]",children:"Adding to cart..."})]}),T.jsx("header",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:T.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 md:px-6 h-14 md:h-16 flex items-center justify-between",children:[T.jsx("h1",{className:"text-lg md:text-xl font-bold text-[#002C5F] uppercase tracking-wider",children:"Review Your Design"}),T.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close Review",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-[#002C5F]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),T.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-[#f9fafb]",children:T.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-start",children:[T.jsxs("div",{className:"flex flex-col items-center bg-[#f9fafb] p-6 rounded-lg ",children:[T.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Front View"}),T.jsx("div",{className:"relative w-full max-w-[300px] aspect-[3/5] flex items-center justify-center bg-[#f9fafb] rounded-md overflow-visible",children:l?T.jsx("img",{src:l,alt:"Front Preview",className:"w-full h-full object-contain drop-shadow-xl mix-blend-multiply"}):T.jsx("div",{className:"text-gray-400 text-sm",children:"No Preview Available"})}),T.jsx("button",{onClick:()=>_("FRONT"),className:"mt-6 text-sm font-bold text-[#002C5F] underline hover:text-brand-blue uppercase tracking-wider",children:"Edit Front"})]}),T.jsxs("div",{className:"flex flex-col items-center bg-[#f9fafb] p-6 rounded-lg ",children:[T.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Back View"}),T.jsx("div",{className:"relative w-full max-w-[300px] aspect-[3/5] flex items-center justify-center bg-[#f9fafb] rounded-md overflow-visible",children:u?T.jsx("img",{src:u,alt:"Back Preview",className:"w-full h-full object-contain drop-shadow-xl mix-blend-multiply"}):T.jsx("div",{className:"text-gray-400 text-sm",children:"No Preview Available"})}),T.jsx("button",{onClick:()=>_("BACK"),className:"mt-6 text-sm font-bold text-[#002C5F] underline hover:text-brand-blue uppercase tracking-wider",children:"Edit Back"})]})]})}),T.jsx("footer",{className:"bg-white border-t border-gray-200 p-2 md:p-2 flex-shrink-0",children:T.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center justify-between gap-4",children:[T.jsx("div",{className:"text-center w-full",children:x?T.jsx("p",{className:"text-sm font-medium text-red-600",children:x}):T.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Please review your spelling and design. Custom products cannot be returned."})}),T.jsxs("div",{className:"max-w-md md:max-w-none mx-auto md:mx-0 md:ml-auto flex space-x-3 w-full md:w-auto px-4 md:pr-8",children:[T.jsx("button",{onClick:h,disabled:y,className:`flex-1 px-6 py-4 rounded-lg text-sm bg-white border-2 border-gray-200 text-gray-500 font-bold uppercase tracking-widest transition-colors ${y?"opacity-50 cursor-not-allowed":"hover:border-[#002C5F] hover:text-[#002C5F]"}`,children:"Back"}),T.jsx("button",{onClick:()=>S(!0),disabled:y,className:`flex-1 px-6 py-4 rounded-lg text-sm bg-black text-white font-bold uppercase tracking-widest transition-colors ${y?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"}`,children:y?"Adding...":"Add to Cart"})]})]})}),T.jsx(AA,{isOpen:C,onClose:()=>S(!1),onConfirm:()=>{S(!1),M()}})]})},ke=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),hh=[.001,0,0,.001,0,0],th=1.35,ni={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Nn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pr="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},xA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},dh={TRIANGLES:1,LATTICE:2},ge={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},el={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Zs={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},dl={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},or={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},SA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let fl=dl.WARNINGS;function EA(h){Number.isInteger(h)&&(fl=h)}function TA(){return fl}function ml(h){fl>=dl.INFOS&&console.info(`Info: ${h}`)}function gt(h){fl>=dl.WARNINGS&&console.warn(`Warning: ${h}`)}function jt(h){throw new Error(h)}function zt(h,t){h||jt(t)}function CA(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Zp(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=OA(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return CA(s)?s:null}function Jp(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&Zp(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function pt(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const as=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class dp extends as{constructor(t,i){super(t,"PasswordException"),this.code=i}}class eh extends as{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class fh extends as{constructor(t){super(t,"InvalidPDFException")}}class rl extends as{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class _A extends as{constructor(t){super(t,"FormatError")}}class kn extends as{constructor(t){super(t,"AbortException")}}function MA(h){(typeof h!="object"||h?.length===void 0)&&jt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),l=h.subarray(r,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function gl(h){typeof h!="string"&&jt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function DA(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function NA(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function RA(){try{return new Function(""),!0}catch{return!1}}class pe{static get isLittleEndian(){return pt(this,"isLittleEndian",NA())}static get isEvalSupported(){return pt(this,"isEvalSupported",RA())}static get isOffscreenCanvasSupported(){return pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return pt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return pt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return pt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return pt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return pt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ih=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class et{static makeHexColor(t,i,s){return`#${ih[t]}${ih[i]}${ih[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5];for(let g=0;g<6;g+=2){const b=t[s+g],y=t[s+g+1];t[s+g]=b*r+y*l+d,t[s+g+1]=b*o+y*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],l=i[2],u=i[3],d=i[4],f=i[5],g=t[0],b=t[1],y=t[2],A=t[3];let x=r*g+d,w=x,C=r*y+d,S=C,M=u*b+f,_=M,B=u*A+f,N=B;if(o!==0||l!==0){const k=o*g,z=o*y,$=l*b,Y=l*A;x+=$,S+=$,C+=Y,w+=Y,M+=k,N+=k,B+=z,_+=z}s[0]=Math.min(s[0],x,C,w,S),s[1]=Math.min(s[1],M,B,_,N),s[2]=Math.max(s[2],x,C,w,S),s[3]=Math.max(s[3],M,B,_,N)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],l=t[3],u=s**2+r**2,d=s*o+r*l,f=o**2+l**2,g=(u+f)/2,b=Math.sqrt(g**2-(u*f-d**2));i[0]=Math.sqrt(g+b||1),i[1]=Math.sqrt(g-b||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>l?null:[s,o,r,l]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,l,u,d,f,g){if(f<=0||f>=1)return;const b=1-f,y=f*f,A=y*f,x=b*(b*(b*t+3*f*i)+3*y*s)+A*r,w=b*(b*(b*o+3*f*l)+3*y*u)+A*d;g[0]=Math.min(g[0],x),g[1]=Math.min(g[1],w),g[2]=Math.max(g[2],x),g[3]=Math.max(g[3],w)}static#e(t,i,s,r,o,l,u,d,f,g,b,y){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,o,l,u,d,-b/g,y);return}const A=g**2-4*b*f;if(A<0)return;const x=Math.sqrt(A),w=2*f;this.#t(t,i,s,r,o,l,u,d,(-g+x)/w,y),this.#t(t,i,s,r,o,l,u,d,(-g-x)/w,y)}static bezierBoundingBox(t,i,s,r,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,s,o,u,i,r,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,i,r,l,d,3*(-i+3*(r-l)+d),6*(i-2*r+l),3*(r-i),f)}}function OA(h){return decodeURIComponent(escape(h))}let nh=null,fp=null;function kA(h){return nh||(nh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fp=new Map([["","t"]])),h.replaceAll(nh,(t,i,s)=>i?i.normalize("NFKC"):fp.get(s))}function t0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),MA(h)}const ea="pdfjs_internal_id_";function LA(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(r))return!1;const l=o.length;let u=!0;switch(r.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Me(h,t,i){return Math.min(Math.max(h,t),i)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});class yr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(yr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&i.push({str:l}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class e0{static setupStorage(t,i,s,r,o){const l=r.getValue(i,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:l}=i,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=b}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const b=document.createTextNode(r.value);l.append(b),u&&yr.shouldBuildText(r.name)&&f.push(b)}return{textDivs:f}}const g=[[r,-1,l]];for(;g.length>0;){const[b,y,A]=g.at(-1);if(y+1===b.children.length){g.pop();continue}const x=b.children[++g.at(-1)[1]];if(x===null)continue;const{name:w}=x;if(w==="#text"){const S=document.createTextNode(x.value);f.push(S),A.append(S);continue}const C=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,w):document.createElement(w);if(A.append(C),x.attributes&&this.setAttributes({html:C,element:x,storage:i,intent:o,linkService:s}),x.children?.length>0)g.push([x,-1,C]);else if(x.value){const S=document.createTextNode(x.value);u&&yr.shouldBuildText(w)&&f.push(S),C.append(S)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const en="http://www.w3.org/2000/svg";class ua{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function wr(h,t="text"){if(dr(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class xr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=l,s*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,b,y,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,b=0,y=0,A=1;break;case 90:g=0,b=1,y=1,A=0;break;case 270:g=0,b=-1,y=-1,A=0;break;case 0:g=1,b=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,A=-A);let x,w,C,S;g===0?(x=Math.abs(f-t[1])*s+o,w=Math.abs(d-t[0])*s+l,C=(t[3]-t[1])*s,S=(t[2]-t[0])*s):(x=Math.abs(d-t[0])*s+o,w=Math.abs(f-t[1])*s+l,C=(t[2]-t[0])*s,S=(t[3]-t[1])*s),this.transform=[g*s,b*s,y*s,A*s,x-g*s*d-y*s*f,w-b*s*d-A*s*f],this.width=C,this.height=S}get rawDims(){const t=this.viewBox;return pt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new xr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return et.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];et.applyTransform(i,this.transform);const s=[t[2],t[3]];return et.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return et.applyInverseTransform(s,this.transform),s}}class Dh extends as{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function pl(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Nh(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function BA(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function FA(h,t="document.pdf"){if(typeof h!="string")return t;if(pl(h))return gt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return r(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return t}class mp{started=Object.create(null);times=[];time(t){t in this.started&&gt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||gt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function dr(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function Ai(h){h.preventDefault()}function se(h){h.preventDefault(),h.stopPropagation()}function zA(h){console.log("Deprecated API usage: "+h)}class mh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(i[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let b=parseInt(i[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(l+=g,u+=b):f==="+"&&(l-=g,u-=b),new Date(Date.UTC(s,r,o,l,u,d))}}function jA(h,{scale:t=1,rotation:i=0}){const{width:s,height:r}=h.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new xr({viewBox:o,userUnit:1,scale:t,rotation:i})}function Sr(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(gt(`Not a valid color format: "${h}"`),[0,0,0])}function PA(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,Sr(s))}t.remove()}function te(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform();return[t,i,s,r,o,l]}function Ri(h){const{a:t,b:i,c:s,d:r,e:o,f:l}=h.getTransform().invertSelf();return[t,i,s,r,o,l]}function ns(h,t,i=!1,s=!0){if(t instanceof xr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:l}=h,u=pe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(l.width=g,l.height=b):(l.width=b,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Fi{constructor(){const{pixelRatio:t}=Fi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let l=1/0,u=1/0,d=1/0;s=Fi.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,d=r/i);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const gh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class UA{static get isDarkMode(){return pt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class IA{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),pt(this,"commentForegroundColor",Sr(s))}}function HA(h,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return h=Math.round(h*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[h,t,i]}function gp(h,t){const i=h[0]/255,s=h[1]/255,r=h[2]/255,o=Math.max(i,s,r),l=Math.min(i,s,r),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case i:t[0]=((s-r)/d+(s<r?6:0))*60;break;case s:t[0]=((r-i)/d+2)*60;break;case r:t[0]=((i-s)/d+4)*60;break}}t[2]=u}function ph(h,t){const i=h[0],s=h[1],r=h[2],o=(1-Math.abs(2*r-1))*s,l=o*(1-Math.abs(i/60%2-1)),u=r-o/2;switch(Math.floor(i/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function pp(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function bp(h,t,i){ph(h,i),i.map(pp);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];ph(t,i),i.map(pp);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const yp=new Map;function GA(h,t){const i=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=yp.get(i);if(s)return s;const r=new Float32Array(9),o=r.subarray(0,3),l=r.subarray(3,6);gp(h,l);const u=r.subarray(6,9);gp(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),bp(l,u,o)<f){let g,b;d?(g=l[2],b=1):(g=0,b=l[2]);const y=.005;for(;b-g>y;){const A=l[2]=(g+b)/2;d===bp(l,u,o)<f?g=A:b=A}l[2]=d?b:g}return ph(l,o),s=et.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),yp.set(i,s),s}function i0({html:h,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}r.append(o)}else e0.render({xfaHtml:h,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function n0(h){const t=new Path2D;if(!h)return t;for(let i=0,s=h.length;i<s;)switch(h[i++]){case or.moveTo:t.moveTo(h[i++],h[i++]);break;case or.lineTo:t.lineTo(h[i++],h[i++]);break;case or.curveTo:t.bezierCurveTo(h[i++],h[i++],h[i++],h[i++],h[i++],h[i++]);break;case or.quadraticCurveTo:t.quadraticCurveTo(h[i++],h[i++],h[i++],h[i++]);break;case or.closePath:t.closePath();break;default:gt(`Unrecognized drawing path operator: ${h[i-1]}`);break}return t}class Bt{static#t=null;static#e=null;static#n=null;static#i=0;static#a=[];get pagesNumber(){return Bt.#i}set pagesNumber(t){Bt.#i!==t&&(Bt.#i=t,t===0&&(Bt.#e=null,Bt.#t=null))}addListener(t){Bt.#a.push(t)}removeListener(t){const i=Bt.#a.indexOf(t);i>=0&&Bt.#a.splice(i,1)}#r(){for(const t of Bt.#a)t()}#s(t){if(Bt.#e)return;const i=Bt.#i,s=new Uint32Array(3*i),r=Bt.#e=s.subarray(0,i),o=Bt.#t=s.subarray(i,2*i);if(t)for(let l=0;l<i;l++)r[l]=o[l]=l+1;Bt.#n=s.subarray(2*i)}movePages(t,i,s){this.#s(!0);const r=Bt.#e,o=Bt.#t;Bt.#n.set(o);const l=i.length,u=new Uint32Array(l);let d=0;for(let A=0;A<l;A++){const x=i[A]-1;u[A]=r[x],x<s&&(d+=1)}const f=Bt.#i;let g=s-d;const b=f-l;g=Me(g,0,b);for(let A=0,x=0;A<f;A++)t.has(A+1)||(r[x++]=r[A]);r.copyWithin(g+l,g,b),r.set(u,g);let y=!1;for(let A=0,x=f;A<x;A++){const w=r[A];y||=w!==A+1,o[w-1]=A+1}this.#r(),y||(this.pagesNumber=0)}hasBeenAltered(){return Bt.#e!==null}getPageMappingForSaving(){return{pageIndices:Bt.#t?Bt.#t.map(t=>t-1):null}}getPrevPageNumber(t){return Bt.#n[Bt.#e[t-1]-1]}getPageNumber(t){return Bt.#t?.[t-1]??t}getPageId(t){return Bt.#e?.[t-1]??t}static get instance(){return pt(this,"instance",new Bt)}getMapping(){return Bt.#e.subarray(0,this.pagesNumber)}}class gr{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,gr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",Ai,{signal:i}),t.addEventListener("pointerdown",gr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:o}=t,l=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,se(t)}#h(t){this.#n._focusEventsAllowed=!0,se(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",Ai,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",gr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#p(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#p),this.#a=t}addComment(t,i=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#p;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#p)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#p)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class VA{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",Ai,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,i){let s=0,r=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(i?o.width:0);if(l>s){r=u,s=l;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#a(i,s),{style:l}=this.#e||=this.#i();t.append(this.#e),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,i,s,r){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",i);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Ai,{signal:u}),o.addEventListener("click",r,{signal:u})),this.#t.append(o)}}function s0(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class Ft{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Ft.#e||=new Set).add(t)}static setPointer(t,i){Ft.#t||=i,Ft.#i??=t}static setTimeStamp(t){Ft.#n=t}static isSamePointerId(t){return Ft.#t===t}static isSamePointerIdOrRemove(t){return Ft.#t===t?!0:(Ft.#e?.delete(t),!1)}static isSamePointerType(t){return Ft.#i===t}static isInitializedAndDifferentPointerType(t){return Ft.#i!==null&&!Ft.isSamePointerType(t)}static isSameTimeStamp(t){return Ft.#n===t}static isUsingMultiplePointers(){return Ft.#e?.size>=1}static clearPointerType(){Ft.#i=null}static clearPointerIds(){Ft.#t=NaN,Ft.#e=null}static clearTimeStamp(){Ft.#n=NaN}}class YA{#t=0;get id(){return`${pr}${this.#t++}`}}class Rh{#t=t0();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return pt(this,"_isSVGFittingCanvas",o)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await wr(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Rh._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const b=s.svgUrl=l.result;u.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},u.onerror=l.onerror=g});l.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){gt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#i(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class XA{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(d);return}if(l&&this.#t[this.#i].type===o){u&&(d.undo=this.#t[this.#i].undo),this.#t[this.#i]=d;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Er{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=pe.platform;for(const[s,r,o={}]of t)for(const l of s){const u=l.startsWith("mac+");i&&u?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!i&&!u&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...l,i)(),o||se(i))}}class Oh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return PA(t),pt(this,"_colors",t)}convert(t){const i=Sr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,l)=>o===i[l]))return Oh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?et.makeHexColor(...i):t}}class Ln{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new XA;#l=null;#d=null;#h=null;#f=0;#p=new Set;#g=null;#u=null;#m=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#T=null;#S=null;#w=null;#_=null;#A=!1;#E=null;#N=new YA;#M=!1;#D=!1;#z=!1;#O=null;#L=null;#j=null;#B=null;#V=null;#C=yt.NONE;#x=new Set;#k=null;#P=null;#I=null;#q=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#F=null;#Y=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ln.prototype,i=l=>l.#Y.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Er([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#Y.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#Y.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,l,u,d,f,g,b,y,A,x,w,C){const S=this._signal=this.#t.signal;this.#Y=t,this.#Z=i,this.#J=s,this.#r=r,this.#l=o,this.#P=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:S}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),u._on("setpreference",this.onSetPreference.bind(this),{signal:S}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:S}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:S}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:S}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:S}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#T=d.filterFactory,this.#I=f,this.#_=g||null,this.#b=b,this.#v=y,this.#y=A,this.#V=x||null,this.viewParameters={realScale:ua.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=C!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#m.clear(),this.#B?.clear(),this.#e=null,this.#x.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#P?.destroy(),this.#E?.hide(),this.#E=null,this.#j?.destroy(),this.#j=null,this.#n=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return pt(this,"hcmFilter",this.#I?this.#T.addHCMFilter(this.#I.foreground,this.#I.background):"none")}get direction(){return pt(this,"direction",getComputedStyle(this.#Y).direction)}get _highlightColors(){return pt(this,"_highlightColors",this.#_?new Map(this.#_.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return pt(this,"highlightColors",null);const i=new Map,s=!!this.#I;for(const[r,o]of t){const l=r.endsWith("_HCM");if(s&&l){i.set(r.replace("_HCM",""),o);continue}!s&&!l&&i.set(r,o)}return pt(this,"highlightColors",i)}get highlightColorNames(){return pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#a.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,i){const s=()=>{t.comment=i},r=()=>{this._editorUndoBar?.show(s,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:s,mustExec:!0})}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#P?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#P}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=i)}onPagesEdited({pagesMapper:t}){for(const r of this.#i.values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const i=this.#a,s=this.#a=new Map;for(const[r,o]of i){const l=t.getPrevPageNumber(r+1)-1;if(l===-1){o.destroy();continue}s.set(l,o),o.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#Y.focus()}findParent(t,i){for(const s of this.#a.values()){const{x:r,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+l&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ua.PDF_TO_CSS_UNITS;for(const i of this.#m)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#a.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),b=this.getSelectionBoxes(g);if(!b)return;s.empty();const y=this.#tt(g),A=this.#C===yt.NONE,x=()=>{const w=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:r,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),i&&w?.editComment()};if(A){this.switchToMode(yt.HIGHLIGHT,x);return}x()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#E||=new VA(this),this.#E.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${pr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#E?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#k)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#k&&(this.#E?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#k=i,this.#R({hasSelectedText:!0}),!(this.#C!==yt.HIGHLIGHT&&this.#C!==yt.NONE)&&(this.#C===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===yt.HIGHLIGHT?this.#tt(r):null;if(o?.toggleDrawing(),this.#D){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===yt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#x)if(i.div.contains(t)){this.#L=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,i]=this.#L;this.#L=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#x){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){gt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const f=await r.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#it(d);this.#nt(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){gt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==yt.NONE&&!this.isEditorHandlingKeyboard&&Ln._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===yt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Nt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#R({isEditing:this.#C!==yt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,o=!1,l=!1){if(this.#C!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===yt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===yt.NONE){this.setEditingState(!1),this.#mt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===yt.SIGNATURE&&await this.#P?.loadSignatures(),s&&Ft.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#a.values())u.updateMode(t);if(t===yt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,d=[];for(const f of this.#i.values()){const{annotationElementId:g,hasComment:b,deleted:y}=f;g&&u.add(g),b&&!y&&d.push(f.getData())}for(const f of this.#n){const{id:g,popupRef:b,contentsObj:y}=f;b&&y?.str&&!u.has(g)&&!this.#p.has(g)&&d.push(f)}this.#l?.showSidebar(d)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),l?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Nt.CREATE:this.currentLayer.addNewEditor(i);return;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#x)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#q?.get(Nt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Nt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#a.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#a.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#mt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#a.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#x)i!==t&&i.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#x],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#it(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#x)i.unselect();this.#x.clear();for(const i of t)i.isEmpty()||(this.#x.add(i),i.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==yt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=i;const[r,o]=this.#H,l=[...this.#x],u=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of l)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:o,pageIndex:l},u]of t)u.newX=r,u.newY=o,u.newPageIndex=l,i||=r!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!i)return!1;const s=(r,o,l,u)=>{if(this.#i.has(r.id)){const d=this.#a.get(u);d?r._setParentAndPosition(d,o,l):(r.pageIndex=u,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:u}]of t)s(r,o,l,u)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(r,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==yt.NONE}get imageManager(){return pt(this,"imageManager",new Rh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,b,y)=>({x:(g-r)/l,y:1-(f+b-s)/o,width:y/l,height:b/o});break;case"180":u=(f,g,b,y)=>({x:1-(f+b-s)/o,y:1-(g+y-r)/l,width:b/o,height:y/l});break;case"270":u=(f,g,b,y)=>({x:1-(g+y-r)/l,y:(f-s)/o,width:y/l,height:b/o});break;default:u=(f,g,b,y)=>({x:(f-s)/o,y:(g-r)/l,width:b/o,height:y/l});break}const d=[];for(let f=0,g=i.rangeCount;f<g;f++){const b=i.getRangeAt(f);if(!b.collapsed)for(const{x:y,y:A,width:x,height:w}of b.getClientRects())x===0||w===0||d.push(u(y,A,x,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#C===yt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Li{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Li.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Li._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Li.#f.missing),i.setAttribute("data-l10n-id",Li.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",Ai,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,r(o))},{signal:s}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Li.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",Li.#f[`${this.#p}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Yo{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/l,(i+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",Ai,{signal:s}),i&&(t.addEventListener("focusin",o=>{this.#i._focusEventsAllowed=!1,se(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#i._focusEventsAllowed=!0,se(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#n=!0,r(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:b,x:y,y:A}=this.#i;s=y+s*g,r=A+r*b}const o=this.#i.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#i._uiManager.editComment(this.#i,l+s*d,u+r*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:i,date:s}){this.#s=t,this.#r=i,this.#o=s,this.#c=!1}setInitialText(t,i=null){this.#a=t,this.data=t,this.#o=null,this.#r=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class bl{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#a=r,this.#r=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fi.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,o=AbortSignal.any([this.#c,r.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(se(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#p.bind(this),l);const u=this.#g.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",se,l),o.addEventListener("pointermove",se,l),o.addEventListener("pointercancel",se,l),o.addEventListener("pointerup",se,l),this.#a?.()}if(se(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(t){if(!this.#l||t.touches.length!==2)return;se(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:b,touch1Y:y}=d,A=b-f,x=y-g,w=l-r,C=u-o,S=Math.hypot(w,C)||1,M=Math.hypot(A,x)||1;if(!this.#e&&Math.abs(M-S)<=bl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const _=[(r+l)/2,(o+u)/2];this.#r?.(_,M,S)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(se(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ct{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#p="";#g=!1;#u=null;#m=!1;#b=!1;#v=!1;#y=null;#T=0;#S=0;#w=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=ct._zIndex++;static _borderLineWidth=-1;static _colorManager=new Oh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ct.prototype._resizeWithKeyboard,i=Ln.TRANSLATE_SMALL,s=Ln.TRANSLATE_BIG;return pt(this,"_resizerKeyboardManager",new Er([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new qA({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(ct._l10n??=t,ct._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ct._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){jt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#F(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,l]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/l,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#N([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#N(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=ct,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=r,o*=s,l*=r,this._mustFixPosition)switch(t){case 0:o=Me(o,0,s-u),l=Me(l,0,r-d);break;case 90:o=Me(o,0,s-d),l=Me(l,u,r);break;case 180:o=Me(o,u,s),l=Me(l,d,r);break;case 270:o=Me(o,d,s),l=Me(l,0,r-u);break}this.x=o/=s,this.y=l/=r;const[f,g]=this.getBaseTranslation();o+=f,l+=g,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return ct.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return ct.#M(t,i,360-this.parentRotation)}#D(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",Ai,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=pe.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",se,{passive:!1,signal:l}),window.addEventListener("contextmenu",Ai,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#L(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===i&&u===s&&d===r||this.addCommands({cmd:this.#L.bind(this,o,l,u,d),undo:this.#L.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=ct.MIN_SIZE/s,g=ct.MIN_SIZE/r,b=this.#D(this.rotation),y=(O,I)=>[b[0]*O+b[2]*I,b[1]*O+b[3]*I],A=this.#D(360-this.rotation),x=(O,I)=>[A[0]*O+A[2]*I,A[1]*O+A[3]*I];let w,C,S=!1,M=!1;switch(t){case"topLeft":S=!0,w=(O,I)=>[0,0],C=(O,I)=>[O,I];break;case"topMiddle":w=(O,I)=>[O/2,0],C=(O,I)=>[O/2,I];break;case"topRight":S=!0,w=(O,I)=>[O,0],C=(O,I)=>[0,I];break;case"middleRight":M=!0,w=(O,I)=>[O,I/2],C=(O,I)=>[0,I/2];break;case"bottomRight":S=!0,w=(O,I)=>[O,I],C=(O,I)=>[0,0];break;case"bottomMiddle":w=(O,I)=>[O/2,I],C=(O,I)=>[O/2,0];break;case"bottomLeft":S=!0,w=(O,I)=>[0,I],C=(O,I)=>[O,0];break;case"middleLeft":M=!0,w=(O,I)=>[0,I/2],C=(O,I)=>[O,I/2];break}const _=w(u,d),B=C(u,d);let N=y(...B);const k=ct._round(o+N[0]),z=ct._round(l+N[1]);let $=1,Y=1,Z,W;if(i.fromKeyboard)({deltaX:Z,deltaY:W}=i);else{const{screenX:O,screenY:I}=i,[Q,mt]=this.#l;[Z,W]=this.screenToPageTranslation(O-Q,I-mt),this.#l[0]=O,this.#l[1]=I}if([Z,W]=x(Z/s,W/r),S){const O=Math.hypot(u,d);$=Y=Math.max(Math.min(Math.hypot(B[0]-_[0]-Z,B[1]-_[1]-W)/O,1/u,1/d),f/u,g/d)}else M?$=Me(Math.abs(B[0]-_[0]-Z),f,1)/u:Y=Me(Math.abs(B[1]-_[1]-W),g,1)/d;const ot=ct._round(u*$),xt=ct._round(d*Y);N=y(...C(ot,xt));const ht=k-N[0],At=z-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ot,this.height=xt,this.x=ht,this.y=At,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new gr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Li.initialize(ct._l10n),this.#n=new Li(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Yo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#i)return null;const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Yo(this),typeof t=="object"&&t!==null?this.#i.restoreData(t):this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Yo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Yo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#I();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),s0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new bl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const l=this.#D(this.rotation),u=(k,z)=>[l[0]*k+l[2]*z,l[1]*k+l[3]*z],[d,f]=this.parentDimensions,g=this.x,b=this.y,y=this.width,A=this.height,x=ct.MIN_SIZE/d,w=ct.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),x/y,w/A);const C=ct._round(y*o),S=ct._round(A*o);if(C===y&&S===A)return;this.#u||=[g,b,y,A];const M=u(y/2,A/2),_=ct._round(g+M[0]),B=ct._round(b+M[1]),N=u(C/2,S/2);this.x=_-N[0],this.y=B-N[1],this.width=C,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#P(t);return}this.#k(t)}#k(t){const{isMac:i}=pe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#k(f),s&&this._onStopDragging()};i&&(this.#T=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:b,pointerId:y}=f;if(y!==this.#s){se(f);return}const[A,x]=this.screenToPageTranslation(g-this.#T,b-this.#S);this.#T=g,this.#S=b,this._uiManager.dragSelectedEditors(A,x)},l),window.addEventListener("touchmove",se,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#_||f.isPrimary)&&u(f),se(f)},l));const d=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}se(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,g=i/r,b=this.x*o,y=this.y*l,A=this.width*o,x=this.height*l;switch(s){case 0:return[b+f+u,l-y-g-x+d,b+f+A+u,l-y-g+d];case 90:return[b+g+u,l-y+f+d,b+g+x+u,l-y+f+A+d];case 180:return[b-f-A+u,l-y+g+d,b-f+u,l-y+g+x+d];case 270:return[b-g-x+u,l-y-f-A+d,b-g+u,l-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,l]=t,u=o-s,d=l-r;switch(this.rotation){case 0:return[s,i-l,u,d];case 90:return[s,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return i<l&&r>0&&t<o&&s>0}#I(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#I()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,l]=r.pageDimensions,[u,d,f,g]=r.getRectInCurrentCoords(t.rect,l);return r.x=u/o,r.y=d/l,r.width=f/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#F(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#_?.destroy(),this.#_=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,o,l]=this.getPDFRect();return[ct._round(s+(o-s)*t),ct._round(r+(l-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const l=this.#q.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ct._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const l of i){if(l===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>r)for(let u=0;u<o-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const u of i){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ct._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){ct._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#F()}#$(t){this.#p=this.#v?t:""}#H(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#p,{deltaX:t,deltaY:i,fromKeyboard:!0})}#F(){this.#v=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#w||=new Map;const{action:s}=t;let r=this.#w.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(s),this.#w.size===0&&(this.#w=null)},ct._telemetryTimeout),this.#w.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class qA extends ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const vp=3285377520,bi=4294901760,Oi=65535;class a0{constructor(t){this.h1=t?t&4294967295:vp,this.h2=t?t&4294967295:vp}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let w=0,C=t.length;w<C;w++){const S=t.charCodeAt(w);S<=255?i[s++]=S:(i[s++]=S>>>8,i[s++]=S&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,l=new Uint32Array(i.buffer,0,r);let u=0,d=0,f=this.h1,g=this.h2;const b=3432918353,y=461845907,A=b&Oi,x=y&Oi;for(let w=0;w<r;w++)w&1?(u=l[w],u=u*b&bi|u*A&Oi,u=u<<15|u>>>17,u=u*y&bi|u*x&Oi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[w],d=d*b&bi|d*A&Oi,d=d<<15|d>>>17,d=d*y&bi|d*x&Oi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*b&bi|u*A&Oi,u=u<<15|u>>>17,u=u*y&bi|u*x&Oi,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&bi|t*36045&Oi,i=i*4283543511&bi|((i<<16|t>>>16)*2950163797&bi)>>>16,t^=i>>>1,t=t*444984403&bi|t*60499&Oi,i=i*3301882366&bi|((i<<16|t>>>16)*3120437893&bi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const bh=Object.freeze({map:null,hash:"",transfer:void 0});class kh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof ct&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof ct)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,l]of Object.entries(i))s[o]!==l&&(r=!0,s[o]=l);else r=!0,this.#i.set(t,i);r&&this.#a(),i instanceof ct&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new r0(this)}get serializable(){if(this.#i.size===0)return bh;const t=new Map,i=new a0,s=[],r=Object.create(null);let o=!1;for(const[l,u]of this.#i){const d=u instanceof ct?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),d&&(t.set(l,d),i.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:bh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const o of this.#i.values()){if(!(o instanceof ct)){o.popup&&(o.popup.deleted?r+=1:s+=1);continue}o.isCommentDeleted?r+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;i.has(u)||i.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let b=d.get(f);b||(b=new Map,d.set(f,b));const y=b.get(g)??0;b.set(g,y+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[o,l]of i)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class r0 extends kh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){jt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return pt(this,"modifiedIds",{ids:new Set,hash:""})}}class $A{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(zt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:l}=t,u=new FontFace(r,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{gt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}jt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw gt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return pt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return pt(this,"isSyncFontLoadingSupported",ke||pe.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(zt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return pt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(B,N){return B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3)&255}function r(B,N,k,z){const $=B.substring(0,N),Y=B.substring(N+k);return $+z+Y}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function g(B,N){if(++f>30){gt("Load test font never loaded."),N();return}if(d.font="30px "+B,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(g.bind(null,B,N))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,b.length,b);const x=16,w=1482184792;let C=s(y,x);for(o=0,l=b.length-3;o<l;o+=4)C=C-w+s(b,o)|0;o<b.length&&(C=C-w+s(b+"XXX",o)|0),y=r(y,x,4,DA(C));const S=`url(data:font/opentype;base64,${btoa(y)});`,M=`@font-face {font-family:"${b}";src:${S}}`;this.insertRule(M);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const B of[t.loadedName,b]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=B,_.append(N)}this._document.body.append(_),g(b,()=>{_.remove(),i.complete()})}}class KA{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(l){gt(`getPathGenerator - ignoring character: "${l}".`)}const o=n0(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){pt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){pt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class aa{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of aa.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const o=new ArrayBuffer(r),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of aa.strings){const g=s[f],b=g.length;u.setUint32(d,b),l.set(g,d+4),d+=4+b}return zt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){zt(t<aa.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class ra{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const y of ra.strings){const A=i.encode(t[y]);s[y]=A,r+=4+A.length}r+=4;let o,l,u=1+r;t.style&&(o=i.encode(t.style.style),l=i.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let b=0;g.setUint8(b++,t.guessFallback?1:0),g.setUint32(b,0),b+=4,r=0;for(const y of ra.strings){const A=s[y],x=A.length;r+=4+x,g.setUint32(b,x),f.set(A,b+4),b+=4+x}return g.setUint32(b-r-4,r),t.style&&(g.setUint32(b,o.length),f.set(o,b+4),b+=4+o.length,g.setUint32(b,l.length),f.set(l,b+4),b+=4+l.length),zt(b<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(b)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){zt(t<ra.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),o=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:o}}}class Yt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:i}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),i&&Object.assign(this,i)}#c(t){zt(t<Yt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return zt(t<Yt.numbers.length,"Invalid number index"),this.#o.getFloat64(Yt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Yt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Yt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Yt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){zt(t<Yt.strings.length,"Invalid string index");let i=Yt.#a+4;for(let o=0;o<t;o++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Yt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#r,t+4,o)}clearData(){let t=Yt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const o=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Yt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const o=new Uint8Array(r);return o.set(new Uint8Array(this.#r,t+4,r)),new aa(o.buffer)}get systemFontInfo(){let t=Yt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,t+4,s)),new ra(r.buffer)}static write(t){const i=t.systemFontInfo?ra.write(t.systemFontInfo):null,s=t.cssFontInfo?aa.write(t.cssFontInfo):null,r=new TextEncoder,o={};let l=0;for(const w of Yt.strings)o[w]=r.encode(t[w]),l+=4+o[w].length;const u=Yt.#a+4+l+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),g=new DataView(d);let b=0;const y=Yt.bools.length;let A=0,x=0;for(let w=0;w<y;w++){const C=t[Yt.bools[w]];A|=(C===void 0?0:C?2:1)<<x,x+=2,(x===8||w===y-1)&&(g.setUint8(b++,A),A=0,x=0)}zt(b===Yt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const w of Yt.numbers)g.setFloat64(b,t[w]),b+=8;if(zt(b===Yt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(b++,4);for(const w of t.bbox)g.setInt16(b,w,!0),b+=2}else g.setUint8(b++,0),b+=8;if(zt(b===Yt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(b++,6);for(const w of t.fontMatrix)g.setFloat64(b,w,!0),b+=8}else g.setUint8(b++,0),b+=48;if(zt(b===Yt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(b++,1);for(const w of t.defaultVMetrics)g.setInt16(b,w,!0),b+=2}else g.setUint8(b++,0),b+=6;zt(b===Yt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Yt.#a,0),b+=4;for(const w of Yt.strings){const C=o[w],S=C.length;g.setUint32(b,S),f.set(C,b+4),b+=4+S}if(g.setUint32(Yt.#a,b-Yt.#a-4),!i)g.setUint32(b,0),b+=4;else{const w=i.byteLength;g.setUint32(b,w),zt(b+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),b+4),b+=4+w}if(!s)g.setUint32(b,0),b+=4;else{const w=s.byteLength;g.setUint32(b,w),zt(b+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),b+4),b+=4+w}return t.data===void 0?(g.setUint32(b,0),b+=4):(g.setUint32(b,t.data.length),f.set(t.data,b+4),b+=4+t.data.length),zt(b<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(b)}}class Ae{static#t=0;static#e=1;static#n=2;static#i=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],o=[],l=[],u=[],d=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],l=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,d=t[1],r=t[2],o=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),b=Math.floor(o.length/3),y=l.length,A=u.length;let x=0;for(const N of u)x+=1,x=Math.ceil(x/4)*4,x+=4+N.coords.length*4,x+=4+N.colors.length*4,N.verticesPerRow!==void 0&&(x+=4);const w=20+g*8+b*3+y*8+(s?16:0)+(f?3:0)+x,C=new ArrayBuffer(w),S=new DataView(C),M=new Uint8Array(C);S.setUint8(Ae.#t,i),S.setUint8(Ae.#e,s?1:0),S.setUint8(Ae.#n,f?1:0),S.setUint8(Ae.#i,d),S.setUint32(Ae.#a,g,!0),S.setUint32(Ae.#r,b,!0),S.setUint32(Ae.#s,y,!0),S.setUint32(Ae.#o,A,!0);let _=20;new Float32Array(C,_,g*2).set(r),_+=g*8,M.set(o,_),_+=b*3;for(const[N,k]of l)S.setFloat32(_,N,!0),_+=4,S.setUint32(_,parseInt(k.slice(1),16),!0),_+=4;if(s)for(const N of s)S.setFloat32(_,N,!0),_+=4;f&&(M.set(f,_),_+=3);for(let N=0;N<u.length;N++){const k=u[N];S.setUint8(_,k.type),_+=1,_=Math.ceil(_/4)*4,S.setUint32(_,k.coords.length,!0),_+=4,new Int32Array(C,_,k.coords.length).set(k.coords),_+=k.coords.length*4,S.setUint32(_,k.colors.length,!0),_+=4,new Int32Array(C,_,k.colors.length).set(k.colors),_+=k.colors.length*4,k.verticesPerRow!==void 0&&(S.setUint32(_,k.verticesPerRow,!0),_+=4)}return C}getIR(){const t=this.view,i=this.data[Ae.#t],s=!!this.data[Ae.#e],r=!!this.data[Ae.#n],o=t.getUint32(Ae.#a,!0),l=t.getUint32(Ae.#r,!0),u=t.getUint32(Ae.#s,!0),d=t.getUint32(Ae.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const b=new Uint8Array(this.buffer,f,l*3);f+=l*3;const y=[];for(let C=0;C<u;++C){const S=t.getFloat32(f,!0);f+=4;const M=t.getUint32(f,!0);f+=4,y.push([S,`#${M.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let C=0;C<4;++C)A.push(t.getFloat32(f,!0)),f+=4}let x=null;r&&(x=new Uint8Array(this.buffer,f,3),f+=3);const w=[];for(let C=0;C<d;++C){const S=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const M=t.getUint32(f,!0);f+=4;const _=new Int32Array(this.buffer,f,M);f+=M*4;const B=t.getUint32(f,!0);f+=4;const N=new Int32Array(this.buffer,f,B);f+=B*4;const k={type:S,coords:_,colors:N};S===dh.LATTICE&&(k.verticesPerRow=t.getUint32(f,!0),f+=4),w.push(k)}if(i===1)return["RadialAxial","axial",A,y,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,y,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const C=this.data[Ae.#i];let S=null;if(g.length>0){let M=g[0],_=g[0],B=g[1],N=g[1];for(let k=0;k<g.length;k+=2){const z=g[k],$=g[k+1];M=M>z?z:M,B=B>$?$:B,_=_<z?z:_,N=N<$?$:N}S=[M,B,_,N]}return["Mesh",C,g,b,w,S,A,x]}throw new Error(`Unsupported pattern kind: ${i}`)}}class WA{static write(t){let i,s;return pe.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return pe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function QA(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(ke)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZA(h){if(ke&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return gl(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Xo(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const yh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,JA=h=>typeof h=="object"&&typeof h?.name=="string",t1=LA.bind(null,yh,JA);class e1{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){gt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const qo={DATA:1,ERROR:2},de={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ap(){}function Ge(h){if(h instanceof kn||h instanceof fh||h instanceof dp||h instanceof rl||h instanceof eh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||jt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new kn(h.message);case"InvalidPDFException":return new fh(h.message);case"PasswordException":return new dp(h.message,h.code);case"ResponseException":return new rl(h.message,h.status,h.missing);case"UnknownErrorException":return new eh(h.message,h.details)}return new eh(h.message,h.toString())}class fr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===qo.DATA)r.resolve(t.data);else if(t.callback===qo.ERROR)r.reject(Ge(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(l){o.postMessage({sourceName:s,targetName:r,callback:qo.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:r,callback:qo.ERROR,callbackId:t.callbackId,reason:Ge(l)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:de.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{zt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:de.CANCEL,streamId:o,reason:Ge(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,g=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:de.ENQUEUE,streamId:i,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:de.CLOSE,streamId:i}),delete l.streamSinks[i])},error(f){zt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:de.ERROR,streamId:i,reason:Ge(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:de.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:de.START_COMPLETE,streamId:i,reason:Ge(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,l=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case de.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Ge(t.reason));break;case de.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Ge(t.reason));break;case de.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:de.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Ap).then(function(){o.postMessage({sourceName:s,targetName:r,stream:de.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:de.PULL_COMPLETE,streamId:i,reason:Ge(f)})});break;case de.ENQUEUE:if(zt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case de.CLOSE:if(zt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,i);break;case de.ERROR:zt(l,"error should have stream controller"),l.controller.error(Ge(t.reason)),this.#a(l,i);break;case de.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Ge(t.reason)),this.#a(l,i);break;case de.CANCEL:if(!u)break;const d=Ge(t.reason);Promise.try(u.onCancel||Ap,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:de.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:s,targetName:r,stream:de.CANCEL_COMPLETE,streamId:i,reason:Ge(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class o0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){jt("Abstract method `_createCanvas` called.")}}class i1 extends o0{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class l0{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class wp extends l0{async _fetch(t){const i=await wr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):gl(i)}}class c0{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class n1 extends c0{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#a=i}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#a.createElementNS(en,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(en,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let b=0;b<256;b++)f[b]=d[b]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,l[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(pl(i)?gt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Jp(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,o]=this.#d(t),l=t.length===1?s:`${s}${r}${o}`;if(i=this.#o.get(l),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#g(u);return this.#m(s,r,o,f),d}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#c.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(r,o)),!t||!i))return o.url;const l=this.#v(t);t=et.makeHexColor(...l);const u=this.#v(i);if(i=et.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const x=A/255;d[A]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#i}_hcm_filter`,b=o.filter=this.#g(g);this.#m(f,f,f,b),this.#p(b);const y=(A,x)=>{const w=l[A]/255,C=u[A]/255,S=new Array(x+1);for(let M=0;M<=x;M++)S[M]=w+M/x*(C-w);return S.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),b),o.url=this.#h(g),o.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#g(o);return this.#b(s,u),l}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const o=`g_${this.#i}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(r,l);const u=this.#g(o);return this.#f(u),t&&this.#b(s,u),l}addHighlightHCMFilter(t,i,s,r,o){const l=`${i}-${s}-${r}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[d,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[r,o].map(this.#v.bind(this));b<g&&([g,b,y,A]=[b,g,A,y]),this.#l.style.color="";const x=(S,M,_)=>{const B=new Array(256),N=(b-g)/_,k=S/255,z=(M-S)/(255*_);let $=0;for(let Y=0;Y<=_;Y++){const Z=Math.round(g+Y*N),W=k+Y*z;for(let ot=$;ot<=Z;ot++)B[ot]=W;$=Z+1}for(let Y=$;Y<256;Y++)B[Y]=B[$-1];return B.join(",")},w=`g_${this.#i}_hcm_${t}_filter`,C=u.filter=this.#g(w);return this.#p(C),this.#m(x(y[0],A[0],5),x(y[1],A[1],5),x(y[2],A[2],5),C),u.url=this.#h(w),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const i=this.#a.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#p(t){const i=this.#a.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#a.createElementNS(en,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#a.createElementNS(en,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#m(t,i,s,r){const o=this.#a.createElementNS(en,"feComponentTransfer");r.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",i),this.#u(o,"feFuncB",s)}#b(t,i){const s=this.#a.createElementNS(en,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,Sr(getComputedStyle(this.#l).getPropertyValue("color"))}}class u0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class xp extends u0{async _fetch(t){const i=await wr(t,"arraybuffer");return new Uint8Array(i)}}class h0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class Sp extends h0{async _fetch(t){const i=await wr(t,"arraybuffer");return new Uint8Array(i)}}ke&&gt("Please use the `legacy` build in Node.js environments.");async function Lh(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class s1 extends c0{}class a1 extends o0{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class r1 extends l0{async _fetch(t){return Lh(t)}}class o1 extends u0{async _fetch(t){return Lh(t)}}class l1 extends h0{async _fetch(t){return Lh(t)}}const $s="__forcedDependency",{floor:Ep,ceil:Tp}=Math;function $o(h,t,i,s,r,o){h[t*4+0]=Math.min(h[t*4+0],i),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],r),h[t*4+3]=Math.max(h[t*4+3],o)}const vh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class c1{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===vh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ko=(h,t)=>{if(!h)return;let i=h.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},h.set(t,i)),i};class u1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[$s]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#p;#g;#u;#m;constructor(t,i,s=!1){this.#f=t.width,this.#p=t.height,this.#b(i),s&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(vh,i.length)):this.#u.fill(vh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[$s]:{__proto__:this.#e[$s]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Ko(this.#m,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(Ko(this.#m,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const i=this.#a.pop();return i!==void 0&&(Ko(this.#m,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#r.push(et.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData($s,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency($s,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,o,l){const u=et.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform()),d=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([s,o,r,l],u,d);const f=et.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,o,l){const u=this.#s;if(u[0]===1/0)return this;const d=et.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform());if(u[0]===-1/0)return et.axialAlignedBoundingBox([s,o,r,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([s,o,r,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,o=0,l=0,u){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],et.axialAlignedBoundingBox(d,s.fontMatrix,g),(r!==1||o!==0||l!==0)&&et.scaleMinMax([r,0,0,-r,o,l],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const b=u();return d&&g&&f===void 0&&(f=g[0]<=o-b.actualBoundingBoxLeft&&g[2]>=o+b.actualBoundingBoxRight&&g[1]<=l-b.actualBoundingBoxAscent&&g[3]>=l+b.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,o-b.actualBoundingBoxLeft,o+b.actualBoundingBoxRight,l-b.actualBoundingBoxAscent,l+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#p,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,o=this.#e;for(const l of i)l in this.#t?s.add(r[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[$s]),this.#m){const s=Ko(this.#m,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Ep(this.#o[0]*256/this.#f),r=Ep(this.#o[1]*256/this.#p),o=Tp(this.#o[2]*256/this.#f),l=Tp(this.#o[3]*256/this.#p);$o(this.#g,t,s,r,o,l);for(const u of this.#l)u!==t&&$o(this.#g,u,s,r,o,l);for(const u of this.#i)u!==t&&$o(this.#g,u,s,r,o,l);for(const u of this.#a)u!==t&&$o(this.#g,u,s,r,o,l);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new c1(this.#u,this.#g)}takeDebugMetadata(){return this.#m}}class ol{#t;#e;#n;#i=0;#a=0;constructor(t,i,s){if(t instanceof ol&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,o,l){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,o,l),this}recordBBox(t,i,s,r,o,l){return this.#n||this.#t.recordBBox(this.#e,i,s,r,o,l),this}recordCharacterBBox(t,i,s,r,o,l,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,o,l,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const yi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},De={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ah(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),h.clip(r)}class Bh{isModifyingCurrentTransform(){return!1}getPattern(){jt("Abstract method `getPattern` called.")}}class h1 extends Bh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,o=this._p1;if(i&&(r=r.slice(),o=o.slice(),et.applyTransform(r,i),et.applyTransform(o,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(i){const d=new Float32Array(2);et.singularValueDecompose2dScale(i,d),l*=d[0],u*=d[0]}s=t.createRadialGradient(r[0],r[1],l,o[0],o[1],u)}for(const l of this._colorStops)s.addColorStop(l[0],l[1]);return s}getPattern(t,i,s,r){let o;if(r===De.STROKE||r===De.FILL){if(this.isOriginBased()){let y=et.transform(s,i.baseTransform);this.matrix&&(y=et.transform(y,this.matrix));const A=.001,x=Math.hypot(y[0],y[1]),w=Math.hypot(y[2],y[3]),C=(y[0]*y[2]+y[1]*y[3])/(x*w);if(Math.abs(C)<A)if(this.isRadial()){if(Math.abs(x-w)<A)return this._createGradient(t,y)}else return this._createGradient(t,y)}const l=i.current.getClippedPathBoundingBox(r,te(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=et.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),Ah(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(s);o.setTransform(b)}else Ah(t,this._bbox),o=this._createGradient(t);return o}}function sh(h,t,i,s,r,o,l,u){const d=t.coords,f=t.colors,g=h.data,b=h.width*4;let y;d[i+1]>d[s+1]&&(y=i,i=s,s=y,y=o,o=l,l=y),d[s+1]>d[r+1]&&(y=s,s=r,r=y,y=l,l=u,u=y),d[i+1]>d[s+1]&&(y=i,i=s,s=y,y=o,o=l,l=y);const A=(d[i]+t.offsetX)*t.scaleX,x=(d[i+1]+t.offsetY)*t.scaleY,w=(d[s]+t.offsetX)*t.scaleX,C=(d[s+1]+t.offsetY)*t.scaleY,S=(d[r]+t.offsetX)*t.scaleX,M=(d[r+1]+t.offsetY)*t.scaleY;if(x>=M)return;const _=f[o],B=f[o+1],N=f[o+2],k=f[l],z=f[l+1],$=f[l+2],Y=f[u],Z=f[u+1],W=f[u+2],ot=Math.round(x),xt=Math.round(M);let ht,At,O,I,Q,mt,St,R;for(let H=ot;H<=xt;H++){if(H<C){const ut=H<x?0:(x-H)/(x-C);ht=A-(A-w)*ut,At=_-(_-k)*ut,O=B-(B-z)*ut,I=N-(N-$)*ut}else{let ut;H>M?ut=1:C===M?ut=0:ut=(C-H)/(C-M),ht=w-(w-S)*ut,At=k-(k-Y)*ut,O=z-(z-Z)*ut,I=$-($-W)*ut}let K;H<x?K=0:H>M?K=1:K=(x-H)/(x-M),Q=A-(A-S)*K,mt=_-(_-Y)*K,St=B-(B-Z)*K,R=N-(N-W)*K;const tt=Math.round(Math.min(ht,Q)),at=Math.round(Math.max(ht,Q));let ft=b*H+tt*4;for(let ut=tt;ut<=at;ut++)K=(ht-ut)/(ht-Q),K<0?K=0:K>1&&(K=1),g[ft++]=At-(At-mt)*K|0,g[ft++]=O-(O-St)*K|0,g[ft++]=I-(I-R)*K|0,g[ft++]=255}}function d1(h,t,i){const s=t.coords,r=t.colors;let o,l;switch(t.type){case dh.LATTICE:const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let g=o*u;for(let b=0;b<f;b++,g++)sh(h,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),sh(h,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case dh.TRIANGLES:for(o=0,l=s.length;o<l;o+=3)sh(h,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class f1 extends Bh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/b,x=g/y,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/x},C=b+4,S=y+4,M=s.getCanvas("mesh",C,S),_=M.context,B=_.createImageData(b,y);if(i){const k=B.data;for(let z=0,$=k.length;z<$;z+=4)k[z]=i[0],k[z+1]=i[1],k[z+2]=i[2],k[z+3]=255}for(const k of this._figures)d1(B,k,w);return _.putImageData(B,2,2),{canvas:M.canvas,offsetX:u-2*A,offsetY:d-2*x,scaleX:A,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Ah(t,this._bbox);const o=new Float32Array(2);if(r===De.SHADING)et.singularValueDecompose2dScale(te(t),o);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;et.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else et.singularValueDecompose2dScale(i.baseTransform,o);const l=this._createMeshCanvas(o,r===De.SHADING?null:this._background,i.cachedCanvases);return r!==De.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class m1 extends Bh{getPattern(){return"hotpink"}}function g1(h){switch(h[0]){case"RadialAxial":return new h1(h);case"Mesh":return new f1(h);case"Dummy":return new m1}throw new Error(`Unknown IR type: ${h[0]}`)}const Cp={COLORED:1,UNCOLORED:2};class Fh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),ml("TilingType: "+l);const b=s[0],y=s[1],A=s[2],x=s[3],w=A-b,C=x-y,S=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,S);const[M,_]=S;et.singularValueDecompose2dScale(this.baseTransform,S);const B=M*S[0],N=_*S[1];let k=w,z=C,$=!1,Y=!1;const Z=Math.ceil(f*B),W=Math.ceil(g*N),ot=Math.ceil(w*B),xt=Math.ceil(C*N);Z>=ot?k=f:$=!0,W>=xt?z=g:Y=!0;const ht=this.getSizeAndScale(k,this.ctx.canvas.width,B),At=this.getSizeAndScale(z,this.ctx.canvas.height,N),O=t.cachedCanvases.getCanvas("pattern",ht.size,At.size),I=O.context,Q=d.createCanvasGraphics(I,i);if(Q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Q,o,u),I.translate(-ht.scale*b,-At.scale*y),Q.transform(0,ht.scale,0,0,At.scale,0,0),I.save(),Q.dependencyTracker?.save(),this.clipBbox(Q,b,y,A,x),Q.baseTransform=te(Q.ctx),Q.executeOperatorList(r),Q.endDrawing(),Q.dependencyTracker?.restore(),I.restore(),$||Y){const mt=O.canvas;$&&(k=f),Y&&(z=g);const St=this.getSizeAndScale(k,this.ctx.canvas.width,B),R=this.getSizeAndScale(z,this.ctx.canvas.height,N),H=St.size,K=R.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",H,K),at=tt.context,ft=$?Math.floor(w/f):0,ut=Y?Math.floor(C/g):0;for(let qt=0;qt<=ft;qt++)for(let J=0;J<=ut;J++)at.drawImage(mt,H*qt,K*J,H,K,0,0,H,K);return{canvas:tt.canvas,scaleX:St.scale,scaleY:R.scale,offsetX:b,offsetY:y}}return{canvas:O.canvas,scaleX:ht.scale,scaleY:At.scale,offsetX:b,offsetY:y}}getSizeAndScale(t,i,s){const r=Math.max(Fh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const l=r-i,u=o-s;t.ctx.rect(i,s,l,u),et.axialAlignedBoundingBox([i,s,r,o],te(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case Cp.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=l,r.strokeStyle=o.strokeColor=u;break;case Cp.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new _A(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,o){let l=s;r!==De.SHADING&&(l=et.transform(l,i.baseTransform),this.matrix&&(l=et.transform(l,this.matrix)));const u=this.createPatternCanvas(i,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function p1({src:h,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=pe.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],g=s>>3,b=s&7,y=h.length;i=new Uint32Array(i.buffer);let A=0;for(let x=0;x<r;x++){for(const C=t+g;t<C;t++){const S=t<y?h[t]:255;i[A++]=S&128?f:d,i[A++]=S&64?f:d,i[A++]=S&32?f:d,i[A++]=S&16?f:d,i[A++]=S&8?f:d,i[A++]=S&4?f:d,i[A++]=S&2?f:d,i[A++]=S&1?f:d}if(b===0)continue;const w=t<y?h[t++]:255;for(let C=0;C<b;C++)i[A++]=w&1<<7-C?f:d}return{srcPos:t,destPos:A}}const _p=16,Mp=100,b1=15,Dp=10,Ve=16,ah=new DOMMatrix,ai=new Float32Array(2),ia=new Float32Array([1/0,1/0,-1/0,-1/0]);function y1(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,r,o,l,u){t.transform(i,s,r,o,l,u),this.__originalTransform(i,s,r,o,l,u)},h.setTransform=function(i,s,r,o,l,u){t.setTransform(i,s,r,o,l,u),this.__originalSetTransform(i,s,r,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,r,o,l,u){t.bezierCurveTo(i,s,r,o,l,u),this.__originalBezierCurveTo(i,s,r,o,l,u)},h.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class v1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Wo(h,t,i,s,r,o,l,u,d,f){const[g,b,y,A,x,w]=te(h);if(b===0&&y===0){const M=l*g+x,_=Math.round(M),B=u*A+w,N=Math.round(B),k=(l+d)*g+x,z=Math.abs(Math.round(k)-_)||1,$=(u+f)*A+w,Y=Math.abs(Math.round($)-N)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),_,N),h.drawImage(t,i,s,r,o,0,0,z,Y),h.setTransform(g,b,y,A,x,w),[z,Y]}if(g===0&&A===0){const M=u*y+x,_=Math.round(M),B=l*b+w,N=Math.round(B),k=(u+f)*y+x,z=Math.abs(Math.round(k)-_)||1,$=(l+d)*b+w,Y=Math.abs(Math.round($)-N)||1;return h.setTransform(0,Math.sign(b),Math.sign(y),0,_,N),h.drawImage(t,i,s,r,o,0,0,Y,z),h.setTransform(g,b,y,A,x,w),[Y,z]}h.drawImage(t,i,s,r,o,l,u,d,f);const C=Math.hypot(g,b),S=Math.hypot(y,A);return[C*d,S*f]}class Np{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=hh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ge.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=ia.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=De.FILL,i=null){const s=this.minMax.slice();if(t===De.STROKE){i||jt("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(i,ai);const r=ai[0]*this.lineWidth/2,o=ai[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ia,0)}getClippedPathBoundingBox(t=De.FILL,i=null){return et.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Rp(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Ve,o=(i-r)/Ve,l=r===0?o:o+1,u=h.createImageData(s,Ve);let d=0,f;const g=t.data,b=u.data;let y,A,x,w;if(t.kind===el.GRAYSCALE_1BPP){const C=g.byteLength,S=new Uint32Array(b.buffer,0,b.byteLength>>2),M=S.length,_=s+7>>3,B=4294967295,N=pe.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(x=y<o?Ve:r,f=0,A=0;A<x;A++){const k=C-d;let z=0;const $=k>_?s:k*8-7,Y=$&-8;let Z=0,W=0;for(;z<Y;z+=8)W=g[d++],S[f++]=W&128?B:N,S[f++]=W&64?B:N,S[f++]=W&32?B:N,S[f++]=W&16?B:N,S[f++]=W&8?B:N,S[f++]=W&4?B:N,S[f++]=W&2?B:N,S[f++]=W&1?B:N;for(;z<$;z++)Z===0&&(W=g[d++],Z=128),S[f++]=W&Z?B:N,Z>>=1}for(;f<M;)S[f++]=0;h.putImageData(u,0,y*Ve)}}else if(t.kind===el.RGBA_32BPP){for(A=0,w=s*Ve*4,y=0;y<o;y++)b.set(g.subarray(d,d+w)),d+=w,h.putImageData(u,0,A),A+=Ve;y<l&&(w=s*r*4,b.set(g.subarray(d,d+w)),h.putImageData(u,0,A))}else if(t.kind===el.RGB_24BPP)for(x=Ve,w=s*x,y=0;y<l;y++){for(y>=o&&(x=r,w=s*x),f=0,A=w;A--;)b[f++]=g[d++],b[f++]=g[d++],b[f++]=g[d++],b[f++]=255;h.putImageData(u,0,y*Ve)}else throw new Error(`bad image kind: ${t.kind}`)}function Op(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Ve,o=(i-r)/Ve,l=r===0?o:o+1,u=h.createImageData(s,Ve);let d=0;const f=t.data,g=u.data;for(let b=0;b<l;b++){const y=b<o?Ve:r;({srcPos:d}=p1({src:f,srcPos:d,dest:g,width:s,height:y,nonBlackColor:0})),h.putImageData(u,0,b*Ve)}}function lr(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Qo(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function kp(h,t){if(t)return!0;et.singularValueDecompose2dScale(h,ai);const i=Math.fround(Fi.pixelRatio*ua.PDF_TO_CSS_UNITS);return ai[0]<=i&&ai[1]<=i}const A1=["butt","round","square"],w1=["miter","round","bevel"],x1={},Lp={};class oa{constructor(t,i,s,r,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,g){this.ctx=t,this.current=new Np(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new v1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...te(this.compositeCtx))}this.ctx.save(),Qo(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=te(this.ctx)}executeOperatorList(t,i,s,r,o){const l=t.argsArray,u=t.fnArray;let d=i||0;const f=l.length;if(f===d)return d;const g=f-d>Dp&&typeof s=="function",b=g?Date.now()+b1:0;let y=0;const A=this.commonObjs,x=this.objs;let w,C;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,s),d;if(!o||o(d))if(w=u[d],C=l[d]??null,w!==br.dependency)C===null?this[w](d):this[w](d,...C);else for(const S of C){this.dependencyTracker?.recordNamedData(S,d);const M=S.startsWith("g_")?A:x;if(!M.has(S))return M.get(S,s),d}if(d++,d===f)return d;if(g&&++y>Dp){if(Date.now()>b)return s(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),l=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=r,f="prescale1",g,b;for(;o>2&&u>1||l>2&&d>1;){let y=u,A=d;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,y,A),b=g.context,b.clearRect(0,0,y,A),b.drawImage(t,0,0,u,d,0,0,y,A),t=g.canvas,u=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:o}=i,l=this.current.fillColor,u=this.current.patternFill,d=te(s);let f,g,b,y;if((i.bitmap||i.data)&&i.count>1){const Z=i.bitmap||i.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const W=f.get(g);if(W&&!u){const ot=Math.round(Math.min(d[0],d[2])+d[4]),xt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,yi.transformAndFill),{canvas:W,offsetX:ot,offsetY:xt}}b=W}b||(y=this.cachedCanvases.getCanvas("maskCanvas",r,o),Op(y.context,i));let A=et.transform(d,[1/r,0,0,-1/o,0,0]);A=et.transform(A,[1,0,0,1,0,-o]);const x=ia.slice();et.axialAlignedBoundingBox([0,0,r,o],A,x);const[w,C,S,M]=x,_=Math.round(S-w)||1,B=Math.round(M-C)||1,N=this.cachedCanvases.getCanvas("fillCanvas",_,B),k=N.context,z=w,$=C;k.translate(-z,-$),k.transform(...A),b||(b=this._scaleImage(y.canvas,Ri(k)),b=b.img,f&&u&&f.set(g,b)),k.imageSmoothingEnabled=kp(te(k),i.interpolate),Wo(k,b,0,0,b.width,b.height,0,0,r,o),k.globalCompositeOperation="source-in";const Y=et.transform(Ri(k),[1,0,0,1,-z,-$]);return k.fillStyle=u?l.getPattern(s,this,Y,De.FILL,t):l,k.fillRect(0,0,r,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,N.canvas)),this.dependencyTracker?.recordDependencies(t,yi.transformAndFill),{canvas:N.canvas,offsetX:Math.round(z),offsetY:Math.round($)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=A1[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=w1[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),lr(this.suspendedCtx,l),y1(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],l=r[1],u=r[2]-o,d=r[3]-l;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,l,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,l,u,d,f,g,b){let y=t.canvas,A=d-g,x=f-b;if(l)if(A<0||x<0||A+s>y.width||x+r>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,r),S=C.context;S.drawImage(y,-A,-x),S.globalCompositeOperation="destination-atop",S.fillStyle=l,S.fillRect(0,0,s,r),S.globalCompositeOperation="source-over",y=C.canvas,A=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,x,s,r),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,x,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(d,f,s,r),i.clip(w),i.globalCompositeOperation="destination-in",i.drawImage(y,A,x,s,r,d,f,s,r),i.restore()}save(t){this.inSMaskMode&&lr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[o]=s;if(!r){o||=s[0]=new Path2D,this[i](t,o);return}if(this.dependencyTracker!==null){const l=i===br.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-l,r[2]+l,r[1]-l,r[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=n0(o)),et.axialAlignedBoundingBox(r,te(this.ctx),this.current.minMax),this[i](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,o=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=o.getPattern(r,this,Ri(r),De.STROKE,t),l){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(l)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,yi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(De.STROKE,te(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=o.getPattern(r,this,Ri(r),De.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,yi.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,d)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,yi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=x1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Lp}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),o=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=r.fontMatrix||hh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&gt("Invalid font matrix for font "+i),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const l=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${l}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const f=r.italic?"italic":"normal";let g=s;s<_p?g=_p:s>Mp&&(g=Mp),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o,l){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,b=d.fontSize/d.fontSizeScale,y=g&ge.FILL_STROKE_MASK,A=!!(g&ge.ADD_TO_PATH_FLAG),x=d.patternFill&&!f.missingFile,w=d.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||A||x||w)&&!f.missingFile&&(C=f.getPathGenerator(this.commonObjs,i)),C&&(f.disableFontFace||x||w)){u.save(),u.translate(s,r),u.scale(b,-b),this.dependencyTracker?.recordCharacterBBox(t,u,f);let S;if(y===ge.FILL||y===ge.FILL_STROKE)if(o){S=u.getTransform(),u.setTransform(...o);const M=this.#n(C,S,o);u.fill(M)}else u.fill(C);if(y===ge.STROKE||y===ge.FILL_STROKE)if(l){S||=u.getTransform(),u.setTransform(...l);const{a:M,b:_,c:B,d:N}=S,k=et.inverseTransform(l),z=et.transform([M,_,B,N,0,0],k);et.singularValueDecompose2dScale(z,ai),u.lineWidth*=Math.max(ai[0],ai[1])/b,u.stroke(this.#n(C,S,l))}else u.lineWidth/=b,u.stroke(C);u.restore()}else(y===ge.FILL||y===ge.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,r,()=>u.measureText(i))),(y===ge.STROKE||y===ge.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,r,()=>u.measureText(i)).recordDependencies(t,yi.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:te(u),x:s,y:r,fontSize:b,path:C}),this.dependencyTracker?.recordCharacterBBox(t,u,f,b,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return pt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,yi.showText).resetBBox(t),this.current.textRenderingMode&ge.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,b=s.textHScale*g,y=i.length,A=r.vertical,x=A?1:-1,w=r.defaultVMetrics,C=o*s.fontMatrix[0],S=s.textRenderingMode===ge.FILL&&!r.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(b,-1):l.scale(b,1);let M,_;const B=s.textRenderingMode&ge.FILL_STROKE_MASK,N=B===ge.FILL||B===ge.FILL_STROKE,k=B===ge.STROKE||B===ge.FILL_STROKE;if(N&&s.patternFill){l.save();const W=s.fillColor.getPattern(l,this,Ri(l),De.FILL,t);M=te(l),l.restore(),l.fillStyle=W}if(k&&s.patternStroke){l.save();const W=s.strokeColor.getPattern(l,this,Ri(l),De.STROKE,t);_=te(l),l.restore(),l.strokeStyle=W}let z=s.lineWidth;const $=s.textMatrixScale;if($===0||z===0?k&&(z=this.getSinglePixelWidth()):z/=$,u!==1&&(l.scale(u,u),z/=u),l.lineWidth=z,r.isInvalidPDFjsFont){const W=[];let ot=0;for(const ht of i)W.push(ht.unicode),ot+=ht.width;const xt=W.join("");if(l.fillText(xt,0,0),this.dependencyTracker!==null){const ht=l.measureText(xt);this.dependencyTracker.recordBBox(t,this.ctx,-ht.actualBoundingBoxLeft,ht.actualBoundingBoxRight,-ht.actualBoundingBoxAscent,ht.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ot*C*b,l.restore(),this.compose();return}let Y=0,Z;for(Z=0;Z<y;++Z){const W=i[Z];if(typeof W=="number"){Y+=x*W*o/1e3;continue}let ot=!1;const xt=(W.isSpace?f:0)+d,ht=W.fontChar,At=W.accent;let O,I,Q=W.width;if(A){const R=W.vmetric||w,H=-(W.vmetric?R[1]:Q*.5)*C,K=R[2]*C;Q=R?-R[0]:Q,O=H/u,I=(Y+K)/u}else O=Y/u,I=0;let mt;if(r.remeasure&&Q>0){mt=l.measureText(ht);const R=mt.width*1e3/o*u;if(Q<R&&this.isFontSubpixelAAEnabled){const H=Q/R;ot=!0,l.save(),l.scale(H,1),O/=H}else Q!==R&&(O+=(Q-R)/2e3*o/u)}if(this.contentVisible&&(W.isInFont||r.missingFile)){if(S&&!At)l.fillText(ht,O,I),this.dependencyTracker?.recordCharacterBBox(t,l,mt?{bbox:null}:r,o/u,O,I,()=>mt??l.measureText(ht));else if(this.paintChar(t,ht,O,I,M,_),At){const R=O+o*At.offset.x/u,H=I-o*At.offset.y/u;this.paintChar(t,At.fontChar,R,H,M,_)}}const St=A?Q*C-xt*g:Q*C+xt*g;Y+=St,ot&&l.restore()}A?s.y-=Y:s.x+=Y*b,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,o=r.font,l=r.fontSize,u=r.fontDirection,d=o.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,b=r.textHScale*u,y=r.fontMatrix||hh,A=i.length,x=r.textRenderingMode===ge.INVISIBLE;let w,C,S,M;if(x||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(b,u);const _=this.dependencyTracker;for(this.dependencyTracker=_?new ol(_,t):null,w=0;w<A;++w){if(C=i[w],typeof C=="number"){M=d*C*l/1e3,this.ctx.translate(M,0),r.x+=M*b;continue}const B=(C.isSpace?g:0)+f,N=o.charProcOperatorList[C.operatorListId];N?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...y),this.executeOperatorList(N),this.restore()):gt(`Type3 character "${C.operatorListId}" is not available.`);const k=[C.width,0];et.applyTransform(k,y),S=k[0]*l+B,s.translate(S,0),r.x+=S*b}s.restore(),_&&(this.dependencyTracker=_)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,o,l,u){const d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,l,o,u).recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||te(this.ctx),o={createCanvasGraphics:(l,u)=>new oa(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ol(this.dependencyTracker,u,!0):null)};s=new Fh(i,this.ctx,o,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=g1(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Ri(s),De.SHADING,t);const o=Ri(s);if(o){const{width:l,height:u}=s.canvas,d=ia.slice();et.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,g,b,y]=d;this.ctx.fillRect(f,g,b-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,yi.transform).recordDependencies(t,yi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){jt("Should not call beginInlineImage")}beginImageData(){jt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=te(this.ctx),s)){et.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,o,l,u]=s,d=new Path2D;d.rect(r,o,l-r,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||ml("TODO: Support non-isolated groups."),i.knockout&&gt("Knockout groups not supported.");const r=te(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=ia.slice();et.axialAlignedBoundingBox(i.bbox,te(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=et.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let b="groupAt"+this.groupLevel;i.smask&&(b+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(b,f,g),A=y.context;A.translate(-u,-d),A.transform(...r);let x=new Path2D;const[w,C,S,M]=i.bbox;if(x.rect(w,C,S-w,M-C),i.matrix){const _=new Path2D;_.addPath(x,new DOMMatrix(i.matrix)),x=_}A.clip(x),i.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:u,offsetY:d,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),lr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=te(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ia.slice();et.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,i,s,r,o,l){if(this.#t(),Qo(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,et.singularValueDecompose2dScale(te(this.ctx),ai);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),b=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,b);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(ai[0],0,0,-ai[1],0,d*ai[1]),Qo(this.ctx)}else{Qo(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new Np(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,o=this._createMaskCanvas(t,i),l=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,o=0,l,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const d=this.ctx;d.save();const f=te(d);d.transform(s,r,o,l,0,0);const g=this._createMaskCanvas(t,i);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let b=0,y=u.length;b<y;b+=2){const A=et.transform(f,[s,r,o,l,u[b],u[b+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,yi.transformAndFill);for(const l of i){const{data:u,width:d,height:f,transform:g}=l,b=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=b.context;y.save();const A=this.getObject(t,u,l);Op(y,A),y.globalCompositeOperation="source-in",y.fillStyle=o?r.getPattern(y,this,Ri(s),De.FILL,t):r,y.fillRect(0,0,d,f),y.restore(),s.save(),s.transform(...g),s.scale(1,-1),Wo(s,b.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){gt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,o){if(!this.contentVisible)return;const l=this.getObject(t,i);if(!l){gt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let g=0,b=o.length;g<b;g+=2)f.push({transform:[s,0,0,r,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(i,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Rp(g,i),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Ri(o));o.imageSmoothingEnabled=kp(te(o),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-r,0).recordDependencies(t,yi.imageXObject).recordOperation(t),Wo(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const l=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Rp(f,i),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)r.save(),r.transform(...l.transform),r.scale(1,-1),Wo(r,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,yi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(r||(this.pendingClip===Lp?o.clip(i,"evenodd"):o.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=te(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let l,u;if(s===0&&r===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/f;else{const g=d*t,b=f*t;l=g<1?1/g:1,u=b<1?1/b:1}}else{const d=Math.abs(i*o-s*r),f=Math.hypot(i,s),g=Math.hypot(r,o);if(t===0)l=g/d,u=f/d;else{const b=t*d;l=g>b?g/b:1,u=f>b?f/b:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,l),ah.a=1/o,ah.d=1/l;const d=new Path2D;if(d.addPath(t,ah),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in br)oa.prototype[h]!==void 0&&(oa.prototype[br[h]]=oa.prototype[h]);class la{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class S1{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Js=Symbol("INTERNAL");class E1{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&ni.DISPLAY),this.#e=!!(t&ni.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==Js&&jt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class T1{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=ni.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new E1(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Js,!1);for(const s of t.on)this.#e.get(s)._setVisible(Js,!0);for(const s of t.off)this.#e.get(s)._setVisible(Js,!1);this.#n=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let l;if(Array.isArray(o))l=this.#a(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return gt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return ml("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(gt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return gt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return gt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return gt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return gt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return gt(`Unknown optional content policy ${t.policy}.`),!0}return gt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){gt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Js,!1,!0);r._setVisible(Js,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new a0;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class yl{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,i,s){this._source=t,this.#t=i,this.#e=s}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return zt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new this.#e(this,t,i);return this._rangeReaders.add(s),s}cancelAllRequests(t){this._fullReader?.cancel(t);for(const i of new Set(this._rangeReaders))i.cancel(t)}}class vl{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){jt("Abstract method `read` called")}cancel(t){jt("Abstract method `cancel` called")}}class Al{_stream=null;constructor(t,i,s){this._stream=t}async read(){jt("Abstract method `read` called")}cancel(t){jt("Abstract method `cancel` called")}}function Bp(h){return h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer}class C1 extends yl{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,_1,M1);const{pdfDataRangeTransport:i}=t,{initialData:s,progressiveDone:r}=i;if(s?.length>0){const o=Bp(s);this._queuedChunks.push(o)}this._progressiveDone=r,i.addRangeListener((o,l)=>{this.#t(o,l)}),i.addProgressListener((o,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:l})}),i.addProgressiveReadListener(o=>{this.#t(void 0,o)}),i.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),i.transportReady()}#t(t,i){const s=Bp(i);if(t===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.keys().find(o=>o._begin===t);zt(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(s)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(t,i)),s}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class _1 extends vl{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:i,disableRange:s,disableStream:r}=t._source,{length:o,contentDispositionFilename:l}=i;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!r,this._isRangeSupported=!s,Nh(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class M1 extends Al{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,i,s){super(t,i,s),this._begin=i}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function D1(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let g=u(i);return g=unescape(g),g=d(g),g=f(g),o(g)}if(i=l(h),i){const g=f(i);return o(g)}if(i=s("filename","i").exec(h),i){i=i[1];let g=u(i);return g=f(g),o(g)}function s(g,b){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function r(g,b){if(g){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(g,{fatal:!0}),A=gl(b);b=y.decode(A),t=!1}catch{}}return b}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function l(g){const b=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(g))!==null;){let[,w,C,S]=y;if(w=parseInt(w,10),w in b){if(w===0)break;continue}b[w]=[C,S]}const x=[];for(let w=0;w<b.length&&w in b;++w){let[C,S]=b[w];S=u(S),C&&(S=unescape(S),w===0&&(S=d(S))),x.push(S)}return x.join("")}function u(g){if(g.startsWith('"')){const b=g.slice(1).split('\\"');for(let y=0;y<b.length;++y){const A=b[y].indexOf('"');A!==-1&&(b[y]=b[y].slice(0,A),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}g=b.join('"')}return g}function d(g){const b=g.indexOf("'");if(b===-1)return g;const y=g.slice(0,b),x=g.slice(b+1).replace(/^[^']*'/,"");return r(y,x)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,A,x){if(A==="q"||A==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,C){return String.fromCharCode(parseInt(C,16))}),r(y,x);try{x=atob(x)}catch{}return r(y,x)})}return""}function d0(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function wl(h){return URL.parse(h)?.origin??null}function f0({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function m0(h){const t=h.get("Content-Disposition");if(t){let i=D1(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Nh(i))return i}return null}function xl(h,t){return new rl(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function g0(h,t){if(h!==t)throw new Error(`Expected range response-origin "${h}" to match "${t}".`)}function p0(h,t,i,s){return fetch(h,{method:"GET",headers:t,signal:s.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"})}function b0(h,t){if(h!==200&&h!==206)throw xl(h,t)}function y0(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(gt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class N1 extends yl{_responseOrigin=null;constructor(t){super(t,R1,O1),this.isHttp=/^https?:/i.test(t.url),this.headers=d0(this.isHttp,t.httpHeaders)}}class R1 extends vl{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o,url:l,withCredentials:u}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const d=new Headers(t.headers);p0(l,d,u,this._abortController).then(f=>{t._responseOrigin=wl(f.url),b0(f.status,l),this._reader=f.body.getReader();const g=f.headers,{allowRangeRequests:b,suggestedLength:y}=f0({responseHeaders:g,isHttp:t.isHttp,rangeChunkSize:o,disableRange:i});this._isRangeSupported=b,this._contentLength=y||this._contentLength,this._filename=m0(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kn("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:y0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class O1 extends Al{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const{url:r,withCredentials:o}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`),p0(r,l,o,this._abortController).then(u=>{const d=wl(u.url);g0(d,t._responseOrigin),b0(u.status,r),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:y0(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const rh=200,Fp=206;function k1(h){return typeof h!="string"?h:gl(h).buffer}class L1 extends yl{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,B1,F1),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=d0(this.isHttp,t.httpHeaders)}_request(t){const i=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(i,s),i.open("GET",this.url),i.withCredentials=this._source.withCredentials;for(const[r,o]of this.headers)i.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.validateStatus=r=>r===Fp||r===rh):s.validateStatus=r=>r===rh,i.responseType="arraybuffer",zt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>t.onError(i.status),i.onreadystatechange=this.#n.bind(this,i),i.onprogress=this.#e.bind(this,i),i.send(null),i}#e(t,i){this.#t.get(t)?.onProgress?.(i)}#n(t,i){const s=this.#t.get(t);if(!s||(t.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){s.onError(t.status);return}const r=t.status||rh;if(!s.validateStatus(r)){s.onError(t.status);return}const o=k1(t.response);if(r===Fp){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?s.onDone(o):(gt('Missing or invalid "Content-Range" header.'),s.onError(0))}else o?s.onDone(o):s.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}class B1 extends vl{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:i}=t._source;this._contentLength=i,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:this.#i.bind(this)})}#t(){const t=this._stream,{disableRange:i,rangeChunkSize:s}=t._source,r=this._fullRequestXhr;t._responseOrigin=wl(r.responseURL);const o=r.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[g,...b]=f.split(": ");return[g,b.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:d}=f0({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:s,disableRange:i});u&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=m0(l),this._isRangeSupported&&t._abortRequest(r),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}#n(t){this._storedError=xl(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#i(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class F1 extends Al{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,i,s){super(t,i,s),this._requestXhr=t._request({begin:i,end:s,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:null})}#t(){const t=wl(this._requestXhr?.responseURL);try{g0(t,this._stream._responseOrigin)}catch(i){this._storedError=i,this.#n(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#n(t){this._storedError??=xl(t,this._stream.url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const z1=/^[a-z][a-z0-9\-+.]+:/i;function j1(h){if(z1.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}function v0(h){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(h):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(h)}function A0(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(gt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class P1 extends yl{constructor(t){super(t,U1,I1),this.url=j1(t.url),zt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class U1 extends vl{_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:o}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const l=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(l).then(d=>{const f=u.createReadStream(l),g=v0(f);this._reader=g.getReader();const{size:b}=d;b<=2*o&&(this._isRangeSupported=!1),this._contentLength=b,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new kn("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=xl(0,l.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:A0(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class I1 extends Al{_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const r=t.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(r,{start:i,end:s-1}),u=v0(l);this._reader=u.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:A0(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const cr=Symbol("INITIAL_DATA");class w0{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:cr}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===cr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==cr}delete(t){const i=this.#t[t];return!i||i.data===cr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==cr&&(yield[t,i])}}}const H1=1e5,zp=30;class si{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#p=[];#g=null;#u=[];#m=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#T=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Fi.pixelRatio,this.#d=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#b=[1,0,0,-1,-l,u+o],this.#o=r,this.#s=o,si.#D(),i.style.setProperty("--min-font-size",si.#S),ns(i,s),this.#t.promise.finally(()=>{si.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=pe.platform;return pt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#_(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),si.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Fi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ns(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const o={div:null,properties:null,ctx:si.#N(this.#a)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const t=new kn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#p}#_(t){if(this.#n)return;this.#r.ctx??=si.#N(this.#a);const i=this.#u,s=this.#p;for(const r of t){if(i.length>H1){gt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=et.transform(this.#b,t.transform);let o=Math.atan2(r[1],r[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#i&&l.fontSubstitution||l.fontFamily;u=si.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*si.#z(u,l,this.#a);let g,b;o===0?(g=r[4],b=r[5]-f):(g=r[4]+f*Math.sin(o),b=r[5]-f*Math.cos(o));const y=i.style;y.left=`${(100*g/this.#o).toFixed(2)}%`,y.top=`${(100*b/this.#s).toFixed(2)}%`,y.setProperty("--font-height",`${d.toFixed(2)}px`),y.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);x!==w&&Math.max(x,w)/Math.min(x,w)>1.5&&(A=!0)}if(A&&(s.canvasWidth=l.vertical?t.height:t.width),this.#m.set(i,s),this.#r.div=i,this.#r.properties=s,this.#E(this.#r),s.hasText&&this.#e.append(i),s.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#E(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:d}=s;si.#M(r,d*this.#h,l);const{width:f}=r.measureText(i.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&o.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#N(t=null){let i=this.#y.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,i),this.#T.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#T.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#D(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const r=this.#v.get(t);if(r)return r;const o=this.#N(s);o.canvas.width=o.canvas.height=zp,this.#M(o,zp,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(pe.platform.isFirefox&&gt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const G1=100;function x0(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new zh,{docId:i}=t,s=h.url?QA(h.url):null,r=h.data?ZA(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof S0?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof vr?h.worker:null;const b=h.verbosity,y=typeof h.docBaseUrl=="string"&&!pl(h.docBaseUrl)?h.docBaseUrl:null,A=Xo(h.cMapUrl),x=h.cMapPacked!==!1,w=h.CMapReaderFactory||(ke?r1:wp),C=Xo(h.iccUrl),S=Xo(h.standardFontDataUrl),M=h.StandardFontDataFactory||(ke?o1:xp),_=Xo(h.wasmUrl),B=h.WasmFactory||(ke?l1:Sp),N=h.stopAtErrors!==!0,k=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,z=h.isEvalSupported!==!1,$=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!ke,Y=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!ke&&(pe.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,W=typeof h.disableFontFace=="boolean"?h.disableFontFace:ke,ot=h.fontExtraProperties===!0,xt=h.enableXfa===!0,ht=h.ownerDocument||globalThis.document,At=h.disableRange===!0,O=h.disableStream===!0,I=h.disableAutoFetch===!0,Q=h.pdfBug===!0,mt=h.CanvasFactory||(ke?a1:i1),St=h.FilterFactory||(ke?s1:n1),R=h.enableHWA===!0,H=h.useWasm!==!1,K=d?d.length:h.length??NaN,tt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!ke&&!W,at=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(w===wp&&M===xp&&B===Sp&&A&&S&&_&&dr(A,document.baseURI)&&dr(S,document.baseURI)&&dr(_,document.baseURI)),ft=null;EA(b);const ut={canvasFactory:new mt({ownerDocument:ht,enableHWA:R}),filterFactory:new St({docId:i,ownerDocument:ht}),cMapReaderFactory:at?null:new w({baseUrl:A,isCompressed:x}),standardFontDataFactory:at?null:new M({baseUrl:S}),wasmFactory:at?null:new B({baseUrl:_})};g||(g=vr.create({verbosity:b,port:la.workerPort}),t._worker=g);const qt={docId:i,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:I,rangeChunkSize:f,length:K,docBaseUrl:y,enableXfa:xt,evaluatorOptions:{maxImageSize:k,disableFontFace:W,ignoreErrors:N,isEvalSupported:z,isOffscreenCanvasSupported:$,isImageDecoderSupported:Y,canvasMaxAreaInBytes:Z,fontExtraProperties:ot,useSystemFonts:tt,useWasm:H,useWorkerFetch:at,cMapUrl:A,iccUrl:C,standardFontDataUrl:S,wasmUrl:_}},J={ownerDocument:ht,pdfBug:Q,styleElement:ft,enableHWA:R,loadingParams:{disableAutoFetch:I,enableXfa:xt}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const rt=g.messageHandler.sendWithPromise("GetDocRequest",qt,r?[r.buffer]:null);let It;if(d)It=new C1({pdfDataRangeTransport:d,disableRange:At,disableStream:O});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Jt=dr(s)?N1:ke?P1:L1;It=new Jt({url:s,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:At,disableStream:O})}return rt.then(Jt=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ri=new fr(i,Jt,g.port),be=new X1(ri,t,It,J,ut);t._transport=be,ri.send("Ready",null)})}).catch(t._capability.reject),t}class zh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${zh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class S0{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#a)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){jt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class V1{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Y1{#t=!1;#e=Bt.instance;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new mp:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new w0,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new xr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:o=Nn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:b=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:x=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(r,o,b,y),{renderingIntent:C,cacheKey:S}=w;this.#t=!1,d||=this._transport.getOptionalContentConfig(C);let M=this._intentStates.get(S);M||(M=Object.create(null),this._intentStates.set(S,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const _=!!(C&ni.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const B=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(A||B),k=Y=>{if(M.renderTasks.delete(z),N){const Z=z.gfx?.dependencyTracker.take();Z&&(z.stepper&&z.stepper.setOperatorBBoxes(Z,z.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Z))}_&&(this.#t=!0),this.#n(),Y?(z.capability.reject(Y),this._abortOperatorList({intentState:M,reason:Y instanceof Error?Y:new Error(Y)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new na({callback:k,params:{canvas:i,canvasContext:t,dependencyTracker:N?new u1(i,M.operatorList.length,B):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:x});(M.renderTasks||=new Set).add(z);const $=z.task;return Promise.all([M.displayReadyCapability.promise,d]).then(([Y,Z])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:Y,optionalContentConfig:Z}),z.operatorListChanged()}).catch(k),$}getOperatorList({intent:t="display",annotationMode:i=Nn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>yr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){l.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const l=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#n();return t&&i&&(this._stats&&=new mp),i}#n(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#n()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},l).getReader(),f=this._intentStates.get(i);f.streamReader=d;const g=()=>{d.read().then(({value:b,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),g())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#n()}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Dh){let r=G1;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new kn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Rn,Ei,sn,ts,ul,es,is,Le,il,E0,T0,mr,ca,nl;const Zt=class Zt{constructor({name:t=null,port:i=null,verbosity:s=TA()}={}){Di(this,Le);Di(this,Rn,Promise.withResolvers());Di(this,Ei,null);Di(this,sn,null);Di(this,ts,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Qt(Zt,is).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Qt(Zt,is).set(i,this),Ni(this,Le,E0).call(this,i)}else Ni(this,Le,T0).call(this)}get promise(){return Qt(this,Rn).promise}get port(){return Qt(this,sn)}get messageHandler(){return Qt(this,Ei)}destroy(){this.destroyed=!0,Qt(this,ts)?.terminate(),He(this,ts,null),Qt(Zt,is).delete(Qt(this,sn)),He(this,sn,null),Qt(this,Ei)?.destroy(),He(this,Ei,null)}static create(t){const i=Qt(this,is).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Zt(t)}static get workerSrc(){if(la.workerSrc)return la.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return pt(this,"_setupFakeWorkerGlobal",(async()=>Qt(this,ca,nl)?Qt(this,ca,nl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rn=new WeakMap,Ei=new WeakMap,sn=new WeakMap,ts=new WeakMap,ul=new WeakMap,es=new WeakMap,is=new WeakMap,Le=new WeakSet,il=function(){Qt(this,Rn).resolve(),Qt(this,Ei).send("configure",{verbosity:this.verbosity})},E0=function(t){He(this,sn,t),He(this,Ei,new fr("main","worker",t)),Qt(this,Ei).on("ready",()=>{}),Ni(this,Le,il).call(this)},T0=function(){if(Qt(Zt,es)||Qt(Zt,ca,nl)){Ni(this,Le,mr).call(this);return}let{workerSrc:t}=Zt;try{Zt._isSameOrigin(window.location,t)||(t=Zt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new fr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Qt(this,Rn).reject(new Error("Worker was destroyed")):Ni(this,Le,mr).call(this)},o=new AbortController;i.addEventListener("error",()=>{Qt(this,ts)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}He(this,Ei,s),He(this,sn,i),He(this,ts,i),Ni(this,Le,il).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{Ni(this,Le,mr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{ml("The worker has been disabled.")}Ni(this,Le,mr).call(this)},mr=function(){Qt(Zt,es)||(gt("Setting up fake worker."),He(Zt,es,!0)),Zt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Qt(this,Rn).reject(new Error("Worker was destroyed"));return}const i=new e1;He(this,sn,i);const s=`fake${Xg(Zt,ul)._++}`,r=new fr(s+"_worker",s,i);t.setup(r,i),He(this,Ei,new fr(s,s+"_worker",i)),Ni(this,Le,il).call(this)}).catch(t=>{Qt(this,Rn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ca=new WeakSet,nl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Di(Zt,ca),Di(Zt,ul,0),Di(Zt,es,!1),Di(Zt,is,new WeakMap),ke&&(He(Zt,es,!0),la.workerSrc||="./pdf.worker.mjs"),Zt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Zt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Zt.fromPort=t=>{if(zA("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Zt.create(t)};let vr=Zt;class X1{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#n=null;#i=new Map;#a=new Map;#r=new Map;#s=null;#o=Bt.instance;constructor(t,i,s,r,o){this.messageHandler=t,this.loadingTask=i,this.#n=s,this.commonObjs=new w0,this.fontLoader=new $A({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,i=new Map;for(let s=0,r=this.#o.pagesNumber;s<r;s++){const o=this.#o.getPrevPageNumber(s+1)-1,l=this.#i.get(o);l&&t.set(s,l);const u=this.#a.get(o);u&&i.set(s,u)}this.#i=t,this.#a=i}#l(t,i=null){const s=this.#e.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#e.set(t,r),r}#d({loaded:t,total:i}){this.loadingTask.onProgress?.({loaded:t,total:i,percent:Me(Math.round(t/i*100),0,100)})}get annotationStorage(){return pt(this,"annotationStorage",new kh)}getRenderingIntent(t,i=Nn.ENABLE,s=null,r=!1,o=!1){let l=ni.DISPLAY,u=bh;switch(t){case"any":l=ni.ANY;break;case"display":break;case"print":l=ni.PRINT;break;default:gt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&ni.PRINT&&s instanceof r0?s:this.annotationStorage;switch(i){case Nn.DISABLE:l+=ni.ANNOTATIONS_DISABLE;break;case Nn.ENABLE:break;case Nn.ENABLE_FORMS:l+=ni.ANNOTATIONS_FORMS;break;case Nn.ENABLE_STORAGE:l+=ni.ANNOTATIONS_STORAGE,u=d.serializable;break;default:gt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(l+=ni.IS_EDITING),o&&(l+=ni.OPLIST);const{ids:f,hash:g}=d.modifiedIds,b=[l,u.hash,g];return{renderingIntent:l,cacheKey:b.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#i.values())t.push(s._destroy());this.#i.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),si.cleanup(),this.#n?.cancelAllRequests(new kn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{zt(this.#n,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#n.getFullReader(),this.#t.onProgress=o=>this.#d(o),r.onPull=()=>{this.#t.read().then(function({value:o,done:l}){if(l){r.close();return}zt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this.#t.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this.#t.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this.#t;return r&&o&&(this.#t.onProgress=null),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,r)=>{zt(this.#n,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#n.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){r.close();return}zt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this.#o.pagesNumber=s.numPages,this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new V1(s,this))}),t.on("DocException",s=>{i._capability.reject(Ge(s))}),t.on("PasswordRequest",s=>{this.#s=Promise.withResolvers();try{if(!i.onPassword)throw Ge(s);const r=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",s=>{this.#d({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#i.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const b=o.error;gt(`Error during font loading: ${b}`),this.commonObjs.resolve(s,b);break}const l=new Yt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(b,y)=>globalThis.FontInspector.fontAdded(b,y):null,d=new KA(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;zt(f,"The imageRef must be defined.");for(const b of this.#i.values())for(const[,y]of b.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new WA(o));break;case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new Ae(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,l])=>{if(this.destroyed)return;const u=this.#i.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||this.#d(s)}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&gt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#o.getPageId(t)-1,r=this.#a.get(i);if(r)return r;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#r.set(l.refStr,s);const u=new Y1(i,l,this,this._params.pdfBug);return this.#i.set(i,u),u});return this.#a.set(i,o),o}async getPageIndex(t){if(!yh(t))throw new Error("Invalid pageIndex request.");const i=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(i+1)-1}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:i})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(i=>new T1(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#e.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new S1(r[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#i.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),si.cleanup()}}cachedPageNumber(t){if(!yh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,s=this.#r.get(i);return s>=0?this.#o.getPageNumber(s+1):null}}class q1{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this._internalRenderTask;return t.form||t.canvas&&i?.size>0}}class na{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:x=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new q1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(na.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");na.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new oa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),na.#e.delete(this._canvas),t||=new Dh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),na.#e.delete(this._canvas),this.callback())))}}const $1="5.4.624",K1="384c6208b";class vi{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return pt(this,"_keyboardManager",new Er([[["Escape","mac+Escape"],vi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vi.prototype._moveToPrevious],[["Home","mac+Home"],vi.prototype._moveToBeginning],[["End","mac+End"],vi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",vi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#p.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",Ai,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",vi.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.ariaSelected=r===this.#n,o.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#p.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Nt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#m){this.#g(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#g(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#m){this.#g(t);return}this.#i.lastElementChild?.focus()}#p(t){vi._keyboardManager.exec(this,t)}#g(t){if(this.#m){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Ar{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Ar.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Ar.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function jp(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function ur(h){return Math.max(0,Math.min(255,255*h))}class Pp{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ur(t),[t,t,t]}static G_HTML([t]){const i=jp(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(ur)}static RGB_HTML(t){return`#${t.map(jp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[ur(1-Math.min(1,t+r)),ur(1-Math.min(1,s+r)),ur(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,l=1-s,u=Math.min(r,o,l);return["CMYK",r,o,l,u]}}class W1{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){jt("Abstract method `_createSVG` called.")}}class ll extends W1{_createSVG(t){return document.createElementNS(en,t)}}const Q1=9,ss=new WeakSet,Z1=new Date().getTimezoneOffset()*60*1e3;class oh{static create(t){switch(t.data.annotationType){case fe.LINK:return new jh(t);case fe.TEXT:return new tw(t);case fe.WIDGET:switch(t.data.fieldType){case"Tx":return new ew(t);case"Btn":return t.data.radioButton?new C0(t):t.data.checkBox?new nw(t):new sw(t);case"Ch":return new aw(t);case"Sig":return new iw(t)}return new rs(t);case fe.POPUP:return new wh(t);case fe.FREETEXT:return new _0(t);case fe.LINE:return new ow(t);case fe.SQUARE:return new lw(t);case fe.CIRCLE:return new cw(t);case fe.POLYLINE:return new M0(t);case fe.CARET:return new hw(t);case fe.INK:return new Ph(t);case fe.POLYGON:return new uw(t);case fe.HIGHLIGHT:return new D0(t);case fe.UNDERLINE:return new dw(t);case fe.SQUIGGLY:return new fw(t);case fe.STRIKEOUT:return new mw(t);case fe.STAMP:return new N0(t);case fe.FILEATTACHMENT:return new gw(t);default:return new ee(t)}}}class ee{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ee._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let o=-1/0,l=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>l?(l=i[u+1],o=i[u+2]):i[u+1]===l&&(o=Math.max(o,i[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:l}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${pr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${pr}${i.id}`,{id:i.id,annotationType:i.annotationType,page:this.parent.page,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(l-t[3]+d)/l}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof rs)&&!(this instanceof jh)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof wh){const{rotation:w}=i;return!i.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){l.borderWidth=`${i.borderStyle.width}px`;const w=i.borderStyle.horizontalCornerRadius,C=i.borderStyle.verticalCornerRadius;if(w>0||C>0){const M=`calc(${w}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;l.borderRadius=M}else if(this instanceof C0){const M=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=M}switch(i.borderStyle.style){case Zs.SOLID:l.borderStyle="solid";break;case Zs.DASHED:l.borderStyle="dashed";break;case Zs.BEVELED:gt("Unimplemented border style: beveled");break;case Zs.INSET:gt("Unimplemented border style: inset");break;case Zs.UNDERLINE:l.borderBottomStyle="solid";break}const S=i.borderColor||null;S?(this.#e=!0,l.borderColor=et.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const f=et.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:b,pageX:y,pageY:A}=r.rawDims;l.left=`${100*(f[0]-y)/g}%`,l.top=`${100*(f[1]-A)/b}%`;const{rotation:x}=i;return i.hasOwnCanvas||x===0?(l.width=`${100*u/g}%`,l.height=`${100*d/b}%`):this.setRotation(x,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*l/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],l=o[0],u=o.slice(1);r.target.style[s]=Pp[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Pp[`${l}_rgb`](u)})};return pt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const l=s[r];if(l){const u={detail:{[r]:o},target:t};l(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,C,S,M]=t.subarray(2,6);if(r===w&&o===C&&i===S&&s===M)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:w,borderWidth:C}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=r-i,f=o-s,{svgFactory:g}=this,b=g.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=g.createElement("defs");b.append(y);const A=g.createElement("clipPath"),x=`clippath_${this.data.id}`;A.setAttribute("id",x),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let w=2,C=t.length;w<C;w+=8){const S=t[w],M=t[w+1],_=t[w+2],B=t[w+3],N=g.createElement("rect"),k=(_-i)/d,z=(o-M)/f,$=(S-_)/d,Y=(M-B)/f;N.setAttribute("x",k),N.setAttribute("y",z),N.setAttribute("width",$),N.setAttribute("height",Y),A.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${z}" width="${$}" height="${Y}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(b),this.container.style.clipPath=`url(#${x})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new wh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){jt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:l,exportValues:u}of r){if(o===-1||l===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!ss.has(f)){gt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==i&&ss.has(r)&&s.push({id:l,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class J1 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class jh extends ee{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){gt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:l}=i,u=[];if(r.length!==0||o.length!==0){const g=new Set(o);for(const b of r){const y=this._fieldObjects[b]||[];for(const{id:A}of y)g.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)g.has(y.id)===l&&u.push(y)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,f=[];for(const g of u){const{id:b}=g;switch(f.push(b),g.type){case"text":{const A=g.defaultValue||"";d.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!ss.has(y)){gt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class tw extends ee{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class rs extends ee{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!i.focused||!l.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}})})}_setEventListeners(t,i,s,r){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,l,r),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":et.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Q1,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/(th*r))||1,b=f/g;l=Math.min(r,d(b/th))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(r,d(f/th))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=et.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class ew extends rs{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[i]=s),o.setValue(l.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const l=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ss.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:b}=this.data,y=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",x=>{t.setValue(i,{value:x.target.value}),this.setPropertyOnSiblings(s,"value",x.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",x=>{const w=this.data.defaultFieldValue??"";s.value=d.userValue=w,d.formattedValue=null});let A=x=>{const{formattedValue:w}=d;w!=null&&(x.target.value=w),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",w=>{if(d.focused)return;const{target:C}=w;if(y&&(C.type=g,b&&(C.step=b)),d.userValue){const S=d.userValue;if(y)if(g==="time"){const M=new Date(S),_=[M.getHours(),M.getMinutes(),M.getSeconds()];C.value=_.map(B=>B.toString().padStart(2,"0")).join(":")}else C.value=new Date(S-Z1).toISOString().split(g==="date"?"T":".",1)[0];else C.value=S}d.lastCommittedValue=C.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const C={value(S){d.userValue=S.detail.value??"",y||t.setValue(i,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){const{formattedValue:M}=S.detail;d.formattedValue=M,M!=null&&S.target!==document.activeElement&&(S.target.value=M);const _={formattedValue:M};y&&(_.value=M),t.setValue(i,_)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:M}=S.detail,{target:_}=S;if(M===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",M);let B=d.userValue;!B||B.length<=M||(B=B.slice(0,M),_.value=d.userValue=B,t.setValue(i,{value:B}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:B,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(C,w)}),s.addEventListener("keydown",w=>{d.commitKey=1;let C=-1;if(w.key==="Escape"?C=0:w.key==="Enter"&&!this.data.multiLine?C=2:w.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:S}=w.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:S,willCommit:!0,commitKey:C,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const x=A;A=null,s.addEventListener("blur",w=>{if(!d.focused||!w.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:C}=w;let{value:S}=C;if(y){if(S&&g==="time"){const M=S.split(":").map(_=>parseInt(_,10));S=new Date(2e3,0,1,M[0],M[1],M[2]||0).valueOf(),C.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();C.type="text"}d.userValue=S,d.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:S,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),x(w)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",w=>{d.lastCommittedValue=null;const{data:C,target:S}=w,{value:M,selectionStart:_,selectionEnd:B}=S;let N=_,k=B;switch(w.inputType){case"deleteWordBackward":{const z=M.substring(0,_).match(/\w*[^\w]*$/);z&&(N-=z[0].length);break}case"deleteWordForward":{const z=M.substring(_).match(/^[^\w]*\w*/);z&&(k+=z[0].length);break}case"deleteContentBackward":_===B&&(N-=1);break;case"deleteContentForward":_===B&&(k+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:M,change:C||"",willCommit:!1,selStart:N,selEnd:k}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class iw extends rs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class nw extends rs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ss.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s)){const g=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue||"Off";l.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class C0 extends rs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const l of this._getElementsByName(i.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(ss.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=i.defaultFieldValue;l.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const l=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const g=l===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const y=g&&b.id===s;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class sw extends jh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class aw extends rs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");ss.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const b=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===b});for(const g of this.data.options){const b=document.createElement("option");b.textContent=g.displayValue,b.value=g.exportValue,s.value.includes(g.exportValue)&&(b.setAttribute("selected",!0),o=!1),r.append(b)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const u=g=>{const b=g?"value":"textContent",{options:y,multiple:A}=r;return A?Array.prototype.filter.call(y,x=>x.selected).map(x=>x[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let d=u(!1);const f=g=>{const b=g.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const b={value(y){l?.();const A=y.detail.value,x=new Set(Array.isArray(A)?A:[A]);for(const w of r.options)w.selected=x.has(w.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const A=r.options,x=y.detail.remove;A[x].selected=!1,r.remove(x),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(y){const{index:A,displayValue:x,exportValue:w}=y.detail.insert,C=r.children[A],S=document.createElement("option");S.textContent=x,S.value=w,C?C.before(S):r.append(S),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},items(y){const{items:A}=y.detail;for(;r.length!==0;)r.remove(0);for(const x of A){const{displayValue:w,exportValue:C}=x,S=document.createElement("option");S.textContent=w,S.value=C,r.append(S)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},indices(y){const A=new Set(y.detail.indices);for(const x of y.target.options)x.selected=A.has(x.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,g)}),r.addEventListener("input",g=>{const b=u(!0),y=u(!1);t.setValue(i,{value:b}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wh extends ee{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;if(super(t,{isRenderable:!o&&ee._hasPopupData(i)}),this.elements=s,o&&ee._hasPopupData(i)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new rw({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${ea}${r}`).join(",")),this.container}}class rw{#t=null;#e=this.#V.bind(this);#n=this.#P.bind(this);#i=this.#k.bind(this);#a=this.#x.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#p=null;#g=null;#u=null;#m=null;#b=null;#v=null;#y=null;#T=null;#S=null;#w=null;#_=!1;#A=null;#E=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:g,open:b,commentManager:y=null}){this.#s=t,this.#S=r,this.#o=l,this.#T=u,this.#d=d,this.#r=i,this.#y=f,this.#h=g,this.#l=s,this.#t=y,this.#A=s[0],this.#c=mh.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y||(this.#N(),this.#s.hidden=!0,b&&this.#x())}#N(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#a,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m){this.#m.parentNode||this.#A.container.after(this.#m);return}if(this.#b||this.#M(),!this.#b)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#m=this.#A.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const u=this.#A.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#D(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",r,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#m||this.renderCommentButton();const[t,i]=this.#b,{style:s}=this.#m;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#m||this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(t){t!==this.comment&&(this.#A.commentText=this.#E=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=i)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#m.getBoundingClientRect(),{x:r,y:o,width:l,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/l,(i+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=r;this.#t.showDialog(null,this,o+i*u,l+s*d,{...t,parentDimensions:r})}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=et.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#S?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#S}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}i0({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#T,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#T.html||null}get#L(){return this.#O?.attributes?.style?.fontSize||0}get#j(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#j,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):i&&(i.deleted?this.remove():(this.#z(),this.#E=i.text)),t&&(this.#b=null,this.#M(),this.#D());return}if(s||i?.deleted){this.remove();return}this.#N(),this.#w||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),i&&i.text&&(this.#T=this.#B(i.text),this.#c=mh.toDateObject(i.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#T}=this.#w,this.#w=null,this.#p?.remove(),this.#p=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#p?.remove(),this.#p=null,this.#_=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#y;for(const x of this.#l)if(!u||et.intersect(x.data.rect,u)!==null){u=x.data.rect,l=!0;break}const d=et.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,b=d[0]+g,y=d[1];this.#u=[100*(b-r)/i,100*(y-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#x(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#P(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#k(){this.#p||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#P(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#N(),this.#_&&(this.#p||this.#k(),this.#_=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class _0 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class ow extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lw extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class cw extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class M0 extends ee{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,b=i.length;g<b;g+=2){const y=i[g]-t[0],A=t[3]-i[g+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uw extends M0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hw extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Ph extends ee{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#n(i,t),f=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let b=0,y=s.length;b<y;b++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[b].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:u,height:d}=this.#n(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class D0 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class dw extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class fw extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class mw extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class N0 extends ee{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class gw extends ee{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=pe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Uh{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#a=u||null,this.#r=f||null,this.#n=g||new kh,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;ns(s,this.viewport);const r=new Map,o=[],l={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ll,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const d=u.annotationType===fe.POPUP;if(d){const b=r.get(u.id);if(!b)continue;if(!this._commentManager){o.push(u);continue}l.elements=b}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const f=oh.create(l);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),u.popupRef)){const b=r.get(u.popupRef);b?b.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const d=l.elements=r.get(u.id);l.data=u;const f=oh.create(l);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${ea}${u.id}`,u.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const o=s.id=`${ea}${r}`;t.push(this.#a?.getAriaAttributes(o).then(l=>{if(l)for(const[u,d]of l)s.setAttribute(u,d)}))}}this.#s.sort(({data:{rect:[s,r,o,l]}},{data:{rect:[u,d,f,g]}})=>{if(s===o&&r===l)return 1;if(u===f&&d===g)return-1;const b=l,y=r,A=(r+l)/2,x=g,w=d,C=(d+g)/2;if(A>=x&&C<=y)return-1;if(C>=b&&A<=w)return 1;const S=(s+o)/2,M=(u+f)/2;return S-M});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#r,svgFactory:new ll,parent:this};for(const s of t){s.borderStyle||=Uh._defaultBorderStyle,i.data=s;const r=oh.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${ea}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,ns(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=this.#i.get(i);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,o=new J1({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n});return o.render(),o.contentElement.id=`${ea}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return pt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Zs.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Zo=/\r\n?|\n/g;class we extends ct{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=we.prototype,i=o=>o.isEmpty(),s=Ln.TRANSLATE_SMALL,r=Ln.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Er([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||we._defaultColor||ct._defaultLineColor,this.#i=t.fontSize||we._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){ct.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Nt.FREETEXT_SIZE:we._defaultFontSize=i;break;case Nt.FREETEXT_COLOR:we._defaultColor=i;break}}updateParams(t,i){switch(t){case Nt.FREETEXT_SIZE:this.#a(i);break;case Nt.FREETEXT_COLOR:this.#r(i);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,we._defaultFontSize],[Nt.FREETEXT_COLOR,we._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,this.#i],[Nt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ar(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.FREETEXT_COLOR}#a(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(we.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,g]=this.pageDimensions,[b,y]=this.pageTranslation;let A,x;switch(this.rotation){case 0:A=t+(l[0]-b)/f,x=i+this.height-(l[1]-y)/g;break;case 90:A=t+(l[0]-b)/f,x=i-(l[1]-y)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-b)/f,x=i-(l[1]-y)/g,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-b-this.height*g)/f,x=i+(l[1]-y-this.width*f)/g,[u,d]=[-d,u];break}this.setAt(A*r,x*o,u,d)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zo,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=we.#h(i.getData("text")||"").replaceAll(Zo,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(Zo,"")),A!==this.editorDiv){let x=f;for(const w of this.editorDiv.childNodes){if(w===A){x=g;continue}x.push(we.#c(w))}}f.push(u.nodeValue.slice(0,d).replaceAll(Zo,""))}else if(u===this.editorDiv){let A=f,x=0;for(const w of this.editorDiv.childNodes)x++===d&&(A=g),A.push(we.#c(w))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#l();const b=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const x=A.nodeValue.length;if(y<=x){b.setStart(A,y),b.setEnd(A,y);break}y-=x}o.removeAllRanges(),o.addRange(b)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=we._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof _0){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:g,popupRef:b,richText:y,contentsObj:A,creationDate:x,modificationDate:w},textContent:C,textPosition:S,parent:{page:{pageNumber:M}}}=t;if(!C||C.length===0)return null;r=t={annotationType:yt.FREETEXT,color:Array.from(u),fontSize:l,value:C.join(`
`),position:S,pageIndex:M-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:b,comment:A?.str||null,richText:y,creationDate:x,modificationDate:w}}const o=await super.deserialize(t,i,s);return o.#i=t.fontSize,o.color=et.makeHexColor(...t.color),o.#t=we.#h(t.value),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((l,u)=>l!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){jt("Abstract method `toSVGPath` must be implemented.")}get box(){jt("Abstract getter `box` must be implemented.")}serialize(t,i){jt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u]*r,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,i,s,r,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=i+t[u+1]*r,l[u+1]=s+t[u]*o;return l}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,l){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+l)/6,(s+o)/2,(r+l)/2]}}class Jn{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#p=8;static#g=2;static#u=Jn.#p+Jn.#g;constructor({x:t,y:i},s,r,o,l,u=0){this.#t=s,this.#h=o*r,this.#i=l,this.#r.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=Jn.#p*r,this.#c=Jn.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#r[8])}#m(){const t=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,r,o,l]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/o,(this.#o+(t[1]-i[1])/2-r)/l,(this.#s+(i[0]-t[0])/2-s)/o,(this.#o+(i[1]-t[1])/2-r)/l]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,o,l]=this.#t;let[u,d,f,g]=this.#r.subarray(8,12);const b=t-f,y=i-g,A=Math.hypot(b,y);if(A<this.#c)return!1;const x=A-this.#l,w=x/A,C=w*b,S=w*y;let M=u,_=d;u=f,d=g,f+=C,g+=S,this.#f?.push(t,i);const B=-S/x,N=C/x,k=B*this.#h,z=N*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+k,g+z],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-k,g-z],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+k,d+z],2),this.#a.push(NaN,NaN,NaN,NaN,(u+k-s)/o,(d+z-r)/l),this.#r.set([u-k,d-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-k-s)/o,(d-z-r)/l)),this.#r.set([M,_,u,d,f,g],6),!this.isEmpty()):(this.#r.set([M,_,u,d,f,g],6),Math.abs(Math.atan2(_-d,M-u)-Math.atan2(S,C))<Math.PI/2?([u,d,f,g]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+g)/2-r)/l),[u,d,M,_]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((M+u)/2-s)/o,((_+d)/2-r)/l),!0):([M,_,u,d,f,g]=this.#r.subarray(0,6),this.#a.push(((M+5*u)/6-s)/o,((_+5*d)/6-r)/l,((5*u+f)/6-s)/o,((5*d+g)/6-r)/l,((u+f)/2-s)/o,((d+g)/2-r)/l),[f,g,u,d,M,_]=this.#r.subarray(12,18),this.#e.push(((M+5*u)/6-s)/o,((_+5*d)/6-r)/l,((5*u+f)/6-s)/o,((5*d+g)/6-r)/l,((u+f)/2-s)/o,((d+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#y(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,i,s,r]=this.#t,[o,l,u,d]=this.#m();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-i)/r} L${(this.#r[4]-t)/s} ${(this.#r[5]-i)/r} L${o} ${l} L${u} ${d} L${(this.#r[16]-t)/s} ${(this.#r[17]-i)/r} L${(this.#r[14]-t)/s} ${(this.#r[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#y(t){const[i,s,r,o]=this.#t,l=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[d,f,g,b]=this.#m();t.push(`L${(l[0]-i)/r} ${(l[1]-s)/o} L${d} ${f} L${g} ${b} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,l){return new R0(t,i,s,r,o,l)}getOutlines(){const t=this.#a,i=this.#e,s=this.#r,[r,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let b=0,y=d.length-2;b<y;b+=2)d[b]=(this.#f[b]-r)/l,d[b+1]=(this.#f[b+1]-o)/u;if(d[d.length-2]=(this.#s-r)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#T(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){f[b]=f[b+1]=NaN;continue}f[b]=t[b],f[b+1]=t[b+1]}g=this.#w(f,g);for(let b=i.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(i[b+y])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[b+y],f[g+1]=i[b+y+1],g+=2}return this.#S(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#n,this.#i)}#T(t){const i=this.#r,[s,r,o,l]=this.#t,[u,d,f,g]=this.#m(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/l,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/l,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/l],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#n,this.#i)}#S(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#w(t,i){const s=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[o,l,u,d]=this.#t,[f,g,b,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-l)/d],i),i+=24}}class R0 extends it{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,i,s,r,o,l){super(),this.#s=t,this.#a=i,this.#t=s,this.#r=r,this.#n=o,this.#i=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,g]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-u)/f,t[b+1]=(t[b+1]-d)/g;for(let b=0,y=i.length;b<y;b+=2)i[b]=(i[b]-u)/f,i[b+1]=(i[b+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const l=s-t,u=r-i;let d,f;switch(o){case 0:d=it._rescale(this.#s,t,r,l,-u),f=it._rescale(this.#a,t,r,l,-u);break;case 90:d=it._rescaleAndSwap(this.#s,t,i,l,u),f=it._rescaleAndSwap(this.#a,t,i,l,u);break;case 180:d=it._rescale(this.#s,s,i,-l,u),f=it._rescale(this.#a,s,i,-l,u);break;case 270:d=it._rescaleAndSwap(this.#s,s,r,-l,-u),f=it._rescaleAndSwap(this.#a,s,r,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,u=r,d=s,f=r;const g=t?Math.max:Math.min,b=new Float32Array(4);for(let A=6,x=i.length;A<x;A+=6){const w=i[A+4],C=i[A+5];isNaN(i[A])?(et.pointBoundingBox(w,C,o),u>C?(l=w,u=C):u===C&&(l=g(l,w)),f<C?(d=w,f=C):f===C&&(d=g(d,w))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,et.bezierBoundingBox(s,r,...i.slice(A,A+6),b),et.rectBoundingBox(b[0],b[1],b[2],b[3],o),u>b[1]?(l=b[0],u=b[1]):u===b[1]&&(l=g(l,b[0])),f<b[3]?(d=b[2],f=b[3]):f===b[3]&&(d=g(d,b[2]))),s=w,r=C}const y=this.#e;y[0]=o[0]-this.#n,y[1]=o[1]-this.#n,y[2]=o[2]-o[0]+2*this.#n,y[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,i,s,r,o,l=0){return new Jn(t,i,s,r,o,l)}getNewOutline(t,i){const[s,r,o,l]=this.#e,[u,d,f,g]=this.#t,b=o*f,y=l*g,A=s*f+u,x=r*g+d,w=this.newOutliner({x:this.#a[0]*b+A,y:this.#a[1]*y+x},this.#t,this.#r,t,this.#i,i??this.#n);for(let C=2;C<this.#a.length;C+=2)w.add({x:this.#a[C]*b+A,y:this.#a[C+1]*y+x});return w.getOutlines()}}class xh{#t;#e;#n;#i=[];#a=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:C,width:S,height:M}of t){const _=Math.floor((w-i)/l)*l,B=Math.ceil((w+S+i)/l)*l,N=Math.floor((C-i)/l)*l,k=Math.ceil((C+M+i)/l)*l,z=[_,N,k,!0],$=[B,N,k,!1];this.#i.push(z,$),et.rectBoundingBox(_,N,B,k,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let b=r?-1/0:1/0,y=1/0;const A=this.#i.at(r?-1:-2),x=[A[0],A[2]];for(const w of this.#i){const[C,S,M,_]=w;!_&&r?S<y?(y=S,b=C):S===y&&(b=Math.max(b,C)):_&&!r&&(S<y?(y=S,b=C):S===y&&(b=Math.min(b,C))),w[0]=(C-f)/u,w[1]=(S-g)/d,w[2]=(M-g)/d}this.#t=new Float32Array([f,g,u,d]),this.#e=[b,y],this.#n=x}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#r(t)}#r(t){const i=[],s=new Set;for(const l of t){const[u,d,f]=l;i.push([u,d,l],[u,f,l])}i.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=i.length;l<u;l+=2){const d=i[l][2],f=i[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const r=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,f,g,b]=l;s.delete(l);let y=u,A=d;for(o=[u,f],r.push(o);;){let x;if(s.has(g))x=g;else if(s.has(b))x=b;else break;s.delete(x),[u,d,f,g,b]=x,y!==u&&(o.push(y,A,u,A===d?d:f),y=u),A=A===d?f:d}o.push(y,A)}return new pw(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#a;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,l=i[o][0];if(l===t)return o;l<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#a.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#a.length;r++){const[o,l]=this.#a[r];if(o!==t)break;if(o===t&&l===i){this.#a.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,l]=this.#a[r];if(o!==t)break;if(o===t&&l===i){this.#a.splice(r,1);return}}}#l(t){const[i,s,r]=t,o=[[i,s,r]],l=this.#s(r);for(let u=0;u<l;u++){const[d,f]=this.#a[u];for(let g=0,b=o.length;g<b;g++){const[,y,A]=o[g];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[g][1]=f;else{if(b===1)return[];o.splice(g,1),g--,b--}continue}o[g][2]=d,A>f&&o.push([i,f,A])}}}return o}}class pw extends it{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],u=i[o+1];l===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const l=[],u=s-t,d=r-i;for(const f of this.#e){const g=new Array(f.length);for(let b=0;b<f.length;b+=2)g[b]=t+f[b]*u,g[b+1]=r-f[b+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Sh extends Jn{newFreeDrawOutline(t,i,s,r,o,l){return new bw(t,i,s,r,o,l)}}class bw extends R0{newOutliner(t,i,s,r,o,l=0){return new Sh(t,i,s,r,o,l)}}class oe extends ct{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#p=null;#g=null;#u="";#m;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=oe.prototype;return pt(this,"_keyboardManager",new Er([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||oe._defaultColor,this.#m=t.thickness||oe._defaultThickness,this.opacity=t.opacity||oe._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new xh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new xh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#p=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#m/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:oe.#E(this.#l.box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:oe.#E(this.#r.box,b),path:{d:this.#r.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[b,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*y/b,this.height=d*b/y;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[b,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*y/b,this.height=d*b/y;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:g}=this.#r;this.#p=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,i){ct.initialize(t,i),oe._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Nt.HIGHLIGHT_COLOR:oe._defaultColor=i;break;case Nt.HIGHLIGHT_THICKNESS:oe._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#p}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Nt.HIGHLIGHT_COLOR:this.#T(i);break;case Nt.HIGHLIGHT_THICKNESS:this.#S(i);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,oe._defaultColor],[Nt.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[Nt.HIGHLIGHT_THICKNESS,this.#m||oe._defaultThickness],[Nt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#T(t){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,oe._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const i=this.#m,s=r=>{this.#m=r,this.#w(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new vi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#_():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#w(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#_(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=oe.#E(this.#l.box,t)):s=oe.#E([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:oe.#E(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),s0(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#N(t){oe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#n,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:g,height:b}of o){const y=d*t+s,A=(1-f)*i+r;l[u]=l[u+4]=y,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=y+g*t,l[u+5]=l[u+7]=A-b*i,u+=8}return l}#O(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:l,y:u,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,b=t.combinedSignal(g),y=A=>{g.abort(),this.#j(t,A)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",se,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ai,{signal:b}),s.addEventListener("pointermove",this.#L.bind(this,t),{signal:b}),this._freeHighlight=new Sh({x:r,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof D0){const{data:{quadPoints:x,rect:w,rotation:C,id:S,color:M,opacity:_,popupRef:B,richText:N,contentsObj:k,creationDate:z,modificationDate:$},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(M),opacity:_,quadPoints:x,boxes:null,pageIndex:Y-1,rect:w.slice(0),rotation:C,annotationElementId:S,id:S,deleted:!1,popupRef:B,richText:N,comment:k?.str||null,creationDate:z,modificationDate:$}}else if(t instanceof Ph){const{data:{inkLists:x,rect:w,rotation:C,id:S,color:M,borderStyle:{rawWidth:_},popupRef:B,richText:N,contentsObj:k,creationDate:z,modificationDate:$},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(M),thickness:_,inkLists:x,boxes:null,pageIndex:Y-1,rect:w.slice(0),rotation:C,annotationElementId:S,id:S,deleted:!1,popupRef:B,richText:N,comment:k?.str||null,creationDate:z,modificationDate:$}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,s);f.color=et.makeHexColor(...o),f.opacity=d||1,u&&(f.#m=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,b]=f.pageDimensions,[y,A]=f.pageTranslation;if(l){const x=f.#n=[];for(let w=0;w<l.length;w+=8)x.push({x:(l[w]-y)/g,y:1-(l[w+1]-A)/b,width:(l[w+2]-l[w])/g,height:(l[w+1]-l[w+5])/b});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const x=u[0],w={x:x[0]-y,y:b-(x[1]-A)},C=new Sh(w,[0,0,g,b],1,f.#m/2,!0,.001);for(let _=0,B=x.length;_<B;_+=2)w.x=x[_]-y,w.y=b-(x[_+1]-A),C.add(w);const{id:S,clipPathId:M}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);f.#y({highlightOutlines:C.getOutlines(),highlightId:S,clipPathId:M}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#m,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class O0{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){jt("Not implemented")}}class Lt extends ct{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Lt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){jt("Not implemented")}static get typesMap(){jt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Lt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],l=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(l/o),r*(o/l)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/l),r*(l/o)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/d),r*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-r*(d/u),s*(u/d),r*(d/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(d/u),i,r*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-r*(d/u),s*(u/d),r*(d/u)];case 14:return[1-t,1-i-s*(u/d),r*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),r*(d/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){jt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=r;if(Ft.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:b,height:y}=o.getBoundingClientRect(),A=Lt.#i=new AbortController,x=t.combinedSignal(A);if(Ft.setPointer(f,d),window.addEventListener("pointerup",w=>{Ft.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:x}),window.addEventListener("pointercancel",w=>{Ft.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:x}),window.addEventListener("pointerdown",w=>{Ft.isSamePointerType(w.pointerType)&&(Ft.initializeAndAddPointerId(w.pointerId),Lt.#n.isCancellable()&&(Lt.#n.removeLastElement(),Lt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Ai,{signal:x}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),o.addEventListener("touchmove",w=>{Ft.isSameTimeStamp(w.timeStamp)&&se(w)},{signal:x}),t.toggleDrawing(),i._editorUndoBar?.hide(),Lt.#n){t.drawLayer.updateProperties(this._currentDrawId,Lt.#n.startNew(l,u,b,y,g));return}i.updateUIForDefaultProperties(this),Lt.#n=this.createDrawerInstance(l,u,b,y,g),Lt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Lt.#a.toSVGProperties(),Lt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ft.isSameTimeStamp(t.timeStamp),!Lt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(Ft.isSamePointerId(r)){if(Ft.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Lt.#n.add(i,s)),Ft.setTimeStamp(t.timeStamp),se(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Lt.#n=null,Lt.#a=null,Ft.clearTimeStamp()),Lt.#i&&(Lt.#i.abort(),Lt.#i=null,Ft.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Lt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Lt.#n,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Nt.DRAW_STEP),!Lt.#n.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Lt.#n.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:Lt.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,l){jt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:u}}=i.viewport,d=this.deserializeDraw(l,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#r({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class yw{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new Tr;#l;#d;constructor(t,i,s,r,o,l){this.#l=s,this.#d=r,this.#i=o,this.#a=l,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#h(t,i){return it._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,o,l]=this.#t.subarray(2,6),u=t-o,d=i-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#r.push(t,i),isNaN(s)?(this.#t.set([o,l,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,l,t,i],0),this.#e.push(...it.createBezierPoints(s,r,o,l,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#i=o,[t,i]=this.#h(t,i);const l=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:l,points:this.#r}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=it.svgRound(this.#e[4]),i=it.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#r.length===4){const r=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,o=this.#e.length;r<o;r+=6){const[l,u,d,f,g,b]=this.#e.slice(r,r+6).map(it.svgRound);s.push(`C${l} ${u} ${d} ${f} ${g} ${b}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,t,i,s,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Tr extends it{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,i,s,r,o,l,u){this.#a=i,this.#r=s,this.#s=r,this.#o=o,this.#c=l,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,u,d,f,g]=i.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],o){const l=[],u=[],[d,f,g,b]=this.#d();let y,A,x,w,C,S,M,_,B;switch(this.#o){case 0:B=it._rescale,y=t,A=i+r,x=s,w=-r,C=t+d*s,S=i+(1-f-b)*r,M=t+(d+g)*s,_=i+(1-f)*r;break;case 90:B=it._rescaleAndSwap,y=t,A=i,x=s,w=r,C=t+f*s,S=i+d*r,M=t+(f+b)*s,_=i+(d+g)*r;break;case 180:B=it._rescale,y=t+s,A=i,x=-s,w=r,C=t+(1-d-g)*s,S=i+f*r,M=t+(1-d)*s,_=i+(f+b)*r;break;case 270:B=it._rescaleAndSwap,y=t+s,A=i+r,x=-s,w=-r,C=t+(1-f-b)*s,S=i+(1-d-g)*r,M=t+(1-f)*s,_=i+(1-d)*r;break}for(const{line:N,points:k}of this.#i)l.push(B(N,y,A,x,w,o?new Array(N.length):null)),u.push(B(k,y,A,x,w,o?new Array(k.length):null));return{lines:l,points:u,rect:[C,S,M,_]}}static deserialize(t,i,s,r,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const g=[];let b,y,A,x,w;switch(d){case 0:w=it._rescale,b=-t/s,y=i/r+1,A=1/s,x=-1/r;break;case 90:w=it._rescaleAndSwap,b=-i/r,y=-t/s,A=1/r,x=1/s;break;case 180:w=it._rescale,b=t/s+1,y=-i/r,A=-1/s,x=1/r;break;case 270:w=it._rescaleAndSwap,b=i/r+1,y=t/s+1,A=-1/r,x=-1/s;break}if(!l){l=[];for(const S of u){const M=S.length;if(M===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(M===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const _=new Float32Array(3*(M-2));l.push(_);let[B,N,k,z]=S.subarray(0,4);_.set([NaN,NaN,NaN,NaN,B,N],0);for(let $=4;$<M;$+=2){const Y=S[$],Z=S[$+1];_.set(it.createBezierPoints(B,N,k,z,Y,Z),($-2)*3),[B,N,k,z]=[k,z,Y,Z]}}}for(let S=0,M=l.length;S<M;S++)g.push({line:w(l[S].map(_=>_??NaN),b,y,A,x),points:w(u[S].map(_=>_??NaN),b,y,A,x)});const C=new this.prototype.constructor;return C.build(g,s,r,1,d,f,o),C}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#a,i/this.#r]:[i/this.#r,i/this.#a]}#d(){const[t,i,s,r]=this.#t,[o,l]=this.#l(0);return[t+o,i+l,s-2*o,r-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)et.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],l=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,g,b,y,A,x]=r.subarray(u,u+6);et.bezierBoundingBox(o,l,f,g,b,y,A,x,t),o=A,l=x}}const[i,s]=this.#l();t[0]=Me(t[0]-i,0,1),t[1]=Me(t[1]-s,0,1),t[2]=Me(t[2]+i,0,1),t[3]=Me(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,o]=this.#l(),[l,u]=[r-i,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#a=t,this.#r=i,this.#s=s;const[l,u]=this.#l(),d=l-r,f=u-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,l=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${it.svgRound(u)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,l]=this.#l(),[u,d,f,g]=this.#t;if(Math.abs(f-o)<=it.PRECISION||Math.abs(g-l)<=it.PRECISION){const w=t+s/2-(u+f/2),C=i+r/2-(d+g/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${w} ${C})`}}}const b=(s-2*o)/(f-2*o),y=(r-2*l)/(g-2*l),A=f/s,x=g/r;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${x}) translate(${it.svgRound(o)} ${it.svgRound(l)}) scale(${b} ${y}) translate(${it.svgRound(-o)} ${it.svgRound(-l)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,l]=this.#l(),u=this.#t,[d,f,g,b]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-o)<=it.PRECISION||Math.abs(b-l)<=it.PRECISION){const C=t+s/2-(d+g/2),S=i+r/2-(f+b/2);for(const{line:M,points:_}of this.#i)it._translate(M,C,S,M),it._translate(_,C,S,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(g-2*o),A=(r-2*l)/(b-2*l),x=-y*(d+o)+t+o,w=-A*(f+l)+i+l;if(y!==1||A!==1||x!==0||w!==0)for(const{line:C,points:S}of this.#i)it._rescale(C,x,w,y,A,C),it._rescale(S,x,w,y,A,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,l=this.#t,u=t-l[0],d=i-l[1];if(this.#a===r&&this.#r===o)for(const{line:f,points:g}of this.#i)it._translate(f,u,d,f),it._translate(g,u,d,g);else{const f=this.#a/r,g=this.#r/o;this.#a=r,this.#r=o;for(const{line:b,points:y}of this.#i)it._rescale(b,u,d,f,g,b),it._rescale(y,u,d,f,g,y);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Sl extends O0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Sl(this._viewParameters);return t.updateAll(this),t}}class Ih extends Lt{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ct.initialize(t,i),this._defaultDrawingOptions=new Sl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return pt(this,"typesMap",new Map([[Nt.INK_THICKNESS,"stroke-width"],[Nt.INK_COLOR,"stroke"],[Nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new yw(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,l){return Tr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){let r=null;if(t instanceof Ph){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:g,opacity:b,borderStyle:{rawWidth:y},popupRef:A,richText:x,contentsObj:w,creationDate:C,modificationDate:S},parent:{page:{pageNumber:M}}}=t;r=t={annotationType:yt.INK,color:Array.from(g),thickness:y,opacity:b,paths:{points:l},boxes:null,pageIndex:M-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:x,comment:w?.str||null,creationDate:C,modificationDate:S}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Ar(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Ih.getDefaultDrawingOptions({stroke:et.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ct._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Eh extends Tr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Jo=8,hr=3;class ta{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let f=0;f<8;f++){const g=(-f+d-u+16)%8,b=this.#n[2*g],y=this.#n[2*g+1];if(t[(s+b)*i+(r+y)]!==0)return g}return-1}static#a(t,i,s,r,o,l,u){const d=this.#e(s,r,o,l);for(let f=0;f<8;f++){const g=(f+d+u+16)%8,b=this.#n[2*g],y=this.#n[2*g+1];if(t[(s+b)*i+(r+y)]!==0)return g}return-1}static#r(t,i,s,r){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)l[g*i]=l[g*i+i-1]=0;for(let g=0;g<i;g++)l[g]=l[i*s-1-g]=0;let u=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let b=1;b<i-1;b++){const y=g*i+b,A=l[y];if(A===0)continue;let x=g,w=b;if(A===1&&l[y-1]===0)u+=1,w-=1;else if(A>=1&&l[y+1]===0)u+=1,w+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const C=[b,g],S=w===b+1,M={isHole:S,points:C,id:u,parent:0};f.push(M);let _;for(const W of f)if(W.id===d){_=W;break}_?_.isHole?M.parent=S?_.parent:d:M.parent=S?d:_.parent:M.parent=S?d:0;const B=this.#i(l,i,g,b,x,w,0);if(B===-1){l[y]=-u,l[y]!==1&&(d=Math.abs(l[y]));continue}let N=this.#n[2*B],k=this.#n[2*B+1];const z=g+N,$=b+k;x=z,w=$;let Y=g,Z=b;for(;;){const W=this.#a(l,i,Y,Z,x,w,1);N=this.#n[2*W],k=this.#n[2*W+1];const ot=Y+N,xt=Z+k;C.push(xt,ot);const ht=Y*i+Z;if(l[ht+1]===0?l[ht]=-u:l[ht]===1&&(l[ht]=u),ot===g&&xt===b&&Y===z&&Z===$){l[y]!==1&&(d=Math.abs(l[y]));break}else x=Y,w=Z,Y=ot,Z=xt}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let z=i;z<s-2;z+=2)r.push(t[z],t[z+1]);return}const o=t[i],l=t[i+1],u=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(u,d),g=u/f,b=d/f,y=g*l-b*o,A=d/u,x=1/f,w=Math.atan(A),C=Math.cos(w),S=Math.sin(w),M=x*(Math.abs(C)+Math.abs(S)),_=x*(1-M+M**2),B=Math.max(Math.atan(Math.abs(S+C)*_),Math.atan(Math.abs(S-C)*_));let N=0,k=i;for(let z=i+2;z<s-2;z+=2){const $=Math.abs(y-g*t[z+1]+b*t[z]);$>N&&(k=z,N=$)}N>(f*B)**2?(this.#s(t,i,k+2,r),this.#s(t,k,s,r)):r.push(o,l)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,o,l){const u=new Float32Array(l**2),d=-2*r**2,f=l>>1;for(let w=0;w<l;w++){const C=(w-f)**2;for(let S=0;S<l;S++)u[w*l+S]=Math.exp((C+(S-f)**2)/d)}const g=new Float32Array(256),b=-2*o**2;for(let w=0;w<256;w++)g[w]=Math.exp(w**2/b);const y=t.length,A=new Uint8Array(y),x=new Uint32Array(256);for(let w=0;w<s;w++)for(let C=0;C<i;C++){const S=w*i+C,M=t[S];let _=0,B=0;for(let k=0;k<l;k++){const z=w+k-f;if(!(z<0||z>=s))for(let $=0;$<l;$++){const Y=C+$-f;if(Y<0||Y>=i)continue;const Z=t[z*i+Y],W=u[k*l+$]*g[Math.abs(Z-M)];_+=Z*W,B+=W}}const N=A[S]=Math.round(_/B);x[N]++}return[A,x]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const l=255/(r-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-l>r&&(r=i-l,u=i-1),s=d,l=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let l=s,u=r;if(s>o||r>o){let y=s,A=r,x=Math.log2(Math.max(s,r)/o);const w=Math.floor(x);x=x===w?w-1:w;for(let S=0;S<x;S++){l=Math.ceil(y/2),u=Math.ceil(A/2);const M=new OffscreenCanvas(l,u);M.getContext("2d").drawImage(t,0,0,y,A,0,0,l,u),y=l,A=u,t!==i&&t.close(),t=M.transferToImageBitmap()}const C=Math.min(o/l,o/u);l=Math.round(l*C),u=Math.round(u*C)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=f.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,l,u,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const b=200,y=g.font=`${s} ${r} ${b}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:x,actualBoundingBoxAscent:w,actualBoundingBoxDescent:C,fontBoundingBoxAscent:S,fontBoundingBoxDescent:M,width:_}=g.measureText(t),B=1.5,N=Math.ceil(Math.max(Math.abs(A)+Math.abs(x)||0,_)*B),k=Math.ceil(Math.max(Math.abs(w)+Math.abs(C)||b,Math.abs(S)+Math.abs(M)||b)*B);f=new OffscreenCanvas(N,k),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=y,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,N,k),g.fillStyle="black",g.fillText(t,N*(B-1)/2,k*(3-B)/2);const z=this.#d(g.getImageData(0,0,N,k).data),$=this.#l(z),Y=this.#h($),Z=this.#r(z,N,k,Y);return this.processDrawnLines({lines:{curves:Z,width:N,height:k},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[l,u,d]=this.#f(t),[f,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#h(g),y=this.#r(f,u,d,b);return this.processDrawnLines({lines:{curves:y,width:u,height:d},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:l,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:d,width:f,height:g}=t,b=t.thickness??0,y=[],A=Math.min(i/f,s/g),x=A/i,w=A/s,C=[];for(const{points:M}of d){const _=l?this.#o(M):M;if(!_)continue;C.push(_);const B=_.length,N=new Float32Array(B),k=new Float32Array(3*(B===2?2:B-2));if(y.push({line:k,points:N}),B===2){N[0]=_[0]*x,N[1]=_[1]*w,k.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[z,$,Y,Z]=_;z*=x,$*=w,Y*=x,Z*=w,N.set([z,$,Y,Z],0),k.set([NaN,NaN,NaN,NaN,z,$],0);for(let W=4;W<B;W+=2){const ot=N[W]=_[W]*x,xt=N[W+1]=_[W+1]*w;k.set(it.createBezierPoints(z,$,Y,Z,ot,xt),(W-2)*3),[z,$,Y,Z]=[Y,Z,ot,xt]}}if(y.length===0)return null;const S=u?new Eh:new Tr;return S.build(y,i,s,1,r,u?0:b,o),{outline:S,newCurves:C,areContours:u,thickness:b,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let l=1/0,u=-1/0,d=0;for(const _ of t){d+=_.length;for(let B=2,N=_.length;B<N;B++){const k=_[B]-_[B-2];l=Math.min(l,k),u=Math.max(u,k)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,b=Jo+hr*g,y=new Uint32Array(b);let A=0;y[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=r,y[A++]=o,y[A++]=i?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=g,y[A++]=f.BYTES_PER_ELEMENT;for(const _ of t)y[A++]=_.length-2,y[A++]=_[0],y[A++]=_[1];const x=new CompressionStream("deflate-raw"),w=x.writable.getWriter();await w.ready,w.write(y);const C=f.prototype.constructor;for(const _ of t){const B=new C(_.length-2);for(let N=2,k=_.length;N<k;N++)B[N-2]=_[N]-_[N-2];w.write(B)}w.close();const S=await new Response(x.readable).arrayBuffer();return new Uint8Array(S).toBase64()}static async decompressSignature(t){try{const i=Uint8Array.fromBase64(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const _ of s)l||=new Uint8Array(new Uint32Array(_.buffer,0,4)[0]),l.set(_,u),u+=_.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],b=d[3],y=d[4]===0,A=d[5],x=d[6],w=d[7],C=[],S=(Jo+hr*x)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(w){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(l.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(l.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(l.buffer,S);break}u=0;for(let _=0;_<x;_++){const B=d[hr*_+Jo],N=new Float32Array(B+2);C.push(N);for(let k=0;k<hr-1;k++)N[k]=d[hr*_+Jo+k+1];for(let k=0;k<B;k++)N[k+2]=N[k]+M[u++]}return{areContours:y,thickness:A,outlines:C,width:g,height:b}}catch(i){return gt(`decompressSignature: ${i}`),null}}}class Hh extends O0{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const t=new Hh;return t.updateAll(this),t}}class Gh extends Sl{constructor(t){super(t),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const t=new Gh(this._viewParameters);return t.updateAll(this),t}}class ki extends Lt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ct.initialize(t,i),this._defaultDrawingOptions=new Hh,this._defaultDrawnSignatureOptions=new Gh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return pt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:b},rotation:y}=this.parent.viewport,A=ta.processDrawnLines({lines:r,pageWidth:g,pageHeight:b,rotation:y,innerMargin:ki._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#n,l=Math.max(r,o),u=ta.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:l}=this,{outline:u}=this.#n=t;this.#t=u instanceof Eh,this.description=s;let d;this.#t?d=ki.getDefaultDrawingOptions():(d=ki._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return ta.process(t,i,s,r,ki._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return ta.extractContoursFromText(t,i,s,r,o,ki._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return ta.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:ki._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=ki.getDefaultDrawingOptions():(this._drawingOptions=ki._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=this.#i,o.isCopy=!0):o.lines=i,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,i,s,r,o,l){return l.areContours?Eh.deserialize(t,i,s,r,o,l):Tr.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class vw extends ct{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ct.initialize(t,i)}static isHandlingMimeForPasting(t){return gh.includes(t)}static paste(t,i){i.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=gh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const d=Math.min(l*r/i,l*o/s);i*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,l=new Fi;let u=this.#t,d=r,f=o,g=null;if(i){if(r>i||o>i){const k=Math.min(i/r,i/o);d=Math.floor(r*k),f=Math.floor(o*k)}g=document.createElement("canvas");const y=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(y,A));const x=g.getContext("2d");x.filter=this._uiManager.hcmFilter;let w="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":UA.isDarkMode&&(w="#8f8f9d",C="#42414d");const S=15,M=S*l.sx,_=S*l.sy,B=new OffscreenCanvas(M*2,_*2),N=B.getContext("2d");N.fillStyle=w,N.fillRect(0,0,M*2,_*2),N.fillStyle=C,N.fillRect(0,0,M,_),N.fillRect(M,_,M,_),x.fillStyle=x.createPattern(B,"repeat"),x.fillRect(0,0,y,A),x.drawImage(u,0,0,u.width,u.height,0,0,y,A)}let b=null;if(s){let y,A;if(l.symmetric&&u.width<t&&u.height<t)y=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const C=Math.min(t/r,t/o);y=Math.floor(r*C),A=Math.floor(o*C),this.#l||(u=this.#u(y,A))}const w=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,y,A),b={width:y,height:A,data:w.getImageData(0,0,y,A).data}}return{canvas:g,width:d,height:f,imageData:b}}#u(t,i){const{width:s,height:r}=this.#t;let o=s,l=r,u=this.#t;for(;o>2*t||l>2*i;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=g.transferToImageBitmap()}return u}#m(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Fi,l=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#s;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ua.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ua.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof N0){const{data:{rect:w,rotation:C,id:S,structParent:M,popupRef:_,richText:B,contentsObj:N,creationDate:k,modificationDate:z},container:$,parent:{page:{pageNumber:Y}},canvas:Z}=t;let W,ot;Z?(delete t.canvas,{id:W,bitmap:ot}=s.imageManager.getFromCanvas($.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const xt=(await i._structTree.getAriaAttributes(`${ea}${S}`))?.get("aria-label")||"";r=t={annotationType:yt.STAMP,bitmapId:W,bitmap:ot,pageIndex:Y-1,rect:w.slice(0),rotation:C,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:xt},isSvg:!1,structParent:M,popupRef:_,richText:B,comment:N?.str||null,creationDate:k,modificationDate:z}}const l=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:b,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#i=f,l.#l=b;const[A,x]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/x,y&&(l.altTextData=y),l._initialData=r,t.comment&&l.setCommentData(t),l.#d=!!r,l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#b(!1);else if(this.#l){const u=i.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class nn{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#p=null;#g=-1;#u;static _initialized=!1;static#m=new Map([we,Ih,vw,oe,ki].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:g}){const b=[...nn.#m.values()];if(!nn._initialized){nn._initialized=!0;for(const y of b)y.initialize(g,t)}t.registerEditorTypes(b),this.#u=t,this.pageIndex=i,this.div=s,this.#t=o,this.#n=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===yt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case yt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===yt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of nn.#m.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#b(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#p?.abort(),this.#p=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#p){this.#p=new AbortController;const r=this.#u.combinedSignal(this.#p);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:b}=this.div;b.toggle("getElements",!0);const y=document.elementsFromPoint(u,d);if(b.toggle("getElements",!1),!this.div.contains(y[0]))return;let A;const x=new RegExp(`^${pr}[0-9]+$`);for(const C of y)if(x.test(C.id)){A=C.id;break}if(!A)return;const w=this.#r.get(A);w?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick(o))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,o=new Map;for(const u of this.#b){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=t.getEditableAnnotations();for(const u of l){const{id:d}=u.data;if(this.#u.isDeletedAnnotationElement(d)){u.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of nn.#m.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=pe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),oe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#r.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#y(){return nn.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const i=this.#y;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#S(),o=this.getNextId(),l=this.#T({parent:this,id:o,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});l&&this.add(l)}async deserialize(t){return await nn.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,g=(l+d)/2-i,[b,y]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===yt.STAMP||s===yt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=pe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ns(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ns(this.div,{rotation:s}),i!==s)for(const r of this.#r.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class _e{#t=null;#e=new Map;#n=new Map;static#i=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return pt(this,"_svgFactory",new ll)}static#a(t,[i,s,r,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*i}%`,l.width=`${100*r}%`,l.height=`${100*o}%`}#r(){const t=_e._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=_e._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=_e._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=_e.#i++,o=this.#r(),l=_e._svgFactory.createElement("defs");o.append(l);const u=_e._svgFactory.createElement("path");l.append(u);const d=`path_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(l,d):null,g=_e._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=_e.#i++,r=this.#r(),o=_e._svgFactory.createElement("defs");r.append(o);const l=_e._svgFactory.createElement("path");o.append(l);const u=`path_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const b=_e._svgFactory.createElement("mask");o.append(b),d=`mask_${s}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const y=_e._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=_e._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=_e._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:l}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&_e.#a(u,r),o){const{classList:d}=u;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=u.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:xh};globalThis.pdfjsLib={AbortException:kn,AnnotationEditorLayer:nn,AnnotationEditorParamsType:Nt,AnnotationEditorType:yt,AnnotationEditorUIManager:Ln,AnnotationLayer:Uh,AnnotationMode:Nn,AnnotationType:fe,applyOpacity:HA,build:K1,ColorPicker:vi,createValidAbsoluteUrl:Zp,CSSConstants:IA,DOMSVGFactory:ll,DrawLayer:_e,FeatureTest:pe,fetchData:wr,findContrastColor:GA,getDocument:x0,getFilenameFromUrl:BA,getPdfFilenameFromUrl:FA,getRGB:Sr,getUuid:t0,getXfaPageViewport:jA,GlobalWorkerOptions:la,ImageKind:el,InvalidPDFException:fh,isDataScheme:pl,isPdfFile:Nh,isValidExplicitDest:t1,MathClamp:Me,noContextMenu:Ai,normalizeUnicode:kA,OPS:br,OutputScale:Fi,PagesMapper:Bt,PasswordResponses:SA,PDFDataRangeTransport:S0,PDFDateString:mh,PDFWorker:vr,PermissionFlag:xA,PixelsPerInch:ua,RenderingCancelledException:Dh,renderRichText:i0,ResponseException:rl,setLayerDimensions:ns,shadow:pt,SignatureExtractor:ta,stopEvent:se,SupportedImageMimeTypes:gh,TextLayer:si,TouchManager:bl,updateUrlHash:Jp,Util:et,VerbosityLevel:dl,version:$1,XfaLayer:e0};la.workerSrc=new URL("./pdf.worker.min.js",import.meta.url).toString();const Aw=({setView:h,setGraphic:t,graphicInput:i,activeTab:s})=>{const r=Et.useRef(null),[o,l]=Et.useState(!1),[u,d]=Et.useState(!1),[f,g]=Et.useState(!1),[b,y]=Et.useState(null),A=.67,x=1.5,w=async N=>{const k=N.target.files[0];if(!k)return;y(null),g(!0),l(!1);const z=k.type,$=k.name.toLowerCase();try{let Y="",Z=!0;if(z==="application/pdf"||$.endsWith(".pdf"))try{Y=await S(k)}catch(ot){console.error("PDF Render error:",ot),y("Failed to render PDF preview. File may be corrupted or password protected."),g(!1);return}else Y=await C(k);const W=new Image;W.onload=()=>{const ot=W.width/W.height;if(ot<A||ot>x){y(`Image aspect ratio (${ot.toFixed(2)}) is outside the allowed range. Please use an image closer to square (between 2:3 and 3:2).`),g(!1),r.current&&(r.current.value="");return}t({src:Y,name:k.name,isUpload:!0,scale:.5,fileType:$.split(".").pop()}),g(!1)},W.onerror=()=>{y("Failed to load image. Please check the file."),g(!1)},W.src=Y}catch(Y){console.error(Y),y("Error processing file."),g(!1)}},C=N=>new Promise((k,z)=>{const $=new FileReader;$.onload=Y=>k(Y.target.result),$.onerror=Y=>z(Y),$.readAsDataURL(N)}),S=async N=>{const k=await N.arrayBuffer(),$=await(await x0({data:k,disableWorker:!0}).promise).getPage(1),Y=$.getViewport({scale:2}),Z=document.createElement("canvas");Z.width=Y.width,Z.height=Y.height;const W=Z.getContext("2d");return await $.render({canvasContext:W,viewport:Y}).promise,Z.toDataURL("image/png")},M=()=>{t(null),r.current&&(r.current.value="")},B=s==="FRONT"?"FRONT":"BACK";return T.jsxs("div",{className:"w-full h-full flex flex-col bg-white p-4 md:p-8 overflow-y-auto pb-32",children:[T.jsx("input",{type:"file",ref:r,onChange:w,accept:"image/png, image/jpeg, image/jpg, image/bmp, image/svg+xml, application/pdf",className:"hidden"}),T.jsx("div",{className:"mb-6",children:T.jsxs("button",{onClick:()=>h("main"),className:"flex items-center text-[#002C5F] font-bold text-sm tracking-widest uppercase hover:text-brand-blue transition-colors group",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 transform group-hover:-translate-x-1 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),B]})}),b&&T.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-3",children:[T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:T.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"text-xs font-bold text-red-700 uppercase tracking-wide mb-1",children:"Upload Failed"}),T.jsx("p",{className:"text-xs text-red-600",children:b})]})]}),f?T.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[T.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-[#002C5F] rounded-full animate-spin mb-4"}),T.jsx("span",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Processing..."})]}):i?T.jsxs("div",{className:"flex flex-col items-center w-full animate-fade-in-up",children:[T.jsx("div",{className:"w-full aspect-square max-w-[200px] border-2 border-dashed border-gray-300 rounded bg-gray-50 flex items-center justify-center p-4 mb-6 relative overflow-hidden",children:T.jsx("img",{src:i.src,alt:"Preview",className:"max-w-full max-h-full object-contain",style:{filter:"grayscale(100%) contrast(1.2) brightness(1.2)"}})}),T.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200 w-full",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("span",{className:"text-xs font-bold text-gray-900 uppercase tracking-wider",children:"SIZE"}),T.jsxs("span",{className:"text-xs font-bold text-gray-500",children:[Math.round((i.scale||.5)*100),"%"]})]}),T.jsx("input",{type:"range",min:"0.2",max:"1.0",step:"0.05",value:i.scale||.5,onChange:N=>t({...i,scale:parseFloat(N.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#002C5F]"})]}),T.jsx("button",{onClick:M,className:"text-xs font-bold text-red-500 underline hover:text-red-700 uppercase tracking-wider mb-2",children:"Remove Image"}),T.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:"Review your placement on the bottle preview to the left."})]}):T.jsxs("div",{className:"flex flex-col w-full animate-fade-in-up",children:[T.jsx("button",{onClick:()=>r.current.click(),className:"w-full py-4 bg-white border-2 border-[#002C5F] text-[#002C5F] font-bold text-sm tracking-widest uppercase rounded hover:bg-gray-50 transition-colors mb-6 shadow-sm",children:"UPLOAD DESIGN"}),T.jsx("p",{className:"text-center text-xs text-gray-700 font-semibold mb-8 uppercase tracking-wide",children:"Accepted file types: PNG, JPG, and WEBP"}),T.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-8",children:[T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsx("div",{className:"w-14 h-14 mb-2 flex items-center justify-center text-gray-900",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),T.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),T.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),T.jsxs("span",{className:"text-[10px] leading-tight text-gray-800 font-medium",children:["Image must be 300 px",T.jsx("br",{}),"(W or H)"]})]}),T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsxs("div",{className:"w-14 h-14 mb-2 flex items-center justify-center text-gray-900 relative",children:[T.jsx("span",{className:"font-serif font-bold text-2xl",children:"TM"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"w-12 h-0.5 bg-gray-900 rotate-45 transform origin-center"})})]}),T.jsx("span",{className:"text-[10px] leading-tight text-gray-800 font-medium",children:"No trademark infringement"})]}),T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsxs("div",{className:"w-14 h-14 mb-2 flex items-center justify-center text-gray-900 relative",children:[T.jsx("span",{className:"font-sans font-bold text-3xl",children:""}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"w-12 h-0.5 bg-gray-900 rotate-45 transform origin-center"})})]}),T.jsx("span",{className:"text-[10px] leading-tight text-gray-800 font-medium",children:"No copyright infringement"})]}),T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsxs("div",{className:"w-14 h-14 mb-2 flex items-center justify-center text-gray-900 relative",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),T.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"w-12 h-0.5 bg-gray-900 rotate-45 transform origin-center"})})]}),T.jsx("span",{className:"text-[10px] leading-tight text-gray-800 font-medium",children:"No photos"})]})]}),T.jsx("div",{className:"w-full h-px bg-gray-200 mb-6"}),T.jsxs("div",{className:"mb-4 space-y-4",children:[T.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-widest mb-4 text-center",children:"INSTRUCTIONS"}),T.jsx("p",{className:"text-xs text-gray-700 font-medium leading-relaxed text-left",children:"Orders containing offensive, inappropriate, or copyrighted content may be cancelled without further notice."}),T.jsx("p",{className:"text-xs text-gray-700 font-medium leading-relaxed text-left",children:"Please verify your preview carefully: check for any unwanted lines or spots and crop them out."}),T.jsx("p",{className:"text-xs text-gray-700 font-medium leading-relaxed text-left",children:"For best results, commence with a sketch on white paper using a thick dark marker. Keep it simple and take a photo in a well-lit area without shadows."}),T.jsx("p",{className:"text-xs text-gray-700 font-medium leading-relaxed text-left",children:"Photographs will be converted to black and white, and results may vary. Proceed with high-contrast images for optimal engraving quality."})]})]})]})},Ne=[{name:"ITC Modern",style:{fontFamily:"ITC Modern",fontSize:"1.8em"},maxLength:1,frontSize:"1em",backSize:"5em",frontSizeMobile:"0.7em",backSizeMobile:"3.5em"},{name:"Nexa Script",style:{fontFamily:"Nexa Script",fontSize:"1.8em"},maxLength:1,frontSize:"1em",backSize:"5em",frontSizeMobile:"0.7em",backSizeMobile:"3.5em"},{name:"Roman",style:{fontFamily:"Roman",fontSize:"1.2em"},middleLarger:!0,frontSize:"0.8em",backSize:"2.2em",frontSizeMobile:"0.55em",backSizeMobile:"1.5em"},{name:"rJ#",style:{fontFamily:"Two Character Circle",fontSize:"1.2em"},frontSize:"1em",backSize:"5em",frontSizeMobile:"0.6em",backSizeMobile:"3.5em",useCircleGlyphs:!0},{name:"N-Gram",style:{fontFamily:"Two Character N-Gram",fontSize:"1.2em",marginLeft:"0.1em"},frontSize:"1em",backSize:"4em",frontSizeMobile:"0.6em",backSizeMobile:"2.7em",useNGramGlyphs:!0},{name:"Vine",style:{fontFamily:"Vine",fontSize:"1.2em",letterSpacing:".55em",marginLeft:"0.6em"},frontSize:"0.8em",backSize:"1.5em",frontSizeMobile:"0.5em",backSizeMobile:"1em"}],k0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"0",K:"!",L:"@",M:"#",N:"$",O:"%",P:"^",Q:"&",R:"*",S:"(",T:")",U:"-",V:"+",W:"[",X:"]",Y:"\\",Z:":"},El=(h,t)=>{if(!h)return"";const i=h.toUpperCase();if(h.length===2)return i[0].toLowerCase()+i[1];if(h.length===3){const s=i[0].toLowerCase(),r=i[1],o=k0[i[2]]||i[2];return s+r+o}return h},Tl=h=>h===2?"Two Character Circle":h===3?"Three Character Circle":"Two Character Circle",Cl=h=>{if(!h)return"";const t=h.toUpperCase();if(h.length===2)return"?"+t[0].toLowerCase()+t[1];if(h.length===3){const i=t[0].toLowerCase(),s=t[1],r=k0[t[2]]||t[2];return"?"+i+s+r}return h},_l=h=>h===2?"Two Character N-Gram":h===3?"Three Character N-Gram":"Two Character N-Gram",Ml=h=>Ne.find(i=>i.name===h)?.useNGramGlyphs===!0,Dl=h=>Ne.find(i=>i.name===h)?.useCircleGlyphs===!0,sa=(h,t,i,s=!1)=>{const r=Ne.find(u=>u.name===h),o=s?`max(4px, min(${150/Math.max(1,i)}cqi, 14cqi))`:`max(4px, min(${150/Math.max(1,i)}cqi, 17cqi))`;if(!r)return o;let l;return s?l=t==="FRONT"?r.frontSizeMobile:r.backSizeMobile:l=t==="FRONT"?r.frontSize:r.backSize,l||o},Cr=(h,t)=>{const i=Ne.find(s=>s.name===h);return i?i.useCircleGlyphs||i.useNGramGlyphs?t===2||t===3:(i.maxLength===1,t>=1):!1},L0={FRONT:{text:{top:"32.4%",left:"36%",right:"36%",bottom:"62%"},monogram:{top:"32.4%",left:"36%",right:"36%",bottom:"61%"},graphic:{top:"33%",left:"36%",right:"36%",bottom:"62%"},boundary:{top:"32.5%",left:"35%",right:"34%",bottom:"61%"}},BACK:{text:{top:"39%",left:"36%",right:"36%",bottom:"31%"},textVertical:{top:"40%",left:"36%",right:"36%",bottom:"25%"},monogram:{top:"33%",left:"36%",right:"36%",bottom:"31%"},graphic:{top:"33%",left:"36%",right:"36%",bottom:"31%"},boundary:{top:"40.5%",left:"35.5%",right:"36%",bottom:"31%"},boundaryVertical:{top:"39%",left:"35.5%",right:"36%",bottom:"25%"}}},B0={FRONT:{text:{top:"32.3%",left:"36%",right:"36%",bottom:"62%"},monogram:{top:"31%",left:"36%",right:"36%",bottom:"60%"},graphic:{top:"27.5%",left:"36%",right:"36%",bottom:"56.6%"},boundary:{top:"29%",left:"35%",right:"34%",bottom:"63%"}},BACK:{text:{top:"38%",left:"38%",right:"38%",bottom:"31%"},textVertical:{top:"40.5%",left:"38%",right:"38%",bottom:"27%"},monogram:{top:"37%",left:"36%",right:"36%",bottom:"31%"},graphic:{top:"33%",left:"22%",right:"22%",bottom:"31%"},boundary:{top:"39.5%",left:"36%",right:"36%",bottom:"31%"},boundaryVertical:{top:"38%",left:"36%",right:"36%",bottom:"21%"}}},cl={mobile:{FRONT:.32,BACK:.45},test:{FRONT:.2,BACK:.4},desktop:{FRONT:.65,BACK:.75}},lh=({side:h,customization:t,selectedColor:i,selectedFont:s,selectedMonogram:r,fonts:o,isMobile:l,isImageLoading:u,setIsImageLoading:d,view:f})=>{const g=f==="capture",b=h==="BACK"&&t.BACK?.isVertical,y=O=>{const I=O[h];return{...I,text:b&&I.textVertical?I.textVertical:I.text,boundary:b&&I.boundaryVertical?I.boundaryVertical:I.boundary}},x={FRONT:{text:"top-[27.3%] md:top-[32.4%] left-[36%] md:left-[36%] right-[36%] md:right-[36%] bottom-[62%] md:bottom-[62%]",monogram:"top-[25.2%] md:top-[32.4%] left-[36%] md:left-[36%] right-[36%] md:right-[36%] bottom-[60%] md:bottom-[61%]",graphic:"top-[26%] md:top-[33%] left-[36%] md:left-[36%] right-[36%] md:right-[36%] bottom-[61%] md:bottom-[62%]",boundary:"top-[29%] md:top-[32.5%] left-[35%] md:left-[35%] right-[34%] md:right-[34%] bottom-[63%] md:bottom-[61%]",zoom:"scale-[2.1] translate-y-[20%] md:scale-[2] md:translate-y-[5%]"},BACK:{text:h==="BACK"&&t.BACK?.isVertical?"top-[38%] md:top-[40%] left-[38%] md:left-[36%] right-[38%] md:right-[36%] bottom-[25%] md:bottom-[25%]":"top-[38%] md:top-[39%] left-[38%] md:left-[36%] right-[38%] md:right-[36%] bottom-[31%] md:bottom-[31%]",monogram:"top-[37%] md:top-[33%] left-[36%] md:left-[36%] right-[36%] md:right-[36%] bottom-[31%] md:bottom-[31%]",graphic:"top-[33%] md:top-[33%] left-[20%] md:left-[36%] right-[20%] md:right-[36%] bottom-[31%] md:bottom-[31%]",boundary:h==="BACK"&&t.BACK?.isVertical?"top-[38%] md:top-[39%] left-[36%] md:left-[35.5%] right-[36%] md:right-[36%] bottom-[21%] md:bottom-[25%]":"top-[39.5%] md:top-[40.5%] left-[36%] md:left-[35.5%] right-[36%] md:right-[36%] bottom-[31%] md:bottom-[31%]",zoom:"scale-[1.5] translate-y-[10%] md:scale-[2] md:translate-y-[5%]"}}[h],w=y(g&&l?B0:L0),C=t[h],S=C.text,M=C.monogram,_=C.graphic,[B,N]=Et.useState(!1),[k,z]=Et.useState(null);Et.useEffect(()=>{if(_?.src){if(g){z(_.src);return}if(_.src===k)return;N(!0);const O=new Image;O.onload=()=>{z(_.src),N(!1)},O.onerror=()=>{z(_.src),N(!1)},O.src=_.src}else z(null),N(!1)},[_?.src,g]);const $=()=>{d&&d(!1)},Y=O=>{console.warn("Image load error",O.target.src),d&&d(!1)},Z=O=>g?{position:"absolute",...w[O]}:{},W=O=>g?"absolute":`absolute ${x[O]}`,ot=g?{width:"300px",height:"500px",transform:"none",marginBottom:0,position:"relative"}:{},xt=g?"":`relative mb-4 md:mb-12 transition-transform duration-300 ease-in-out w-[200px] h-[280px] md:w-[300px] md:h-[500px] ${f&&f!=="main"?x.zoom:""}`,At=`${(l?cl.mobile:cl.desktop)[h]*100}%`;return T.jsx("div",{className:"flex flex-col items-center",children:T.jsxs("div",{className:xt,style:ot,children:[T.jsx("img",{src:`bottle/${h==="FRONT"?"front":"back"}/${i}${h==="BACK"?"back":""}.webp`,alt:`Yeti Bottle ${h}`,loading:"eager",className:`w-full h-full object-contain mix-blend-multiply drop-shadow-2xl transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,onLoad:$,onError:Y}),u&&!g&&T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"w-10 h-10 border-4 border-gray-300 border-t-[#002C5F] rounded-full animate-spin"})}),S&&T.jsx("div",{className:`${W("text")} flex items-center justify-center z-20 pointer-events-none overflow-hidden`,style:{containerType:"inline-size",...Z("text"),writingMode:h==="BACK"&&C.isVertical?"vertical-rl":void 0},children:T.jsx("span",{className:"text-center block overflow-hidden",style:{...o.find(O=>O.name===s)?.style,fontSize:h==="FRONT"?`max(4px, min(${100/Math.max(1,S.length)}cqi, 18cqi))`:`max(8px, min(${100/Math.max(1,S.length)}cqi, 34cqi))`,letterSpacing:"0.5px",wordBreak:"break-word",whiteSpace:"pre-wrap",lineHeight:1.2,fontVariantEmoji:"text",verticalAlign:"middle",textRendering:"geometricPrecision",...h==="FRONT"&&{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical"},...i==="white"?{background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",filter:"contrast(1.1) brightness(1.1) drop-shadow(0 1px 1px rgba(0,0,0,0.3))",WebkitTextFillColor:"transparent"}:{background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",filter:"contrast(1.1) brightness(1.1) drop-shadow(0 1px 1px rgba(0,0,0,0.3))",WebkitTextFillColor:"transparent"}},children:S})},`text-${i}`),_&&T.jsxs("div",{className:`${W("graphic")} flex items-center justify-center z-20 pointer-events-none overflow-hidden`,style:{containerType:"inline-size",transform:_.scale?`scale(${_.scale})`:"none",transformOrigin:"center center",...Z("graphic")},children:[B&&!g&&T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-[#002C5F] rounded-full animate-spin"})}),k&&!B&&T.jsx(T.Fragment,{children:_.isUpload?T.jsx("img",{src:k,alt:_.name||"Uploaded image",className:"w-full h-full object-contain transition-opacity duration-200",style:{filter:"grayscale(100%) contrast(1.2) brightness(1.2)",maxHeight:At,maxWidth:At}}):i==="white"?T.jsx("div",{className:"w-full h-full transition-opacity duration-200",style:{maskImage:`url(${k})`,WebkitMaskImage:`url(${k})`,maskSize:"contain",WebkitMaskSize:"contain",maskPosition:"center",WebkitMaskPosition:"center",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",filter:"contrast(1.1) brightness(1.1) drop-shadow(0 1px 1px rgba(0,0,0,0.3))",opacity:.95,maxHeight:At,maxWidth:At}}):T.jsx("div",{className:"w-full h-full transition-opacity duration-200",style:{maskImage:`url(${k})`,WebkitMaskImage:`url(${k})`,maskSize:"contain",WebkitMaskSize:"contain",maskPosition:"center",WebkitMaskPosition:"center",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",filter:"contrast(1.1) brightness(1.1) drop-shadow(0 1px 1px rgba(0,0,0,0.3))",opacity:.95,maxHeight:At,maxWidth:At}})})]},`graphic-${i}-${k}`),M&&Cr(r,M.length)&&T.jsx("div",{className:`${W("monogram")} flex items-center justify-center z-20 pointer-events-none`,style:{containerType:"inline-size",...Z("monogram")},children:Dl(r)?T.jsx("span",{className:"text-center whitespace-nowrap block",style:{fontFamily:Tl(M.length),fontSize:sa(r,h,M.length,g?!1:l),lineHeight:1.4,...i==="white"?{background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}:{background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}},children:El(M)}):Ml(r)?T.jsx("span",{className:"text-center whitespace-nowrap block",style:{...Ne.find(O=>O.name===r)?.style,fontFamily:_l(M.length),fontSize:sa(r,h,M.length,g?!1:l),lineHeight:1.4,...i==="white"?{background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}:{background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}},children:Cl(M)}):Ne.find(O=>O.name===r)?.middleLarger&&M.length===3?T.jsxs("span",{className:"text-center whitespace-nowrap block",style:{...Ne.find(O=>O.name===r)?.style,fontSize:sa(r,h,M.length,g?!1:l),display:"inline-flex",alignItems:"center",lineHeight:1.4,...i==="white"?{background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}:{background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}},children:[T.jsx("span",{style:{fontSize:l&&h==="FRONT"?"0.2em":"0.75em"},children:M[0]}),T.jsx("span",{style:{fontSize:l&&h==="FRONT"?"1.3em":"1em"},children:M[1]}),T.jsx("span",{style:{fontSize:l&&h==="FRONT"?"0.2em":"0.75em"},children:M[2]})]}):T.jsx("span",{className:"text-center whitespace-nowrap block",style:{...Ne.find(O=>O.name===r)?.style,fontSize:sa(r,h,M.length,g?!1:l),lineHeight:r==="Vine"?2.4:1.4,marginLeft:r==="Vine"?0:void 0,paddingLeft:r==="Vine"?"0.6em":void 0,paddingTop:r==="Vine"?"0.3em":void 0,paddingBottom:r==="Vine"?"0.3em":void 0,...i==="white"?{background:"linear-gradient(90deg, #b8b7b7ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}:{background:"linear-gradient(90deg, #e6e5e5ff 0%, #9e9e9e 50%, #656565 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent",WebkitTextFillColor:"transparent"}},children:Ne.find(O=>O.name===r)?.maxLength===1?M.charAt(0):M})},`monogram-${i}-${r}`),f&&f!=="main"&&!g&&T.jsx("div",{className:`absolute ${x.boundary} border border-dashed border-gray-400/60 rounded-sm pointer-events-none transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`})]})})},Up=({side:h,customization:t,selectedColor:i,selectedFont:s,selectedMonogram:r,fonts:o})=>{const l=t[h],u=l.text,d=l.monogram,f=l.graphic,g={width:"300px",height:"300px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"};return T.jsxs("div",{style:g,children:[u&&T.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"10px",writingMode:h==="BACK"&&l.isVertical?"vertical-rl":void 0},children:T.jsx("span",{style:{...o.find(b=>b.name===s)?.style,color:"#333333",fontSize:h==="FRONT"?`max(16px, min(${100/Math.max(1,u.length)}cqi, 72px))`:`max(16px, min(${100/Math.max(1,u.length)}cqi, 72px))`,letterSpacing:"0.5px",wordBreak:"break-word",whiteSpace:"pre-wrap",lineHeight:1.2,fontVariantEmoji:"text",textAlign:"center",verticalAlign:"middle",textRendering:"geometricPrecision",containerType:"inline-size"},children:u})}),f&&T.jsx("div",{style:{width:"80%",height:"80%",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsx("img",{src:f.src,alt:f.name,style:{width:"100%",height:"100%",objectFit:"contain",filter:f.isUpload?"none":"brightness(0)"}})}),d&&Cr(r,d.length)&&T.jsx("div",{style:{width:"80%",height:"80%",display:"flex",alignItems:"center",justifyContent:"center"},children:Dl(r)?T.jsx("span",{style:{fontFamily:Tl(d.length),color:"#333333",fontSize:"180px",lineHeight:1},children:El(d)}):Ml(r)?T.jsx("span",{style:{...Ne.find(b=>b.name===r)?.style,fontFamily:_l(d.length),color:"#333333",fontSize:"180px",lineHeight:1},children:Cl(d)}):Ne.find(b=>b.name===r)?.middleLarger&&d.length===3?T.jsxs("span",{style:{...Ne.find(b=>b.name===r)?.style,color:"#333333",fontSize:"180px",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[T.jsx("span",{style:{fontSize:"0.75em"},children:d[0]}),T.jsx("span",{style:{fontSize:"1em"},children:d[1]}),T.jsx("span",{style:{fontSize:"0.75em"},children:d[2]})]}):T.jsx("span",{style:{...Ne.find(b=>b.name===r)?.style,color:"#333333",fontSize:"180px",lineHeight:1},children:Ne.find(b=>b.name===r)?.maxLength===1?d.charAt(0):d})})]})},Th=()=>{if(typeof window>"u"||typeof navigator>"u")return!1;const h=navigator.userAgent||"",t=navigator.platform||"";return!!(/iPad|iPhone|iPod/.test(h)&&!window.MSStream||t==="MacIntel"&&navigator.maxTouchPoints>1||/Safari/.test(h)&&/Apple/.test(navigator.vendor)&&"ontouchstart"in window&&navigator.maxTouchPoints>1&&(!/Macintosh/.test(h)||navigator.maxTouchPoints>1))},F0=h=>new Promise((t,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>t(s),s.onerror=r=>i(r),s.src=h}),Bi=3,Ks=300*Bi,Ws=500*Bi,Qs=300*Bi,ww=16*Bi,ch=(h,t,i)=>{const s=parseFloat(h.top)/100,r=parseFloat(h.bottom)/100,o=parseFloat(h.left)/100,l=parseFloat(h.right)/100,u=o*t,d=s*i,f=t-o*t-l*t,g=i-s*i-r*i;return{x:u,y:d,width:f,height:g}},z0=(h,t)=>{const i=t.find(s=>s.name===h);return i&&i.style&&i.style.fontFamily?i.style.fontFamily:"sans-serif"},j0=(h,t)=>{const i=t.find(s=>s.name===h);return i&&i.style&&i.style.fontWeight?i.style.fontWeight:"normal"},P0=(h,t)=>{const i=t.find(s=>s.name===h);return i&&i.style&&i.style.fontStyle?i.style.fontStyle:"normal"},xw=(h,t,i,s,r,o)=>{const l=t.naturalWidth||t.width,u=t.naturalHeight||t.height;if(!l||!u)return;const d=Math.min(r/l,o/u),f=l*d,g=u*d,b=i+(r-f)/2,y=s+(o-g)/2;h.drawImage(t,b,y,f,g)},Ip=(h,t,i)=>{const s=Math.max(1,h.length),r=t/100;if(i==="FRONT"){const o=100/s*r,l=18*r;return Math.max(4*Bi,Math.min(o,l))}else{const o=100/s*r,l=34*r;return Math.max(8*Bi,Math.min(o,l))}},U0=(h,t,i,s,r,o,l,u,d=!1)=>{if(!t)return;h.save(),h.fillStyle=l,h.textAlign="center",h.textBaseline="middle";const f=i.x+i.width/2,g=i.y+i.height/2;if(d){const b=Ip(t,i.height,u);h.font=`${o} ${r} ${b}px ${s}`,h.translate(f,g),h.rotate(Math.PI/2);const y=b*1.05,A=i.height,x=[];let w="";const C=()=>{const _=w.replace(/^\s+/,"");_&&x.push(_),w=""};for(const _ of String(t)){if(_===`
`){C();continue}if(!w&&(_===" "||_==="	"))continue;const B=w+_,N=h.measureText(B).width;if(w&&N>A){if(C(),_===" "||_==="	")continue;w=_}else w=B}C(),x.length||x.push("");const M=-((x.length-1)*y)/2;x.forEach((_,B)=>{const N=M+B*y;h.fillText(_,0,N)})}else{const b=Ip(t,i.width,u);h.font=`${o} ${r} ${b}px ${s}`,h.fillText(t,f,g)}h.restore()},Sw=(h,t,i=ww)=>{if(!h)return i;const s=String(h).trim();if(/^[\d.]+em$/i.test(s))return parseFloat(s)*i;if(/^[\d.]+cqi$/i.test(s)){const r=parseFloat(s);return t/100*r}if(/^[\d.]+px$/i.test(s))return parseFloat(s)*Bi;if(s.startsWith("max(")||s.startsWith("min(")){const r=t/100;let o=s.replace(/([\d.]+)cqi/g,(l,u)=>String(parseFloat(u)*r));o=o.replace(/([\d.]+)px/g,(l,u)=>String(parseFloat(u)*Bi)),o=o.replace(/([\d.]+)em/g,(l,u)=>String(parseFloat(u)*i));try{const l=o.replace(/max/g,"Math.max").replace(/min/g,"Math.min");return new Function("return "+l)()}catch(l){return console.warn("Failed to parse CSS font size:",h,l),i}}return(parseFloat(s)||16)*Bi},I0=(h,t,i,s,r,o)=>{if(!t||!Cr(i,t.length))return;h.save();const l=r==="white"?"rgba(50,50,50,0.85)":"rgba(216, 216, 216, 0.73)";h.fillStyle=l,h.textAlign="center",h.textBaseline="middle";const u=s.x+s.width/2,d=s.y+s.height/2;let f=t,g="sans-serif",b=0;const y=Ne.find(w=>w.name===i),A=sa(i,o,t.length,!1),x=Sw(A,s.width);if(Dl(i)?(f=El(t),g=Tl(t.length)):Ml(i)?(f=Cl(t),g=_l(t.length),o==="BACK"&&(b=x*.05)):y&&(g=y.style?.fontFamily||"sans-serif",y.maxLength===1&&(f=t.charAt(0))),h.font=`normal normal ${x}px ${g}`,y?.middleLarger&&t.length===3){const w=x*.75,C=x;h.font=`normal normal ${w}px ${g}`;const S=h.measureText(t[0]);h.font=`normal normal ${C}px ${g}`;const M=h.measureText(t[1]);h.font=`normal normal ${w}px ${g}`;const _=h.measureText(t[2]),B=S.width+M.width+_.width;let N=u-B/2;h.font=`normal normal ${w}px ${g}`,h.fillText(t[0],N+S.width/2,d),N+=S.width,h.font=`normal normal ${C}px ${g}`,h.fillText(t[1],N+M.width/2,d),N+=M.width,h.font=`normal normal ${w}px ${g}`,h.fillText(t[2],N+_.width/2,d)}else if(i==="Vine"){const w=x*.55;let C=0;const S=[];for(let _=0;_<f.length;_++){const B=h.measureText(f[_]).width;S.push(B),C+=B,_<f.length-1&&(C+=w)}let M=u-C/2;for(let _=0;_<f.length;_++)h.fillText(f[_],M+S[_]/2,d),M+=S[_]+w}else h.fillText(f,u+b,d);h.restore()},H0=async(h,t,i,s,r=.75)=>{if(!(!t||!t.src))try{const o=await F0(t.src),l=t.scale||.5,u=Math.min(i.width,i.height)*r,d=o.width/o.height;let f,g;d>1?(f=u*l,g=f/d):(g=u*l,f=g*d);const b=i.x+(i.width-f)/2,y=i.y+(i.height-g)/2;if(h.save(),t.isUpload)h.filter="grayscale(100%) contrast(1.2) brightness(1.2)",h.globalCompositeOperation="source-over",h.globalAlpha=.9;else{const A=s!=="white"?" invert(1)":"";h.filter=`grayscale(100%)${A}`,h.globalCompositeOperation=s==="white"?"multiply":"source-over",h.globalAlpha=s==="white"?.85:.73}h.drawImage(o,b,y,f,g),h.restore()}catch(o){console.warn("Failed to load graphic for canvas capture:",o)}},tl=async(h,t,i,s,r,o)=>{const l=document.createElement("canvas");l.width=Ks,l.height=Ws;const u=l.getContext("2d");document.fonts&&document.fonts.ready&&await document.fonts.ready;const d=h==="FRONT"?`bottle/front/${i}.webp`:`bottle/back/${i}back.webp`;try{const S=await F0(d);xw(u,S,0,0,Ks,Ws)}catch(S){console.warn("Failed to load bottle image:",S),u.fillStyle="#f3f4f6",u.fillRect(0,0,Ks,Ws)}const f=t[h],g=f?.text||"",b=f?.monogram||"",y=f?.graphic||null,A=h==="BACK"&&f?.isVertical,x=Th(),w=x?B0[h]:L0[h],C=i==="white"?"rgba(50,50,50,0.85)":"rgba(180,180,180,0.85)";if(g){const S=A?w.textVertical:w.text,M=ch(S,Ks,Ws),_=z0(s,o),B=j0(s,o),N=P0(s,o);U0(u,g,M,_,B,N,C,h,A)}if(b){const S=ch(w.monogram,Ks,Ws);I0(u,b,r,S,i,h)}if(y){const M=(x?cl.test:cl.desktop)[h],_=ch(w.graphic,Ks,Ws);await H0(u,y,_,i,M)}return l.toDataURL("image/png")},Hp=async(h,t,i,s,r,o)=>{const l=t[h],u=l?.text||"",d=l?.monogram||"",f=l?.graphic||null;if(!u&&!d&&!f)return null;const g=document.createElement("canvas");g.width=Qs,g.height=Qs;const b=g.getContext("2d");document.fonts&&document.fonts.ready&&await document.fonts.ready,b.clearRect(0,0,Qs,Qs);const y=20*Bi,A={x:y,y,width:Qs-y*2,height:Qs-y*2},x="#333333",w=h==="BACK"&&l?.isVertical;if(u){const C=z0(s,o),S=j0(s,o),M=P0(s,o);U0(b,u,A,C,S,M,x,h,w)}return d&&Cr(r,d.length)&&I0(b,d,r,A,"white",h),f&&await H0(b,f,A,"white"),g.toDataURL("image/png")},Ew=()=>{const[h,t]=Et.useState("FRONT"),i=Et.useRef(null),s=Et.useRef(null),r=Et.useRef(null),o=Et.useRef(null),l=Et.useRef(null),[u,d]=Et.useState("black"),[f,g]=Et.useState("main"),[b,y]=Et.useState(!1),[A,x]=Et.useState(!1),[w,C]=Et.useState(!1);Et.useEffect(()=>{const J=()=>y(window.innerWidth<768);return J(),window.addEventListener("resize",J),window.takeSnapshot=async()=>{if(i.current)try{const rt=await qs(i.current,{cacheBust:!0}),It=document.createElement("a");It.download=`bottle-snapshot-${Date.now()}.png`,It.href=rt,It.click(),console.log("Snapshot taken with html-to-image!")}catch(rt){console.error("Snapshot failed:",rt)}else console.warn("Bottle preview ref not found")},()=>{window.removeEventListener("resize",J),delete window.takeSnapshot}},[]),Et.useEffect(()=>{x(!0)},[u,h]),Et.useEffect(()=>(window.setForceCanvasCapture=J=>{C(!!J),console.log(`[Customizer] Force canvas capture: ${!!J}`)},window.getForceCanvasCapture=()=>w,()=>{delete window.setForceCanvasCapture,delete window.getForceCanvasCapture}),[w]);const[S,M]=Et.useState({FRONT:{text:"",monogram:""},BACK:{text:"",monogram:"",isVertical:!1}}),[_,B]=Et.useState("BeFit"),[N,k]=Et.useState({FRONT:"Roman",BACK:"Roman"}),z=N[h],$=J=>{k(rt=>({...rt,[h]:J}))},Y=[{name:"BeFit",css:"font-sans",style:{fontFamily:'BeFit, "Noto Emoji", sans-serif'}},{name:"BeFit Slim",css:"font-sans",style:{fontFamily:'BeFit Slim, "Noto Emoji", sans-serif'}},{name:"BeFit Bold Italic",css:"font-sans font-bold italic",style:{fontFamily:'BeFit, "Noto Emoji", sans-serif',fontWeight:"bold",fontStyle:"italic"}},{name:"Sackers Gothic",css:"font-sans uppercase tracking-widest",style:{fontFamily:'Oswald, "Noto Emoji", sans-serif'}},{name:"Yearbook Solid",css:"font-serif uppercase font-black",style:{fontFamily:'Bebas Neue, "Noto Emoji", sans-serif'}},{name:"VAG Rounded Next",css:"font-sans",style:{fontFamily:'Nunito, "Noto Emoji", sans-serif'}},{name:"Samantha Script",css:"font-cursive",style:{fontFamily:'Dancing Script, "Noto Emoji", cursive'}},{name:"Cotford",css:"font-serif",style:{fontFamily:'Merriweather, "Noto Emoji", serif'}},{name:"Arial Bold",css:"font-sans font-bold",style:{fontFamily:'Arial, "Noto Emoji", sans-serif',fontWeight:"bold"}},{name:"ITC Modern No 216",css:"font-serif font-bold",style:{fontFamily:'Bodoni Moda, "Noto Emoji", serif'}},{name:"Benguiat Pro ITC Bold",css:"font-serif font-bold",style:{fontFamily:'Playfair Display, "Noto Emoji", serif',fontWeight:"bold"}},{name:"Rockwell Bold",css:"font-serif font-bold",style:{fontFamily:'Alfa Slab One, "Noto Emoji", serif'}},{name:"WHIPHAND",css:"font-display uppercase",style:{fontFamily:'Permanent Marker, "Noto Emoji", cursive',fontStyle:"italic"}},{name:"WOOD TYPE",css:"font-display uppercase tracking-wide",style:{fontFamily:'Bungee, "Noto Emoji", sans-serif'}},{name:"Futura Bold",css:"font-sans font-bold uppercase",style:{fontFamily:'Oswald, "Noto Emoji", sans-serif',fontWeight:"bold"}},{name:"Script MT Bold",css:"font-cursive font-bold",style:{fontFamily:'Dancing Script, "Noto Emoji", cursive',fontWeight:"bold"}},{name:"Times New Roman",css:"font-serif",style:{fontFamily:'Times New Roman, "Noto Emoji", serif'}},{name:"Allura",css:"font-cursive",style:{fontFamily:'Allura, "Noto Emoji", cursive'}},{name:"Bebas Neue Bold",css:"font-display",style:{fontFamily:'Bebas Neue, "Noto Emoji", sans-serif',fontWeight:"bold"}},{name:"Libre Baskerville",css:"font-serif",style:{fontFamily:'Libre Baskerville, "Noto Emoji", serif'}},{name:"Montserrat Italics",css:"font-sans italic",style:{fontFamily:'Montserrat, "Noto Emoji", sans-serif',fontStyle:"italic"}},{name:"Dancing Script",css:"font-cursive",style:{fontFamily:'Dancing Script, "Noto Emoji", cursive'}},{name:"Yellowtail",css:"font-cursive",style:{fontFamily:'Yellowtail, "Noto Emoji", cursive'}}],[Z,W]=Et.useState(!1),[ot,xt]=Et.useState(!1),[ht,At]=Et.useState({front:null,back:null,frontDesign:null,backDesign:null}),O=()=>typeof window<"u"&&window.parent&&window.parent!==window?(window.parent.postMessage({type:"BOTTLE_CUSTOMIZER_CLOSE"},"*"),!0):!1,I=S[h].text,Q=S[h].monogram,mt=S[h].graphic,St=J=>{M(rt=>({...rt,[h]:{...rt[h],text:J,monogram:J?"":rt[h].monogram,graphic:J?null:rt[h].graphic}}))},R=J=>{M(rt=>({...rt,[h]:{...rt[h],monogram:J,text:J?"":rt[h].text,graphic:J?null:rt[h].graphic}}))},H=J=>{M(rt=>({...rt,[h]:{...rt[h],graphic:J,text:J?"":rt[h].text,monogram:J?"":rt[h].monogram}}))},K=J=>{M(rt=>({...rt,[h]:{...rt[h],isVertical:J}}))},tt=()=>{M(J=>({...J,[h]:{text:"",monogram:"",graphic:null}}))},at=J=>new Promise(rt=>{if(!J.current){rt();return}const It=J.current.querySelectorAll("img");if(It.length===0){rt();return}let Jt=0;const ri=()=>{Jt++,Jt>=It.length&&rt()};It.forEach(be=>{be.complete?ri():(be.addEventListener("load",ri),be.addEventListener("error",ri))}),setTimeout(rt,2e3)});Et.useEffect(()=>(window.takeSnapshotCanvas=async(J="FRONT")=>{const rt=J.toUpperCase();if(rt!=="FRONT"&&rt!=="BACK"){console.error('[takeSnapshotCanvas] Invalid side. Use "FRONT" or "BACK".');return}console.log(`[takeSnapshotCanvas] Capturing ${rt} with canvas compositor...`);try{document.fonts&&document.fonts.ready&&await document.fonts.ready;const It=await tl(rt,S,u,_,N[rt],Y),Jt=document.createElement("a");Jt.download=`bottle-canvas-${rt.toLowerCase()}-${Date.now()}.png`,Jt.href=It,Jt.click(),console.log(`[takeSnapshotCanvas] ${rt} snapshot saved!`)}catch(It){console.error("[takeSnapshotCanvas] Failed:",It)}},window.compareSnapshots=async(J="FRONT")=>{const rt=J.toUpperCase();if(rt!=="FRONT"&&rt!=="BACK"){console.error('[compareSnapshots] Invalid side. Use "FRONT" or "BACK".');return}const It=rt==="FRONT"?s:r;console.log(`[compareSnapshots] Capturing ${rt} with both methods...`);try{await at(It),document.fonts&&document.fonts.ready&&await document.fonts.ready,await new Promise(ha=>setTimeout(ha,100));let Jt=null;It.current&&(Jt=await qs(It.current,{cacheBust:!0,skipAutoScale:!0}));const ri=await tl(rt,S,u,_,N[rt],Y);window.open("","_blank","width=700,height=600").document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head><title>Snapshot Comparison - ${rt}</title></head>
                    <body style="margin:0;padding:20px;background:#f0f0f0;font-family:sans-serif;">
                        <h3 style="margin:0 0 10px;">Snapshot Comparison: ${rt}</h3>
                        <div style="display:flex;gap:20px;">
                            <div style="text-align:center;">
                                <p style="margin:0 0 5px;font-weight:bold;">html-to-image</p>
                                <img src="${Jt}" style="border:1px solid #ccc;max-width:300px;" />
                            </div>
                            <div style="text-align:center;">
                                <p style="margin:0 0 5px;font-weight:bold;">Canvas Compositor</p>
                                <img src="${ri}" style="border:1px solid #ccc;max-width:300px;" />
                            </div>
                        </div>
                        <p style="margin-top:20px;font-size:12px;color:#666;">
                            Canvas should match html-to-image. If text/position differs, adjust canvasCapture.js
                        </p>
                    </body>
                    </html>
                `),console.log("[compareSnapshots] Comparison window opened!")}catch(Jt){console.error("[compareSnapshots] Failed:",Jt)}},()=>{delete window.takeSnapshotCanvas,delete window.compareSnapshots}),[S,u,_,N]);const ft=async()=>{try{xt(!0),x(!0);let J=null,rt=null,It=null,Jt=null;Th()||w?(console.log(`[Customizer] Using canvas capture (iOS: ${Th()}, forced: ${w})`),document.fonts&&document.fonts.ready&&await document.fonts.ready,J=await tl("FRONT",S,u,_,N.FRONT,Y),rt=await tl("BACK",S,u,_,N.BACK,Y),It=await Hp("FRONT",S,u,_,N.FRONT,Y),Jt=await Hp("BACK",S,u,_,N.BACK,Y)):(console.log("[Customizer] Using html-to-image capture"),await new Promise(be=>requestAnimationFrame(()=>requestAnimationFrame(be))),await Promise.all([at(s),at(r),at(o),at(l)]),await new Promise(be=>setTimeout(be,100)),s.current&&(J=await qs(s.current,{cacheBust:!0,skipAutoScale:!0})),r.current&&(rt=await qs(r.current,{cacheBust:!0,skipAutoScale:!0})),o.current&&(S.FRONT.text||S.FRONT.monogram||S.FRONT.graphic)&&(It=await qs(o.current,{cacheBust:!0,backgroundColor:null})),l.current&&(S.BACK.text||S.BACK.monogram||S.BACK.graphic)&&(Jt=await qs(l.current,{cacheBust:!0,backgroundColor:null}))),At({front:J,back:rt,frontDesign:It,backDesign:Jt}),x(!1),xt(!1),W(!0)}catch(J){console.error("Failed to capture review images",J),x(!1),xt(!1),W(!0)}},ut=I||Q||mt,qt=[{id:"black",name:"BLACK",bg:"bg-black",text:"text-white"},{id:"white",name:"WHITE",bg:"bg-white",text:"text-black",border:"border-gray-200"},{id:"aqua",name:"NAVY",bg:"bg-[#002C5F]",text:"text-white"},{id:"red",name:"RED",bg:"bg-[#C8102E]",text:"text-white"}];return T.jsxs("div",{className:"flex flex-col h-screen bg-gray-100 font-sans text-slate-900 overflow-y-auto",children:[T.jsx("header",{id:"app-header",className:"bg-white border-b border-gray-200 z-10 relative",children:T.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 md:px-6 h-14 md:h-16 flex items-center justify-between",children:[T.jsx("div",{className:"flex-shrink-0",children:T.jsx("img",{src:"logo.png",alt:"YETI",loading:"lazy",className:"h-8 md:h-10 w-auto object-contain"})}),T.jsx("nav",{className:"flex space-x-4 md:space-x-8 h-full",children:["FRONT","BACK"].map(J=>T.jsx("button",{onClick:()=>t(J),className:`relative h-full px-1 text-xs md:text-sm font-bold tracking-widest uppercase transition-colors
                  ${h===J?"text-black border-b-4 border-brand-blue":"text-gray-400 hover:text-gray-600"}`,children:J},J))}),T.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-[#002C5F]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),T.jsxs("main",{className:"flex-1 flex flex-col md:flex-row overflow-y-auto md:overflow-hidden relative",children:[T.jsxs("div",{id:"bottle-canvas",className:"w-full md:w-1/2 flex items-center justify-center bg-[#f3f4f6] relative py-6 md:py-0 overflow-hidden min-h-[300px] md:min-h-0",children:[T.jsxs("div",{ref:i,className:"flex flex-col items-center",children:[T.jsx(lh,{side:h,customization:S,selectedColor:u,selectedFont:_,selectedMonogram:z,fonts:Y,isMobile:b,isImageLoading:A,setIsImageLoading:x,view:f}),T.jsxs("div",{className:`text-center space-y-2 md:space-y-4 hidden md:block transition-opacity duration-300 ${f!=="main"?"opacity-0 pointer-events-none":"opacity-100"}`,children:[T.jsx("h2",{className:"text-xs md:text-sm font-bold text-[#002C5F] tracking-wider uppercase",children:"RAMBLER 16 OZ TRAVEL BOTTLE"}),T.jsx("div",{className:"flex items-center justify-center space-x-3",children:qt.map(J=>T.jsx("button",{onClick:()=>d(J.id),className:`w-8 h-8 rounded-full ${J.bg} ${J.border||""} 
                                     ring-2 ring-offset-2 transition-all duration-200
                                     ${u===J.id?"ring-[#002C5F]":"ring-transparent hover:ring-gray-300"}
                                 `,"aria-label":`Select ${J.name} color`},J.id))}),T.jsxs("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:["PRODUCT COLOR: ",T.jsx("span",{className:"text-black",children:qt.find(J=>J.id===u)?.name})]})]})]}),T.jsx(yA,{colors:qt,selectedColor:u,setSelectedColor:d,isMobile:b})]}),T.jsxs("div",{className:`w-full md:w-1/2 bg-[#f3f4f6] md:bg-[#f3f4f6] p-4 md:p-12 flex flex-col items-center justify-start flex-1 md:mb-0 md:overflow-y-auto md:pb-32 ${f!=="main"?"mb-16":""}`,children:[f==="main"&&T.jsx(mA,{setView:g}),f==="text"&&T.jsx(gA,{setView:g,textInput:I,setTextInput:St,fonts:Y,selectedFont:_,setSelectedFont:B,activeTab:h,isVertical:S[h].isVertical,setIsVertical:K}),f==="monogram"&&T.jsx(pA,{setView:g,monogramInput:Q,setMonogramInput:R,monogramStyles:Ne,selectedMonogram:z,setSelectedMonogram:$}),f==="gallery"&&T.jsx(bA,{setView:g,setGraphic:H,selectedGraphic:mt}),f==="upload"&&T.jsx(Aw,{setView:g,setGraphic:H,graphicInput:mt,activeTab:h})]}),f!=="main"&&T.jsx(vA,{onRemove:tt,onReview:ft,isDisabled:!ut,isPreparing:ot})]}),T.jsxs("div",{style:{position:"fixed",top:0,left:"-9999px",pointerEvents:"none",zIndex:-1},children:[T.jsx("div",{ref:s,children:T.jsx(lh,{side:"FRONT",customization:S,selectedColor:u,selectedFont:_,selectedMonogram:N.FRONT,fonts:Y,isMobile:!1,view:"capture"})}),T.jsx("div",{ref:r,children:T.jsx(lh,{side:"BACK",customization:S,selectedColor:u,selectedFont:_,selectedMonogram:N.BACK,fonts:Y,isMobile:!1,view:"capture"})}),T.jsx("div",{ref:o,children:T.jsx(Up,{side:"FRONT",customization:S,selectedColor:u,selectedFont:_,selectedMonogram:N.FRONT,fonts:Y})}),T.jsx("div",{ref:l,children:T.jsx(Up,{side:"BACK",customization:S,selectedColor:u,selectedFont:_,selectedMonogram:N.BACK,fonts:Y})})]}),ot&&T.jsxs("div",{className:"fixed inset-0 z-[60] bg-white/95 flex flex-col items-center justify-center",children:[T.jsx("div",{className:"w-14 h-14 border-4 border-gray-300 border-t-[#002C5F] rounded-full animate-spin mb-4"}),T.jsx("p",{className:"text-lg font-semibold text-[#002C5F]",children:"Preparing your design..."})]}),Z&&T.jsx(wA,{onClose:()=>W(!1),onRequestClose:O,customization:S,selectedColor:u,selectedFont:_,selectedMonogramBySide:N,fonts:Y,monogramStyles:Ne,convertToCircleGlyphs:El,getCircleFontFamily:Tl,usesCircleGlyphs:Dl,convertToNGramGlyphs:Cl,getNGramFontFamily:_l,usesNGramGlyphs:Ml,getMonogramFontSize:sa,shouldDisplayMonogram:Cr,setActiveTab:t,setView:g,frontImage:ht.front,backImage:ht.back,frontDesignImage:ht.frontDesign,backDesignImage:ht.backDesign})]})};function Tw(){return T.jsx(Ew,{})}wv.createRoot(document.getElementById("root")).render(T.jsx(Et.StrictMode,{children:T.jsx(Tw,{})}));
